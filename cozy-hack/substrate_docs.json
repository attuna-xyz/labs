[
  {
    "content": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nOn This Page\n\n*   [Mini examples](#mini-examples)\n    \n\nIntroduction\n\nSubstrate is a **powerful SDK** for building with AI models, with [batteries included (opens in a new tab)](https://substrate.run/nodes)\n: language models, image generation, built-in vector storage, sandboxed code execution, and more.\n\nSubstrate is also an **inference engine optimized for running compound AI workloads**. Wiring together multiple inference APIs is inherently slow – whether you do it yourself, or use a framework like LangChain. Substrate lets you ditch the framework, write less code, and run compound AI fast. Learn more: [Why Substrate?](/why)\n\n### Mini examples[](#mini-examples)\n\nSubstrate is the **simplest** way to write multi-step AI programs. Each example below is hosted in a runnable code environment, so you can get a feel for Substrate without opening your editor.\n\nWrangle structured dataImage generationHacker News researchSpanish lesson\n\nTake a JSON object and transform it into the target schema.\n\nComputeJSON\n\nCompute JSON using a language model.\n\nExample\n\n[API Reference](https://substrate.run/nodes#ComputeJSON)\n\nComputeJSON( prompt=\"Who wrote Don Quixote?\", json\\_schema={ \"type\": \"object\", \"properties\": { \"name\": { \"type\": \"string\", \"description\": \"The name of the author.\", }, \"bio\": { \"type\": \"string\", \"description\": \"Concise biography of the author.\", }, }, }, temperature=0.4, max\\_tokens=800, )\n\nOutput\n\n{ \"json\\_object\": {} }\n\nproduces 100% guaranteed JSON output. (Unreliable JSON generation is a common pain point with other providers.)\n\nYou can run this code (hit \"Preview\") or [view on val.town (opens in a new tab)](https://www.val.town/v/substrate/shapeshift)\n\n[Get started](/overview/setup \"Get started\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "markdown": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nOn This Page\n\n*   [Mini examples](#mini-examples)\n    \n\nIntroduction\n\nSubstrate is a **powerful SDK** for building with AI models, with [batteries included (opens in a new tab)](https://substrate.run/nodes)\n: language models, image generation, built-in vector storage, sandboxed code execution, and more.\n\nSubstrate is also an **inference engine optimized for running compound AI workloads**. Wiring together multiple inference APIs is inherently slow – whether you do it yourself, or use a framework like LangChain. Substrate lets you ditch the framework, write less code, and run compound AI fast. Learn more: [Why Substrate?](/why)\n\n### Mini examples[](#mini-examples)\n\nSubstrate is the **simplest** way to write multi-step AI programs. Each example below is hosted in a runnable code environment, so you can get a feel for Substrate without opening your editor.\n\nWrangle structured dataImage generationHacker News researchSpanish lesson\n\nTake a JSON object and transform it into the target schema.\n\nComputeJSON\n\nCompute JSON using a language model.\n\nExample\n\n[API Reference](https://substrate.run/nodes#ComputeJSON)\n\nComputeJSON( prompt=\"Who wrote Don Quixote?\", json\\_schema={ \"type\": \"object\", \"properties\": { \"name\": { \"type\": \"string\", \"description\": \"The name of the author.\", }, \"bio\": { \"type\": \"string\", \"description\": \"Concise biography of the author.\", }, }, }, temperature=0.4, max\\_tokens=800, )\n\nOutput\n\n{ \"json\\_object\": {} }\n\nproduces 100% guaranteed JSON output. (Unreliable JSON generation is a common pain point with other providers.)\n\nYou can run this code (hit \"Preview\") or [view on val.town (opens in a new tab)](https://www.val.town/v/substrate/shapeshift)\n\n[Get started](/overview/setup \"Get started\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "metadata": {
      "ogUrl": "https://docs.substrate.run",
      "title": "Substrate",
      "robots": "index,follow",
      "ogImage": "/og-image-v3.png",
      "ogTitle": "Substrate",
      "sourceURL": "https://docs.substrate.run",
      "description": "Substrate",
      "ogDescription": "The platform for compound AI. Powerful SDKs, with batteries included: optimized AI models, vector storage, code interpreter, and agentic control flow. Stop using LangChain.",
      "pageStatusCode": 200,
      "ogLocaleAlternate": []
    },
    "linksOnPage": [
      "https://substrate.run",
      "https://docs.substrate.run/",
      "https://substrate.run/nodes",
      "https://substrate.run/pricing",
      "https://substrate.run/company",
      "https://blog.substrate.run",
      "https://docs.substrate.run/overview/setup",
      "https://docs.substrate.run/overview/connecting",
      "https://docs.substrate.run/overview/storing",
      "https://docs.substrate.run/why",
      "https://docs.substrate.run/changelog",
      "https://docs.substrate.run/guides/extract-and-summarize",
      "https://docs.substrate.run/guides/reimagine-a-room",
      "https://docs.substrate.run/guides/transcription",
      "https://docs.substrate.run/guides/vector-stores",
      "https://docs.substrate.run/guides/remove-background",
      "https://docs.substrate.run/guides/masked-image-generation",
      "https://docs.substrate.run/guides/mixture-of-agents",
      "https://docs.substrate.run/reference/api",
      "https://docs.substrate.run/reference/quick",
      "https://docs.substrate.run/reference/box",
      "https://docs.substrate.run/reference/if",
      "https://docs.substrate.run/reference/run-python",
      "https://docs.substrate.run/reference/streaming",
      "https://docs.substrate.run/reference/external-files",
      "https://docs.substrate.run/reference/external-files/s3",
      "https://docs.substrate.run/reference/versioning",
      "https://docs.substrate.run/reference/legal/terms-of-service",
      "https://docs.substrate.run/reference/legal/privacy-policy",
      "https://docs.substrate.run/reference/legal/usage-policy",
      "https://substrate.run/nodes#ComputeJSON",
      "https://www.val.town/v/substrate/shapeshift",
      "https://x.com/substratelabs",
      "https://www.linkedin.com/company/substratelabs",
      "https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA"
    ]
  },
  {
    "content": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nOn This Page\n\n*   [Mini examples](#mini-examples)\n    \n\nIntroduction\n\nSubstrate is a **powerful SDK** for building with AI models, with [batteries included (opens in a new tab)](https://substrate.run/nodes)\n: language models, image generation, built-in vector storage, sandboxed code execution, and more.\n\nSubstrate is also an **inference engine optimized for running compound AI workloads**. Wiring together multiple inference APIs is inherently slow – whether you do it yourself, or use a framework like LangChain. Substrate lets you ditch the framework, write less code, and run compound AI fast. Learn more: [Why Substrate?](/why)\n\n### Mini examples[](#mini-examples)\n\nSubstrate is the **simplest** way to write multi-step AI programs. Each example below is hosted in a runnable code environment, so you can get a feel for Substrate without opening your editor.\n\nWrangle structured dataImage generationHacker News researchSpanish lesson\n\nTake a JSON object and transform it into the target schema.\n\nComputeJSON\n\nCompute JSON using a language model.\n\nExample\n\n[API Reference](https://substrate.run/nodes#ComputeJSON)\n\nComputeJSON( prompt=\"Who wrote Don Quixote?\", json\\_schema={ \"type\": \"object\", \"properties\": { \"name\": { \"type\": \"string\", \"description\": \"The name of the author.\", }, \"bio\": { \"type\": \"string\", \"description\": \"Concise biography of the author.\", }, }, }, temperature=0.4, max\\_tokens=800, )\n\nOutput\n\n{ \"json\\_object\": {} }\n\nproduces 100% guaranteed JSON output. (Unreliable JSON generation is a common pain point with other providers.)\n\nYou can run this code (hit \"Preview\") or [view on val.town (opens in a new tab)](https://www.val.town/v/substrate/shapeshift)\n\n[Get started](/overview/setup \"Get started\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "markdown": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nOn This Page\n\n*   [Mini examples](#mini-examples)\n    \n\nIntroduction\n\nSubstrate is a **powerful SDK** for building with AI models, with [batteries included (opens in a new tab)](https://substrate.run/nodes)\n: language models, image generation, built-in vector storage, sandboxed code execution, and more.\n\nSubstrate is also an **inference engine optimized for running compound AI workloads**. Wiring together multiple inference APIs is inherently slow – whether you do it yourself, or use a framework like LangChain. Substrate lets you ditch the framework, write less code, and run compound AI fast. Learn more: [Why Substrate?](/why)\n\n### Mini examples[](#mini-examples)\n\nSubstrate is the **simplest** way to write multi-step AI programs. Each example below is hosted in a runnable code environment, so you can get a feel for Substrate without opening your editor.\n\nWrangle structured dataImage generationHacker News researchSpanish lesson\n\nTake a JSON object and transform it into the target schema.\n\nComputeJSON\n\nCompute JSON using a language model.\n\nExample\n\n[API Reference](https://substrate.run/nodes#ComputeJSON)\n\nComputeJSON( prompt=\"Who wrote Don Quixote?\", json\\_schema={ \"type\": \"object\", \"properties\": { \"name\": { \"type\": \"string\", \"description\": \"The name of the author.\", }, \"bio\": { \"type\": \"string\", \"description\": \"Concise biography of the author.\", }, }, }, temperature=0.4, max\\_tokens=800, )\n\nOutput\n\n{ \"json\\_object\": {} }\n\nproduces 100% guaranteed JSON output. (Unreliable JSON generation is a common pain point with other providers.)\n\nYou can run this code (hit \"Preview\") or [view on val.town (opens in a new tab)](https://www.val.town/v/substrate/shapeshift)\n\n[Get started](/overview/setup \"Get started\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "metadata": {
      "ogUrl": "https://docs.substrate.run",
      "title": "Substrate",
      "robots": "index,follow",
      "ogImage": "/og-image-v3.png",
      "ogTitle": "Substrate",
      "sourceURL": "https://docs.substrate.run/",
      "description": "Substrate",
      "ogDescription": "The platform for compound AI. Powerful SDKs, with batteries included: optimized AI models, vector storage, code interpreter, and agentic control flow. Stop using LangChain.",
      "pageStatusCode": 200,
      "ogLocaleAlternate": []
    },
    "linksOnPage": [
      "https://substrate.run",
      "https://docs.substrate.run/",
      "https://substrate.run/nodes",
      "https://substrate.run/pricing",
      "https://substrate.run/company",
      "https://blog.substrate.run",
      "https://docs.substrate.run/overview/setup",
      "https://docs.substrate.run/overview/connecting",
      "https://docs.substrate.run/overview/storing",
      "https://docs.substrate.run/why",
      "https://docs.substrate.run/changelog",
      "https://docs.substrate.run/guides/extract-and-summarize",
      "https://docs.substrate.run/guides/reimagine-a-room",
      "https://docs.substrate.run/guides/transcription",
      "https://docs.substrate.run/guides/vector-stores",
      "https://docs.substrate.run/guides/remove-background",
      "https://docs.substrate.run/guides/masked-image-generation",
      "https://docs.substrate.run/guides/mixture-of-agents",
      "https://docs.substrate.run/reference/api",
      "https://docs.substrate.run/reference/quick",
      "https://docs.substrate.run/reference/box",
      "https://docs.substrate.run/reference/if",
      "https://docs.substrate.run/reference/run-python",
      "https://docs.substrate.run/reference/streaming",
      "https://docs.substrate.run/reference/external-files",
      "https://docs.substrate.run/reference/external-files/s3",
      "https://docs.substrate.run/reference/versioning",
      "https://docs.substrate.run/reference/legal/terms-of-service",
      "https://docs.substrate.run/reference/legal/privacy-policy",
      "https://docs.substrate.run/reference/legal/usage-policy",
      "https://substrate.run/nodes#ComputeJSON",
      "https://www.val.town/v/substrate/shapeshift",
      "https://x.com/substratelabs",
      "https://www.linkedin.com/company/substratelabs",
      "https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA"
    ]
  },
  {
    "content": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nOn This Page\n\n*   [Install the SDK](#install-the-sdk)\n    \n*   [Initialize Substrate](#initialize-substrate)\n    \n*   [Create a graph](#create-a-graph)\n    \n*   [Run the graph](#run-the-graph)\n    \n*   [Get the output](#get-the-output)\n    \n\nOverview\n\nGet started\n\n֍\n\nSet up the Substrate SDK\n\nInstall the SDK[](#install-the-sdk)\n\n------------------------------------\n\nThe official Substrate SDKs are the recommended way to interact with Substrate from TypeScript, JavaScript, or Python.\n\nWe plan to generate idiomatic SDKs for the Substrate protocol in every popular language. [Let us know (opens in a new tab)](https://iiv4fwwtbkr.typeform.com/to/JdPN6m5W)\n which languages to prioritize next.\n\npippoetrynpmyarn\n\n`pip install substrate`\n\n[substrate-pythongithub.com/substratelabs/substrate-python](https://github.com/substratelabs/substrate-python)\n[substrate-typescriptgithub.com/substratelabs/substrate-typescript](https://github.com/substratelabs/substrate-typescript)\n\nInitialize Substrate[](#initialize-substrate)\n\n----------------------------------------------\n\nSubstrate uses API keys to authenticate requests. Create an API key in [your Substrate Dashboard](/dashboard/keys)\n. Then, import and initialize the `Substrate` client with your API key.\n\nPython\n\nTypeScript\n\n`   from substrate import Substrate, ComputeText, sb        substrate = Substrate(api_key=YOUR_API_KEY)            `\n\n⚠️\n\nYour API keys carry the ability to make requests using your Substrate account, so be sure to keep them secure. Do not share your API keys in areas such as publicly-accessible client-side code, social media, or public GitHub repos.\n\nCreate a graph[](#create-a-graph)\n\n----------------------------------\n\nGenerate a story with a language model using\n\nComputeText\n\nCompute text using a language model.\n\nExample\n\n[API Reference](https://substrate.run/nodes#ComputeText)\n\nComputeText( prompt=\"Who is Don Quixote?\", temperature=0.4, max\\_tokens=800, )\n\nOutput\n\n{ \"text\": \"Don Quixote is a fictional character in the novel of the same name by Miguel de Cervantes.\" }\n\n. Then, summarize the story by passing the future output of the `story` to a `summary` node.\n\nPython\n\nTypeScript\n\n`   story = ComputeText(prompt=\"tell me a story\")    summary = ComputeText(prompt=sb.concat(\"summarize this story in one sentence: \", story.future.text))            `\n\nBecause `story` has not been run yet, we must use `sb.concat` to create a prompt using a string from its future output.\n\nRun the graph[](#run-the-graph)\n\n--------------------------------\n\nWe've created a simple graph chaining `story` → `summary`. Run the graph by calling `substrate.run`.\n\nPython\n\nTypeScript\n\n`   response = substrate.run(summary);            `\n\nSubstrate automatically finds the upstream dependencies for nodes.\n\n*   You must pass all terminal nodes to `substrate.run`.\n*   Passing upstream nodes is optional.\n*   You may pass disconnected nodes (or multiple graphs) to run them in parallel.\n\nGet the output[](#get-the-output)\n\n----------------------------------\n\nAfter running the graph, use `response.get` to retrieve the output of any of the nodes in the graph.\n\nPython\n\nTypeScript\n\n`   summary_out = response.get(summary)    print(summary_out.text)            `\n\nIf you want to combine the outputs of multiple nodes into a single response, you can use a [`Box`](/reference/box)\n:\n\nPython\n\nTypeScript\n\n`   # ...        box = Box(    value={    \"story\": story.future.text,    \"summary\": summary.future.text,    }    )    res = substrate.run(box)            `\n\nYou can also [stream](/reference/streaming)\n outputs.\n\n[Introduction](/ \"Introduction\")\n[Connect nodes](/overview/connecting \"Connect nodes\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "markdown": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nOn This Page\n\n*   [Install the SDK](#install-the-sdk)\n    \n*   [Initialize Substrate](#initialize-substrate)\n    \n*   [Create a graph](#create-a-graph)\n    \n*   [Run the graph](#run-the-graph)\n    \n*   [Get the output](#get-the-output)\n    \n\nOverview\n\nGet started\n\n֍\n\nSet up the Substrate SDK\n\nInstall the SDK[](#install-the-sdk)\n\n------------------------------------\n\nThe official Substrate SDKs are the recommended way to interact with Substrate from TypeScript, JavaScript, or Python.\n\nWe plan to generate idiomatic SDKs for the Substrate protocol in every popular language. [Let us know (opens in a new tab)](https://iiv4fwwtbkr.typeform.com/to/JdPN6m5W)\n which languages to prioritize next.\n\npippoetrynpmyarn\n\n`pip install substrate`\n\n[substrate-pythongithub.com/substratelabs/substrate-python](https://github.com/substratelabs/substrate-python)\n[substrate-typescriptgithub.com/substratelabs/substrate-typescript](https://github.com/substratelabs/substrate-typescript)\n\nInitialize Substrate[](#initialize-substrate)\n\n----------------------------------------------\n\nSubstrate uses API keys to authenticate requests. Create an API key in [your Substrate Dashboard](/dashboard/keys)\n. Then, import and initialize the `Substrate` client with your API key.\n\nPython\n\nTypeScript\n\n`   from substrate import Substrate, ComputeText, sb        substrate = Substrate(api_key=YOUR_API_KEY)            `\n\n⚠️\n\nYour API keys carry the ability to make requests using your Substrate account, so be sure to keep them secure. Do not share your API keys in areas such as publicly-accessible client-side code, social media, or public GitHub repos.\n\nCreate a graph[](#create-a-graph)\n\n----------------------------------\n\nGenerate a story with a language model using\n\nComputeText\n\nCompute text using a language model.\n\nExample\n\n[API Reference](https://substrate.run/nodes#ComputeText)\n\nComputeText( prompt=\"Who is Don Quixote?\", temperature=0.4, max\\_tokens=800, )\n\nOutput\n\n{ \"text\": \"Don Quixote is a fictional character in the novel of the same name by Miguel de Cervantes.\" }\n\n. Then, summarize the story by passing the future output of the `story` to a `summary` node.\n\nPython\n\nTypeScript\n\n`   story = ComputeText(prompt=\"tell me a story\")    summary = ComputeText(prompt=sb.concat(\"summarize this story in one sentence: \", story.future.text))            `\n\nBecause `story` has not been run yet, we must use `sb.concat` to create a prompt using a string from its future output.\n\nRun the graph[](#run-the-graph)\n\n--------------------------------\n\nWe've created a simple graph chaining `story` → `summary`. Run the graph by calling `substrate.run`.\n\nPython\n\nTypeScript\n\n`   response = substrate.run(summary);            `\n\nSubstrate automatically finds the upstream dependencies for nodes.\n\n*   You must pass all terminal nodes to `substrate.run`.\n*   Passing upstream nodes is optional.\n*   You may pass disconnected nodes (or multiple graphs) to run them in parallel.\n\nGet the output[](#get-the-output)\n\n----------------------------------\n\nAfter running the graph, use `response.get` to retrieve the output of any of the nodes in the graph.\n\nPython\n\nTypeScript\n\n`   summary_out = response.get(summary)    print(summary_out.text)            `\n\nIf you want to combine the outputs of multiple nodes into a single response, you can use a [`Box`](/reference/box)\n:\n\nPython\n\nTypeScript\n\n`   # ...        box = Box(    value={    \"story\": story.future.text,    \"summary\": summary.future.text,    }    )    res = substrate.run(box)            `\n\nYou can also [stream](/reference/streaming)\n outputs.\n\n[Introduction](/ \"Introduction\")\n[Connect nodes](/overview/connecting \"Connect nodes\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "metadata": {
      "ogUrl": "https://docs.substrate.run",
      "title": "Setup | Substrate",
      "robots": "index,follow",
      "ogImage": "/og-image-v3.png",
      "ogTitle": "Setup | Substrate",
      "sourceURL": "https://docs.substrate.run/overview/setup",
      "description": "Substrate",
      "ogDescription": "The platform for compound AI. Powerful SDKs, with batteries included: optimized AI models, vector storage, code interpreter, and agentic control flow. Stop using LangChain.",
      "pageStatusCode": 200,
      "ogLocaleAlternate": []
    },
    "linksOnPage": [
      "https://substrate.run",
      "https://docs.substrate.run/",
      "https://substrate.run/nodes",
      "https://substrate.run/pricing",
      "https://substrate.run/company",
      "https://blog.substrate.run",
      "https://docs.substrate.run/overview/setup",
      "https://docs.substrate.run/overview/connecting",
      "https://docs.substrate.run/overview/storing",
      "https://docs.substrate.run/why",
      "https://docs.substrate.run/changelog",
      "https://docs.substrate.run/guides/extract-and-summarize",
      "https://docs.substrate.run/guides/reimagine-a-room",
      "https://docs.substrate.run/guides/transcription",
      "https://docs.substrate.run/guides/vector-stores",
      "https://docs.substrate.run/guides/remove-background",
      "https://docs.substrate.run/guides/masked-image-generation",
      "https://docs.substrate.run/guides/mixture-of-agents",
      "https://docs.substrate.run/reference/api",
      "https://docs.substrate.run/reference/quick",
      "https://docs.substrate.run/reference/box",
      "https://docs.substrate.run/reference/if",
      "https://docs.substrate.run/reference/run-python",
      "https://docs.substrate.run/reference/streaming",
      "https://docs.substrate.run/reference/external-files",
      "https://docs.substrate.run/reference/external-files/s3",
      "https://docs.substrate.run/reference/versioning",
      "https://docs.substrate.run/reference/legal/terms-of-service",
      "https://docs.substrate.run/reference/legal/privacy-policy",
      "https://docs.substrate.run/reference/legal/usage-policy",
      "https://iiv4fwwtbkr.typeform.com/to/JdPN6m5W",
      "https://github.com/substratelabs/substrate-python",
      "https://github.com/substratelabs/substrate-typescript",
      "https://docs.substrate.run/dashboard/keys",
      "https://substrate.run/nodes#ComputeText",
      "https://x.com/substratelabs",
      "https://www.linkedin.com/company/substratelabs",
      "https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA"
    ]
  },
  {
    "content": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nOn This Page\n\n*   [See also](#see-also)\n    \n*   [Joining strings](#joining-strings)\n    \n*   [Future dictionary values](#future-dictionary-values)\n    \n*   [Future array items](#future-array-items)\n    \n*   [Parsing strings](#parsing-strings)\n    \n\nOverview\n\nConnect nodes\n\n֍\n\nLearn how to connect nodes using futures\n\nSubstrate requires connecting nodes before running them. When we connect two nodes, we use a **future** reference from the first node as an input to the second node.\n\nOperators from the `sb` submodule are used to transform future values. Common transforms are included, and most other transforms can be expressed using [jq (opens in a new tab)](https://jqlang.github.io/jq/)\n, a powerful language for manipulating JSON data.\n\n### See also[](#see-also)\n\n*   Use [`Box`](/reference/box)\n     to combine outputs into a single node\n*   Use [`If`](/reference/if)\n     to return one of two options based on a condition\n*   Use [`RunPython`](/reference/run-python)\n     to transform outputs with custom code\n\n### Joining strings[](#joining-strings)\n\nUse `sb.concat` to join future and static strings.\n\nPython\n\nTypeScript\n\n`   story = ComputeText(prompt=\"tell me a short story\")    summary = ComputeText(prompt=sb.concat(\"summarize: \", story.future.text))           `\n\nTo join strings using a template, use `sb.interpolate` in TypeScript.\n\nTypeScript\n\n``   const story = new ComputeText({ prompt: \"tell me a short story\" });    const summary = new ComputeText({    prompt: sb.interpolate`summarize: ${story.future.text}`,    });            ``\n\n### Future dictionary values[](#future-dictionary-values)\n\n*   In Python, simply use brackets as usual.\n*   In TypeScript, use `.get()` to reference untyped future object values.\n\nPython\n\nTypeScript\n\n`   author = ComputeJSON(    prompt=\"Who wrote Don Quixote?\",    json_schema={    \"type\": \"object\",    \"properties\": {    \"author\": {    \"type\": \"string\",    \"description\": \"The name of the author.\",    },    },    },    )    summary = ComputeText(    prompt=sb.concat(    \"Write a haiku describing \",    author.future.json_object[\"author\"]),    ),    )            `\n\n### Future array items[](#future-array-items)\n\n*   In Python, simply use brackets as usual.\n*   In TypeScript, use `.at()` to index future arrays.\n\nPython\n\nTypeScript\n\n`   story = MultiComputeText(prompt=\"tell me a short story\", num_choices=2)    summary = ComputeText(    prompt=sb.concat(\"summarize: \", story.future.choices[0].text),    )            `\n\n### Parsing strings[](#parsing-strings)\n\nUse `sb.jq` to parse strings before passing them to other nodes.\n\nPython\n\nTypeScript\n\n`   name = ComputeText(    prompt=\"Give me a unique startup name inside <name></name> tags. Example: <name>Hyphae</name><description>A startup that ... </description>\",    )    haiku = ComputeText(    prompt=sb.concat(    \"Write a haiku describing a startup named: \",    sb.jq(    name.future.text,    'ascii_downcase | split(\"<name>\") | .[1] | split(\"</name>\") | .[0]',    ),    ),    )            `\n\nLearn more\n\nThe `jq` pipeline above is an example of what's possible using the [`jq` language (opens in a new tab)](https://jqlang.github.io/jq/manual/#basic-filters)\n.\n\n*   `jq` takes any JSON value as input and produces a JSON value as output. JSON values include dictionaries, arrays, strings, numbers, and booleans.\n*   The `.` dot syntax can be used to filter by a data path: `.[0].text`\n*   The `|` pipe operator is used to chain together `jq` expressions.\n\nIn this `jq` example, we're [downcasing (opens in a new tab)](https://jqlang.github.io/jq/manual/#ascii_downcase-ascii_upcase)\n the string, [splitting (opens in a new tab)](https://jqlang.github.io/jq/manual/#split-2)\n by the opening `<name>` tag, [indexing (opens in a new tab)](https://jqlang.github.io/jq/manual/#array-index)\n the second item in the resulting array, splitting by the closing `</name>` tag, and finally returning the first value in the resulting array:\n\n*   `ascii_downcase | split(\"<name>\") | .[1] | split(\"</name>\") | .[0]`\n\nAlternatively, you can use `jq`'s [capture (opens in a new tab)](https://jqlang.github.io/jq/manual/#capture)\n function with a regular expression:\n\n*   `capture(\"<name>(?<content>.*?)</name>\") | .content`\n\n[Get started](/overview/setup \"Get started\")\n[Store outputs](/overview/storing \"Store outputs\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "markdown": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nOn This Page\n\n*   [See also](#see-also)\n    \n*   [Joining strings](#joining-strings)\n    \n*   [Future dictionary values](#future-dictionary-values)\n    \n*   [Future array items](#future-array-items)\n    \n*   [Parsing strings](#parsing-strings)\n    \n\nOverview\n\nConnect nodes\n\n֍\n\nLearn how to connect nodes using futures\n\nSubstrate requires connecting nodes before running them. When we connect two nodes, we use a **future** reference from the first node as an input to the second node.\n\nOperators from the `sb` submodule are used to transform future values. Common transforms are included, and most other transforms can be expressed using [jq (opens in a new tab)](https://jqlang.github.io/jq/)\n, a powerful language for manipulating JSON data.\n\n### See also[](#see-also)\n\n*   Use [`Box`](/reference/box)\n     to combine outputs into a single node\n*   Use [`If`](/reference/if)\n     to return one of two options based on a condition\n*   Use [`RunPython`](/reference/run-python)\n     to transform outputs with custom code\n\n### Joining strings[](#joining-strings)\n\nUse `sb.concat` to join future and static strings.\n\nPython\n\nTypeScript\n\n`   story = ComputeText(prompt=\"tell me a short story\")    summary = ComputeText(prompt=sb.concat(\"summarize: \", story.future.text))           `\n\nTo join strings using a template, use `sb.interpolate` in TypeScript.\n\nTypeScript\n\n``   const story = new ComputeText({ prompt: \"tell me a short story\" });    const summary = new ComputeText({    prompt: sb.interpolate`summarize: ${story.future.text}`,    });            ``\n\n### Future dictionary values[](#future-dictionary-values)\n\n*   In Python, simply use brackets as usual.\n*   In TypeScript, use `.get()` to reference untyped future object values.\n\nPython\n\nTypeScript\n\n`   author = ComputeJSON(    prompt=\"Who wrote Don Quixote?\",    json_schema={    \"type\": \"object\",    \"properties\": {    \"author\": {    \"type\": \"string\",    \"description\": \"The name of the author.\",    },    },    },    )    summary = ComputeText(    prompt=sb.concat(    \"Write a haiku describing \",    author.future.json_object[\"author\"]),    ),    )            `\n\n### Future array items[](#future-array-items)\n\n*   In Python, simply use brackets as usual.\n*   In TypeScript, use `.at()` to index future arrays.\n\nPython\n\nTypeScript\n\n`   story = MultiComputeText(prompt=\"tell me a short story\", num_choices=2)    summary = ComputeText(    prompt=sb.concat(\"summarize: \", story.future.choices[0].text),    )            `\n\n### Parsing strings[](#parsing-strings)\n\nUse `sb.jq` to parse strings before passing them to other nodes.\n\nPython\n\nTypeScript\n\n`   name = ComputeText(    prompt=\"Give me a unique startup name inside <name></name> tags. Example: <name>Hyphae</name><description>A startup that ... </description>\",    )    haiku = ComputeText(    prompt=sb.concat(    \"Write a haiku describing a startup named: \",    sb.jq(    name.future.text,    'ascii_downcase | split(\"<name>\") | .[1] | split(\"</name>\") | .[0]',    ),    ),    )            `\n\nLearn more\n\nThe `jq` pipeline above is an example of what's possible using the [`jq` language (opens in a new tab)](https://jqlang.github.io/jq/manual/#basic-filters)\n.\n\n*   `jq` takes any JSON value as input and produces a JSON value as output. JSON values include dictionaries, arrays, strings, numbers, and booleans.\n*   The `.` dot syntax can be used to filter by a data path: `.[0].text`\n*   The `|` pipe operator is used to chain together `jq` expressions.\n\nIn this `jq` example, we're [downcasing (opens in a new tab)](https://jqlang.github.io/jq/manual/#ascii_downcase-ascii_upcase)\n the string, [splitting (opens in a new tab)](https://jqlang.github.io/jq/manual/#split-2)\n by the opening `<name>` tag, [indexing (opens in a new tab)](https://jqlang.github.io/jq/manual/#array-index)\n the second item in the resulting array, splitting by the closing `</name>` tag, and finally returning the first value in the resulting array:\n\n*   `ascii_downcase | split(\"<name>\") | .[1] | split(\"</name>\") | .[0]`\n\nAlternatively, you can use `jq`'s [capture (opens in a new tab)](https://jqlang.github.io/jq/manual/#capture)\n function with a regular expression:\n\n*   `capture(\"<name>(?<content>.*?)</name>\") | .content`\n\n[Get started](/overview/setup \"Get started\")\n[Store outputs](/overview/storing \"Store outputs\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "metadata": {
      "ogUrl": "https://docs.substrate.run",
      "title": "Connecting | Substrate",
      "robots": "index,follow",
      "ogImage": "/og-image-v3.png",
      "ogTitle": "Connecting | Substrate",
      "sourceURL": "https://docs.substrate.run/overview/connecting",
      "description": "Substrate",
      "ogDescription": "The platform for compound AI. Powerful SDKs, with batteries included: optimized AI models, vector storage, code interpreter, and agentic control flow. Stop using LangChain.",
      "pageStatusCode": 200,
      "ogLocaleAlternate": []
    },
    "linksOnPage": [
      "https://substrate.run",
      "https://docs.substrate.run/",
      "https://substrate.run/nodes",
      "https://substrate.run/pricing",
      "https://substrate.run/company",
      "https://blog.substrate.run",
      "https://docs.substrate.run/overview/setup",
      "https://docs.substrate.run/overview/connecting",
      "https://docs.substrate.run/overview/storing",
      "https://docs.substrate.run/why",
      "https://docs.substrate.run/changelog",
      "https://docs.substrate.run/guides/extract-and-summarize",
      "https://docs.substrate.run/guides/reimagine-a-room",
      "https://docs.substrate.run/guides/transcription",
      "https://docs.substrate.run/guides/vector-stores",
      "https://docs.substrate.run/guides/remove-background",
      "https://docs.substrate.run/guides/masked-image-generation",
      "https://docs.substrate.run/guides/mixture-of-agents",
      "https://docs.substrate.run/reference/api",
      "https://docs.substrate.run/reference/quick",
      "https://docs.substrate.run/reference/box",
      "https://docs.substrate.run/reference/if",
      "https://docs.substrate.run/reference/run-python",
      "https://docs.substrate.run/reference/streaming",
      "https://docs.substrate.run/reference/external-files",
      "https://docs.substrate.run/reference/external-files/s3",
      "https://docs.substrate.run/reference/versioning",
      "https://docs.substrate.run/reference/legal/terms-of-service",
      "https://docs.substrate.run/reference/legal/privacy-policy",
      "https://docs.substrate.run/reference/legal/usage-policy",
      "https://jqlang.github.io/jq/",
      "https://jqlang.github.io/jq/manual/#basic-filters",
      "https://jqlang.github.io/jq/manual/#ascii_downcase-ascii_upcase",
      "https://jqlang.github.io/jq/manual/#split-2",
      "https://jqlang.github.io/jq/manual/#array-index",
      "https://jqlang.github.io/jq/manual/#capture",
      "https://x.com/substratelabs",
      "https://www.linkedin.com/company/substratelabs",
      "https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA"
    ]
  },
  {
    "content": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nOverview\n\nStore outputs\n\n֍\n\nOpt-in to storing outputs on Substrate\n\nSubstrate is stateless by default. When using nodes that output media like\n\nGenerateImage\n\nGenerate an image.\n\nExample\n\n[API Reference](https://substrate.run/nodes#GenerateImage)\n\nGenerateImage( prompt=\"hokusai futuristic supercell spiral cloud with glowing core over turbulent ocean\", store=\"hosted\", )\n\nOutput\n\n{ \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\" }\n\n, you can opt-in to hosting their output using the `store` parameter.\n\n`   # Returns image data    GenerateImage(prompt=\"your prompt\")        # Returns an image URL    GenerateImage(    prompt=\"your prompt\",    store=\"hosted\",    )            `\n\nLearn more\n\n*   Use `store: \"hosted\"` to host the image on Substrate.\n*   Use `store: \"s3://...\"` to host on your own storage. See [External files](/reference/external-files)\n     to learn more.\n\nWithout the `store` parameter:\n\n*   Nodes with image output return base 64-encoded JPEG data\n\n`   \"image_uri\": \"data:image/jpeg;base64,/9j/4kZJRBAQYABAAD/4QYRXhpZgAA0AKAA1IBEAAAPEAAAAASg...\"            `\n\n*   Nodes with audio output return base 64-encoded WAV data\n\n`   \"audio_uri\": \"data:audio/wav;base64,/9j/4QSkZJRgABAQEAYAAAD/BYRXhpZgAATU0A1ABIBAAAFAAAASg...\"            `\n\nSubstrate also comes with fast built-in [vector storage](/guides/vector-stores)\n, which you can use to minimize data roundtrips to other providers.\n\n[Connect nodes](/overview/connecting \"Connect nodes\")\n[Why Substrate?](/why \"Why Substrate?\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "markdown": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nOverview\n\nStore outputs\n\n֍\n\nOpt-in to storing outputs on Substrate\n\nSubstrate is stateless by default. When using nodes that output media like\n\nGenerateImage\n\nGenerate an image.\n\nExample\n\n[API Reference](https://substrate.run/nodes#GenerateImage)\n\nGenerateImage( prompt=\"hokusai futuristic supercell spiral cloud with glowing core over turbulent ocean\", store=\"hosted\", )\n\nOutput\n\n{ \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\" }\n\n, you can opt-in to hosting their output using the `store` parameter.\n\n`   # Returns image data    GenerateImage(prompt=\"your prompt\")        # Returns an image URL    GenerateImage(    prompt=\"your prompt\",    store=\"hosted\",    )            `\n\nLearn more\n\n*   Use `store: \"hosted\"` to host the image on Substrate.\n*   Use `store: \"s3://...\"` to host on your own storage. See [External files](/reference/external-files)\n     to learn more.\n\nWithout the `store` parameter:\n\n*   Nodes with image output return base 64-encoded JPEG data\n\n`   \"image_uri\": \"data:image/jpeg;base64,/9j/4kZJRBAQYABAAD/4QYRXhpZgAA0AKAA1IBEAAAPEAAAAASg...\"            `\n\n*   Nodes with audio output return base 64-encoded WAV data\n\n`   \"audio_uri\": \"data:audio/wav;base64,/9j/4QSkZJRgABAQEAYAAAD/BYRXhpZgAATU0A1ABIBAAAFAAAASg...\"            `\n\nSubstrate also comes with fast built-in [vector storage](/guides/vector-stores)\n, which you can use to minimize data roundtrips to other providers.\n\n[Connect nodes](/overview/connecting \"Connect nodes\")\n[Why Substrate?](/why \"Why Substrate?\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "metadata": {
      "ogUrl": "https://docs.substrate.run",
      "title": "Storing | Substrate",
      "robots": "index,follow",
      "ogImage": "/og-image-v3.png",
      "ogTitle": "Storing | Substrate",
      "sourceURL": "https://docs.substrate.run/overview/storing",
      "description": "Substrate",
      "ogDescription": "The platform for compound AI. Powerful SDKs, with batteries included: optimized AI models, vector storage, code interpreter, and agentic control flow. Stop using LangChain.",
      "pageStatusCode": 200,
      "ogLocaleAlternate": []
    },
    "linksOnPage": [
      "https://substrate.run",
      "https://docs.substrate.run/",
      "https://substrate.run/nodes",
      "https://substrate.run/pricing",
      "https://substrate.run/company",
      "https://blog.substrate.run",
      "https://docs.substrate.run/overview/setup",
      "https://docs.substrate.run/overview/connecting",
      "https://docs.substrate.run/overview/storing",
      "https://docs.substrate.run/why",
      "https://docs.substrate.run/changelog",
      "https://docs.substrate.run/guides/extract-and-summarize",
      "https://docs.substrate.run/guides/reimagine-a-room",
      "https://docs.substrate.run/guides/transcription",
      "https://docs.substrate.run/guides/vector-stores",
      "https://docs.substrate.run/guides/remove-background",
      "https://docs.substrate.run/guides/masked-image-generation",
      "https://docs.substrate.run/guides/mixture-of-agents",
      "https://docs.substrate.run/reference/api",
      "https://docs.substrate.run/reference/quick",
      "https://docs.substrate.run/reference/box",
      "https://docs.substrate.run/reference/if",
      "https://docs.substrate.run/reference/run-python",
      "https://docs.substrate.run/reference/streaming",
      "https://docs.substrate.run/reference/external-files",
      "https://docs.substrate.run/reference/external-files/s3",
      "https://docs.substrate.run/reference/versioning",
      "https://docs.substrate.run/reference/legal/terms-of-service",
      "https://docs.substrate.run/reference/legal/privacy-policy",
      "https://docs.substrate.run/reference/legal/usage-policy",
      "https://substrate.run/nodes#GenerateImage",
      "https://x.com/substratelabs",
      "https://www.linkedin.com/company/substratelabs",
      "https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA"
    ]
  },
  {
    "content": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nOn This Page\n\n*   [Compound AI](#compound-ai)\n    \n*   [Faster execution](#faster-execution)\n    \n*   [Better code](#better-code)\n    \n\nWhy Substrate?\n\n### Compound AI[](#compound-ai)\n\nCombining multiple model outputs is an effective approach for improving the results of AI applications. A popular example of this is RAG, in which search is used to augment the context of a language model. It often looks something like this:\n\n`semantic search`\n\nQueryVectorStore\n\n`use tool`\n\nRunPython\n\n`clean data`\n\nComputeJSON\n\n`generate response`\n\nComputeText\n\nPress enter or space to select a node.You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.\n\nPress enter or space to select an edge. You can then press delete to remove it or escape to cancel.\n\nTools like [LangChain (opens in a new tab)](https://www.langchain.com/)\n are directionally right because they encourage pipelining. But they offer clunky abstractions, and produce fundamentally inefficient programs.\n\n### Faster execution[](#faster-execution)\n\nWhether you use LangChain, or wire together multiple inference API requests yourself, what's happening under the hood looks something like this:\n\n![](https://docs.substrate.run/_next/image?url=%2Fwithout-substrate.png&w=1920&q=75)\n\nWith Substrate, it becomes this:\n\n![](https://docs.substrate.run/_next/image?url=%2Fwith-substrate.png&w=1920&q=75)\n\n### Better code[](#better-code)\n\nWith Substrate, the code to describe your system also becomes dramatically more legible.\n\nBelow is a code example from [Together AI (opens in a new tab)](https://docs.together.ai/docs/mixture-of-agents#advanced-moa-example)\n, next to the same example using Substrate. The example implements the \"Mixture of Agents\" technique, in which multiple LLM responses are combined repeatedly to produce better outputs.\n\nThe code on the left includes custom business logic to handle rate limits and parallellize LLM calls in batches. The code is verbose, hard to follow, and the parallelism could be improved.\n\nWith Substrate, you don't need to think about parallelizing your code or handling rate limits. Parallelization happens automatically when Substrate runs your workload. Instead of rate limits, Substrate uses a concurrency limit – the number of nodes that you can run in parallel. This is much easier to work with than rate limits – Substrate automatically manages scheduling nodes according to your concurrency limit.\n\nWithout SubstrateWith Substrate\n\n`   reference_models = [    \"Qwen/Qwen2-72B-Instruct\",    \"Qwen/Qwen1.5-72B-Chat\",    \"mistralai/Mixtral-8x22B-Instruct-v0.1\",    \"databricks/dbrx-instruct\",    ]    aggregator_model = \"mistralai/Mixtral-8x22B-Instruct-v0.1\"    layers = 3        async def run_llm(model, prev_response=None):    for sleep_time in [1, 2, 4]:    try:    messages = (    [    {    \"role\": \"system\",    \"content\": getFinalSystemPrompt(    aggreagator_system_prompt, prev_response    ),    },    {\"role\": \"user\", \"content\": user_prompt},    ]    if prev_response    else [{\"role\": \"user\", \"content\": user_prompt}]    )    response = await async_client.chat.completions.create(    model=model,    messages=messages,    temperature=0.7,    max_tokens=512,    )    print(\"Model: \", model)    break    except together.error.RateLimitError as e:    print(e)    await asyncio.sleep(sleep_time)    return response.choices[0].message.content        async def main():    results = await asyncio.gather(*[run_llm(model) for model in reference_models])    for _ in range(1, layers - 1):    results = await asyncio.gather(    *[run_llm(model, prev_response=results) for model in reference_models]    )        finalStream = client.chat.completions.create(    model=aggregator_model,    messages=[    {    \"role\": \"system\",    \"content\": getFinalSystemPrompt(aggreagator_system_prompt, results),    },    {\"role\": \"user\", \"content\": user_prompt},    ],    stream=True,    )    for chunk in finalStream:    print(chunk.choices[0].delta.content or \"\", end=\"\", flush=True)            `\n\n[Store outputs](/overview/storing \"Store outputs\")\n[Changelog](/changelog \"Changelog\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "markdown": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nOn This Page\n\n*   [Compound AI](#compound-ai)\n    \n*   [Faster execution](#faster-execution)\n    \n*   [Better code](#better-code)\n    \n\nWhy Substrate?\n\n### Compound AI[](#compound-ai)\n\nCombining multiple model outputs is an effective approach for improving the results of AI applications. A popular example of this is RAG, in which search is used to augment the context of a language model. It often looks something like this:\n\n`semantic search`\n\nQueryVectorStore\n\n`use tool`\n\nRunPython\n\n`clean data`\n\nComputeJSON\n\n`generate response`\n\nComputeText\n\nPress enter or space to select a node.You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.\n\nPress enter or space to select an edge. You can then press delete to remove it or escape to cancel.\n\nTools like [LangChain (opens in a new tab)](https://www.langchain.com/)\n are directionally right because they encourage pipelining. But they offer clunky abstractions, and produce fundamentally inefficient programs.\n\n### Faster execution[](#faster-execution)\n\nWhether you use LangChain, or wire together multiple inference API requests yourself, what's happening under the hood looks something like this:\n\n![](https://docs.substrate.run/_next/image?url=%2Fwithout-substrate.png&w=1920&q=75)\n\nWith Substrate, it becomes this:\n\n![](https://docs.substrate.run/_next/image?url=%2Fwith-substrate.png&w=1920&q=75)\n\n### Better code[](#better-code)\n\nWith Substrate, the code to describe your system also becomes dramatically more legible.\n\nBelow is a code example from [Together AI (opens in a new tab)](https://docs.together.ai/docs/mixture-of-agents#advanced-moa-example)\n, next to the same example using Substrate. The example implements the \"Mixture of Agents\" technique, in which multiple LLM responses are combined repeatedly to produce better outputs.\n\nThe code on the left includes custom business logic to handle rate limits and parallellize LLM calls in batches. The code is verbose, hard to follow, and the parallelism could be improved.\n\nWith Substrate, you don't need to think about parallelizing your code or handling rate limits. Parallelization happens automatically when Substrate runs your workload. Instead of rate limits, Substrate uses a concurrency limit – the number of nodes that you can run in parallel. This is much easier to work with than rate limits – Substrate automatically manages scheduling nodes according to your concurrency limit.\n\nWithout SubstrateWith Substrate\n\n`   reference_models = [    \"Qwen/Qwen2-72B-Instruct\",    \"Qwen/Qwen1.5-72B-Chat\",    \"mistralai/Mixtral-8x22B-Instruct-v0.1\",    \"databricks/dbrx-instruct\",    ]    aggregator_model = \"mistralai/Mixtral-8x22B-Instruct-v0.1\"    layers = 3        async def run_llm(model, prev_response=None):    for sleep_time in [1, 2, 4]:    try:    messages = (    [    {    \"role\": \"system\",    \"content\": getFinalSystemPrompt(    aggreagator_system_prompt, prev_response    ),    },    {\"role\": \"user\", \"content\": user_prompt},    ]    if prev_response    else [{\"role\": \"user\", \"content\": user_prompt}]    )    response = await async_client.chat.completions.create(    model=model,    messages=messages,    temperature=0.7,    max_tokens=512,    )    print(\"Model: \", model)    break    except together.error.RateLimitError as e:    print(e)    await asyncio.sleep(sleep_time)    return response.choices[0].message.content        async def main():    results = await asyncio.gather(*[run_llm(model) for model in reference_models])    for _ in range(1, layers - 1):    results = await asyncio.gather(    *[run_llm(model, prev_response=results) for model in reference_models]    )        finalStream = client.chat.completions.create(    model=aggregator_model,    messages=[    {    \"role\": \"system\",    \"content\": getFinalSystemPrompt(aggreagator_system_prompt, results),    },    {\"role\": \"user\", \"content\": user_prompt},    ],    stream=True,    )    for chunk in finalStream:    print(chunk.choices[0].delta.content or \"\", end=\"\", flush=True)            `\n\n[Store outputs](/overview/storing \"Store outputs\")\n[Changelog](/changelog \"Changelog\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "metadata": {
      "ogUrl": "https://docs.substrate.run",
      "title": "Why | Substrate",
      "robots": "index,follow",
      "ogImage": "/og-image-v3.png",
      "ogTitle": "Why | Substrate",
      "sourceURL": "https://docs.substrate.run/why",
      "description": "Substrate",
      "ogDescription": "The platform for compound AI. Powerful SDKs, with batteries included: optimized AI models, vector storage, code interpreter, and agentic control flow. Stop using LangChain.",
      "pageStatusCode": 200,
      "ogLocaleAlternate": []
    },
    "linksOnPage": [
      "https://substrate.run",
      "https://docs.substrate.run/",
      "https://substrate.run/nodes",
      "https://substrate.run/pricing",
      "https://substrate.run/company",
      "https://blog.substrate.run",
      "https://docs.substrate.run/overview/setup",
      "https://docs.substrate.run/overview/connecting",
      "https://docs.substrate.run/overview/storing",
      "https://docs.substrate.run/why",
      "https://docs.substrate.run/changelog",
      "https://docs.substrate.run/guides/extract-and-summarize",
      "https://docs.substrate.run/guides/reimagine-a-room",
      "https://docs.substrate.run/guides/transcription",
      "https://docs.substrate.run/guides/vector-stores",
      "https://docs.substrate.run/guides/remove-background",
      "https://docs.substrate.run/guides/masked-image-generation",
      "https://docs.substrate.run/guides/mixture-of-agents",
      "https://docs.substrate.run/reference/api",
      "https://docs.substrate.run/reference/quick",
      "https://docs.substrate.run/reference/box",
      "https://docs.substrate.run/reference/if",
      "https://docs.substrate.run/reference/run-python",
      "https://docs.substrate.run/reference/streaming",
      "https://docs.substrate.run/reference/external-files",
      "https://docs.substrate.run/reference/external-files/s3",
      "https://docs.substrate.run/reference/versioning",
      "https://docs.substrate.run/reference/legal/terms-of-service",
      "https://docs.substrate.run/reference/legal/privacy-policy",
      "https://docs.substrate.run/reference/legal/usage-policy",
      "https://www.langchain.com/",
      "https://docs.together.ai/docs/mixture-of-agents#advanced-moa-example",
      "https://x.com/substratelabs",
      "https://www.linkedin.com/company/substratelabs",
      "https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA"
    ]
  },
  {
    "content": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nOn This Page\n\n*   [July 18, 2024](#july-18-2024)\n    \n*   [June 20, 2024](#june-20-2024)\n    \n*   [June 12, 2024](#june-12-2024)\n    \n\nChangelog\n\n֍\n\nAll additions and updates to the Substrate API, in reverse-chronological order.\n\nYour [API and SDK version](/reference/versioning)\n controls the API behavior you see. Upgrade to the latest SDK version for new nodes and the latest functionality.\n\nJuly 18, 2024[](#july-18-2024)\n\n-------------------------------\n\n[PyPI 220240617.1.3 (opens in a new tab)](https://pypi.org/project/substrate/220240617.1.3/)\n | [npm 120240617.1.5 (opens in a new tab)](https://www.npmjs.com/package/substrate/v/120240617.1.5)\n\n*   Added a new node: [`SplitDocument` (opens in a new tab)](https://www.substrate.run/nodes#SplitDocument)\n    . This node parses and splits up text and code documents into related chunks of text. We've found this especially useful for processing large documents before embedding them.\n*   We've also introduced a handful of new options that can be specified on nodes:\n    *   `cache_age` caches the result of this node for the number of seconds specified. This can speed up subsequent runs of the graph.\n    *   `cache_keys` are a set of node input arguments to use when computing the cache key for `cache_age`\n    *   `max_retries` specifies the number of times a node should be retried on error. This is useful for handling transient errors.\n\nJune 20, 2024[](#june-20-2024)\n\n-------------------------------\n\n*   Added `If` and `Box`\n*   Renamed `GenerateText` -> `ComputeText`\n*   Renamed `MultiGenerateText` -> `MultiComputeText`\n*   Renamed `BatchGenerateText` -> `BatchComputeText`\n*   Renamed `GenerateJSON` -> `ComputeJSON`\n*   Renamed `MultiGenerateJSON` -> `MultiComputeJSON`\n*   Renamed `BatchGenerateJSON` -> `BatchComputeJSON`\n\nJune 12, 2024[](#june-12-2024)\n\n-------------------------------\n\n[PyPI 220240612.0.0 (opens in a new tab)](https://pypi.org/project/substrate/220240612.0.0/)\n | [npm 120240612.0.0 (opens in a new tab)](https://www.npmjs.com/package/substrate/v/120240612.0.0)\n\n*   The TypeScript SDK now supports [streaming (opens in a new tab)](https://docs.substrate.run/reference/streaming)\n    . Streaming support in the Python SDK is coming soon.\n*   [`RunPython` (opens in a new tab)](https://docs.substrate.run/reference/run-python)\n     is generally available in the Python SDK. Use it to run your own locally-defined functions in a remote sandbox. There is no equivalent in the TypeScript SDK, but it is on our roadmap.\n*   [`BatchGenerateJSON` (opens in a new tab)](https://substrate.run/nodes#BatchGenerateJSON)\n     has a new `model` parameter for switching between `Mistral7BInstruct` and `Llama3Instruct8B`.\n*   Removed `GenerateTextVision` – call [`GenerateText` (opens in a new tab)](https://substrate.run/nodes#GenerateText)\n     with the optional `image_uris` parameter instead.\n*   Added `system_prompt`, `frequency_penalty`, `repetition_penalty`, `presence_penalty`, and `top_p` to:\n    *   `Mistral7BInstruct`\n    *   `Mixtral8x7BInstruct`\n    *   `Llama3Instruct8B`\n    *   `Llama3Instruct70B`\n*   Renamed `CreateVectorStore` to `FindOrCreateVectorStore`\n*   Renamed `GenerativeEditImage` to `InpaintImage`\n*   Renamed `MultiGenerativeEditImage` to `MultiInpaintImage`\n*   Renamed `FillMask` to `EraseImage`\n*   Renamed `TranscribeMedia` to `TranscribeSpeech`\n*   Renamed the `node` parameter to `model` in:\n    *   `GenerateText`, `MultiGenerateText`, `BatchGenerateText`\n    *   `GenerateJSON`, `MultiGenerateJSON`, `BatchGenerateJSON`\n\n[Why Substrate?](/why \"Why Substrate?\")\n[Extract and summarize Hacker News comments](/guides/extract-and-summarize \"Extract and summarize Hacker News comments\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "markdown": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nOn This Page\n\n*   [July 18, 2024](#july-18-2024)\n    \n*   [June 20, 2024](#june-20-2024)\n    \n*   [June 12, 2024](#june-12-2024)\n    \n\nChangelog\n\n֍\n\nAll additions and updates to the Substrate API, in reverse-chronological order.\n\nYour [API and SDK version](/reference/versioning)\n controls the API behavior you see. Upgrade to the latest SDK version for new nodes and the latest functionality.\n\nJuly 18, 2024[](#july-18-2024)\n\n-------------------------------\n\n[PyPI 220240617.1.3 (opens in a new tab)](https://pypi.org/project/substrate/220240617.1.3/)\n | [npm 120240617.1.5 (opens in a new tab)](https://www.npmjs.com/package/substrate/v/120240617.1.5)\n\n*   Added a new node: [`SplitDocument` (opens in a new tab)](https://www.substrate.run/nodes#SplitDocument)\n    . This node parses and splits up text and code documents into related chunks of text. We've found this especially useful for processing large documents before embedding them.\n*   We've also introduced a handful of new options that can be specified on nodes:\n    *   `cache_age` caches the result of this node for the number of seconds specified. This can speed up subsequent runs of the graph.\n    *   `cache_keys` are a set of node input arguments to use when computing the cache key for `cache_age`\n    *   `max_retries` specifies the number of times a node should be retried on error. This is useful for handling transient errors.\n\nJune 20, 2024[](#june-20-2024)\n\n-------------------------------\n\n*   Added `If` and `Box`\n*   Renamed `GenerateText` -> `ComputeText`\n*   Renamed `MultiGenerateText` -> `MultiComputeText`\n*   Renamed `BatchGenerateText` -> `BatchComputeText`\n*   Renamed `GenerateJSON` -> `ComputeJSON`\n*   Renamed `MultiGenerateJSON` -> `MultiComputeJSON`\n*   Renamed `BatchGenerateJSON` -> `BatchComputeJSON`\n\nJune 12, 2024[](#june-12-2024)\n\n-------------------------------\n\n[PyPI 220240612.0.0 (opens in a new tab)](https://pypi.org/project/substrate/220240612.0.0/)\n | [npm 120240612.0.0 (opens in a new tab)](https://www.npmjs.com/package/substrate/v/120240612.0.0)\n\n*   The TypeScript SDK now supports [streaming (opens in a new tab)](https://docs.substrate.run/reference/streaming)\n    . Streaming support in the Python SDK is coming soon.\n*   [`RunPython` (opens in a new tab)](https://docs.substrate.run/reference/run-python)\n     is generally available in the Python SDK. Use it to run your own locally-defined functions in a remote sandbox. There is no equivalent in the TypeScript SDK, but it is on our roadmap.\n*   [`BatchGenerateJSON` (opens in a new tab)](https://substrate.run/nodes#BatchGenerateJSON)\n     has a new `model` parameter for switching between `Mistral7BInstruct` and `Llama3Instruct8B`.\n*   Removed `GenerateTextVision` – call [`GenerateText` (opens in a new tab)](https://substrate.run/nodes#GenerateText)\n     with the optional `image_uris` parameter instead.\n*   Added `system_prompt`, `frequency_penalty`, `repetition_penalty`, `presence_penalty`, and `top_p` to:\n    *   `Mistral7BInstruct`\n    *   `Mixtral8x7BInstruct`\n    *   `Llama3Instruct8B`\n    *   `Llama3Instruct70B`\n*   Renamed `CreateVectorStore` to `FindOrCreateVectorStore`\n*   Renamed `GenerativeEditImage` to `InpaintImage`\n*   Renamed `MultiGenerativeEditImage` to `MultiInpaintImage`\n*   Renamed `FillMask` to `EraseImage`\n*   Renamed `TranscribeMedia` to `TranscribeSpeech`\n*   Renamed the `node` parameter to `model` in:\n    *   `GenerateText`, `MultiGenerateText`, `BatchGenerateText`\n    *   `GenerateJSON`, `MultiGenerateJSON`, `BatchGenerateJSON`\n\n[Why Substrate?](/why \"Why Substrate?\")\n[Extract and summarize Hacker News comments](/guides/extract-and-summarize \"Extract and summarize Hacker News comments\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "metadata": {
      "ogUrl": "https://docs.substrate.run",
      "title": "Changelog | Substrate",
      "robots": "index,follow",
      "ogImage": "/og-image-v3.png",
      "ogTitle": "Changelog | Substrate",
      "sourceURL": "https://docs.substrate.run/changelog",
      "description": "Substrate",
      "ogDescription": "The platform for compound AI. Powerful SDKs, with batteries included: optimized AI models, vector storage, code interpreter, and agentic control flow. Stop using LangChain.",
      "pageStatusCode": 200,
      "ogLocaleAlternate": []
    },
    "linksOnPage": [
      "https://substrate.run",
      "https://docs.substrate.run/",
      "https://substrate.run/nodes",
      "https://substrate.run/pricing",
      "https://substrate.run/company",
      "https://blog.substrate.run",
      "https://docs.substrate.run/overview/setup",
      "https://docs.substrate.run/overview/connecting",
      "https://docs.substrate.run/overview/storing",
      "https://docs.substrate.run/why",
      "https://docs.substrate.run/changelog",
      "https://docs.substrate.run/guides/extract-and-summarize",
      "https://docs.substrate.run/guides/reimagine-a-room",
      "https://docs.substrate.run/guides/transcription",
      "https://docs.substrate.run/guides/vector-stores",
      "https://docs.substrate.run/guides/remove-background",
      "https://docs.substrate.run/guides/masked-image-generation",
      "https://docs.substrate.run/guides/mixture-of-agents",
      "https://docs.substrate.run/reference/api",
      "https://docs.substrate.run/reference/quick",
      "https://docs.substrate.run/reference/box",
      "https://docs.substrate.run/reference/if",
      "https://docs.substrate.run/reference/run-python",
      "https://docs.substrate.run/reference/streaming",
      "https://docs.substrate.run/reference/external-files",
      "https://docs.substrate.run/reference/external-files/s3",
      "https://docs.substrate.run/reference/versioning",
      "https://docs.substrate.run/reference/legal/terms-of-service",
      "https://docs.substrate.run/reference/legal/privacy-policy",
      "https://docs.substrate.run/reference/legal/usage-policy",
      "https://pypi.org/project/substrate/220240617.1.3/",
      "https://www.npmjs.com/package/substrate/v/120240617.1.5",
      "https://www.substrate.run/nodes#SplitDocument",
      "https://pypi.org/project/substrate/220240612.0.0/",
      "https://www.npmjs.com/package/substrate/v/120240612.0.0",
      "https://substrate.run/nodes#BatchGenerateJSON",
      "https://substrate.run/nodes#GenerateText",
      "https://x.com/substratelabs",
      "https://www.linkedin.com/company/substratelabs",
      "https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA"
    ]
  },
  {
    "content": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nGuides\n\nExtract and summarize Hacker News comments\n\n֍\n\nLearn how to extract information (including sentiment analysis) and generate a summary (RAG)\n\nIn this guide, we'll show you how to search Hacker News comments for a topic, extract sentiment, and generate a research summary using Substrate.\n\nThis concise RAG implementation runs dozens of LLM calls in parallel and streams the markdown result. It's easy to remix the runnable TypeScript code below, [hosted on val.town (opens in a new tab)](https://www.val.town/v/substrate/hackerNewsRAG)\n.\n\n  \n\nFirst, we search HackerNews comments using the [Algolia HN Search API (opens in a new tab)](https://hn.algolia.com/api)\n.\n\nTypeScript\n\n``   const searchResults = await hnSearch({    query: query,    numericFilters: `created_at_i>${Math.floor(Date.now() / 1000) - 60 * 60 * 24 * 7 * 4}`,    tags: \"comment\",    });            ``\n\nNext, we use ComputeJSON to extract summary, sentiment, and other metadata from each comment. In TypeScript, we use [zod (opens in a new tab)](https://zod.dev/)\n and [zod-to-json-schema (opens in a new tab)](https://www.npmjs.com/package/zod-to-json-schema)\n to create the JSON schema. In Python, we use [Pydantic (opens in a new tab)](https://docs.pydantic.dev/latest/)\n.\n\nTypeScript\n\nPython\n\n``   const commentInfo = z.object({    summary: z    .string()    .describe(    \"Summarize in a couple sentences: who is commenting, what the comment is about, how it is related to the topic.\",    ),    storyTitle: z.string().describe(\"The story title.\"),    forHiring: z    .boolean()    .describe(    \"True if the story is a Ask HN post with Who is hiring, Who wants to be hired, or Seeking freelancer in the title\",    ),    sentiment: z    .enum([\"positive\", \"neutral\", \"negative\"])    .describe(\"Sentiment of the post.\"),    objectID: z.string().describe(\"objectID field\"),    });        let summaries = [];    for (const hit of searchResults.hits) {    summaries.push(    new ComputeJSON({    prompt: `Summarize this comment and how it relates to the topic: ${query}    Use \"negative\" sentiment for posts about API, abstraction, documentation, tutorial, general quality, slowness, or performance issues.    COMMENT: ${JSON.stringify(hit)}`,    json_schema: zodToJsonSchema(commentInfo),    }),    );    }            ``\n\nFinally, we use ComputeText to generate a markdown summary of all the extracted JSON, and stream the results of the `markdown` node.\n\nTypeScript\n\nPython\n\n``   const markdown = new ComputeText({    prompt: sb.concat(    `Below is a list of summarized comments about ${query} on Hacker News.    Generate concise markdown summarizing the results.    Summarize the contents of the comment and the sentiment about ${query}.    Categorize results under sentiment headers.    Order from most negative to least negative within each category.    Add a link to the original story URL in this format: [<story title>](https://news.ycombinator.com/item?id=<objectID>)    Filter out posts that do not seem to be about ${query}.    RESULTS:\\n`,    ...summaries.map((s) => sb.jq(s.future.json_object, \"@json\")),    ),    model: \"Llama3Instruct70B\",    });    const stream = await substrate.stream(markdown);            ``\n\nThe code we wrote was really simple. Implicitly, we were creating the graph below. But we didn't have to think about the graph at all! With Substrate, by simply relating tasks to each other, we get automatic parallelization of dozens of LLM calls for free, and 0 roundtrips.\n\n`comment`\n\nComputeJSON\n\n`comment`\n\nComputeJSON\n\n`comment`\n\nComputeJSON\n\nComputeText\n\n`markdown`\n\nPress enter or space to select a node.You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.\n\nPress enter or space to select an edge. You can then press delete to remove it or escape to cancel.\n\n[Changelog](/changelog \"Changelog\")\n[Reimagine a room](/guides/reimagine-a-room \"Reimagine a room\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "markdown": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nGuides\n\nExtract and summarize Hacker News comments\n\n֍\n\nLearn how to extract information (including sentiment analysis) and generate a summary (RAG)\n\nIn this guide, we'll show you how to search Hacker News comments for a topic, extract sentiment, and generate a research summary using Substrate.\n\nThis concise RAG implementation runs dozens of LLM calls in parallel and streams the markdown result. It's easy to remix the runnable TypeScript code below, [hosted on val.town (opens in a new tab)](https://www.val.town/v/substrate/hackerNewsRAG)\n.\n\n  \n\nFirst, we search HackerNews comments using the [Algolia HN Search API (opens in a new tab)](https://hn.algolia.com/api)\n.\n\nTypeScript\n\n``   const searchResults = await hnSearch({    query: query,    numericFilters: `created_at_i>${Math.floor(Date.now() / 1000) - 60 * 60 * 24 * 7 * 4}`,    tags: \"comment\",    });            ``\n\nNext, we use ComputeJSON to extract summary, sentiment, and other metadata from each comment. In TypeScript, we use [zod (opens in a new tab)](https://zod.dev/)\n and [zod-to-json-schema (opens in a new tab)](https://www.npmjs.com/package/zod-to-json-schema)\n to create the JSON schema. In Python, we use [Pydantic (opens in a new tab)](https://docs.pydantic.dev/latest/)\n.\n\nTypeScript\n\nPython\n\n``   const commentInfo = z.object({    summary: z    .string()    .describe(    \"Summarize in a couple sentences: who is commenting, what the comment is about, how it is related to the topic.\",    ),    storyTitle: z.string().describe(\"The story title.\"),    forHiring: z    .boolean()    .describe(    \"True if the story is a Ask HN post with Who is hiring, Who wants to be hired, or Seeking freelancer in the title\",    ),    sentiment: z    .enum([\"positive\", \"neutral\", \"negative\"])    .describe(\"Sentiment of the post.\"),    objectID: z.string().describe(\"objectID field\"),    });        let summaries = [];    for (const hit of searchResults.hits) {    summaries.push(    new ComputeJSON({    prompt: `Summarize this comment and how it relates to the topic: ${query}    Use \"negative\" sentiment for posts about API, abstraction, documentation, tutorial, general quality, slowness, or performance issues.    COMMENT: ${JSON.stringify(hit)}`,    json_schema: zodToJsonSchema(commentInfo),    }),    );    }            ``\n\nFinally, we use ComputeText to generate a markdown summary of all the extracted JSON, and stream the results of the `markdown` node.\n\nTypeScript\n\nPython\n\n``   const markdown = new ComputeText({    prompt: sb.concat(    `Below is a list of summarized comments about ${query} on Hacker News.    Generate concise markdown summarizing the results.    Summarize the contents of the comment and the sentiment about ${query}.    Categorize results under sentiment headers.    Order from most negative to least negative within each category.    Add a link to the original story URL in this format: [<story title>](https://news.ycombinator.com/item?id=<objectID>)    Filter out posts that do not seem to be about ${query}.    RESULTS:\\n`,    ...summaries.map((s) => sb.jq(s.future.json_object, \"@json\")),    ),    model: \"Llama3Instruct70B\",    });    const stream = await substrate.stream(markdown);            ``\n\nThe code we wrote was really simple. Implicitly, we were creating the graph below. But we didn't have to think about the graph at all! With Substrate, by simply relating tasks to each other, we get automatic parallelization of dozens of LLM calls for free, and 0 roundtrips.\n\n`comment`\n\nComputeJSON\n\n`comment`\n\nComputeJSON\n\n`comment`\n\nComputeJSON\n\nComputeText\n\n`markdown`\n\nPress enter or space to select a node.You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.\n\nPress enter or space to select an edge. You can then press delete to remove it or escape to cancel.\n\n[Changelog](/changelog \"Changelog\")\n[Reimagine a room](/guides/reimagine-a-room \"Reimagine a room\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "metadata": {
      "ogUrl": "https://docs.substrate.run",
      "title": "Extract and Summarize | Substrate",
      "robots": "index,follow",
      "ogImage": "/og-image-v3.png",
      "ogTitle": "Extract and Summarize | Substrate",
      "sourceURL": "https://docs.substrate.run/guides/extract-and-summarize",
      "description": "Substrate",
      "ogDescription": "The platform for compound AI. Powerful SDKs, with batteries included: optimized AI models, vector storage, code interpreter, and agentic control flow. Stop using LangChain.",
      "pageStatusCode": 200,
      "ogLocaleAlternate": []
    },
    "linksOnPage": [
      "https://substrate.run",
      "https://docs.substrate.run/",
      "https://substrate.run/nodes",
      "https://substrate.run/pricing",
      "https://substrate.run/company",
      "https://blog.substrate.run",
      "https://docs.substrate.run/overview/setup",
      "https://docs.substrate.run/overview/connecting",
      "https://docs.substrate.run/overview/storing",
      "https://docs.substrate.run/why",
      "https://docs.substrate.run/changelog",
      "https://docs.substrate.run/guides/extract-and-summarize",
      "https://docs.substrate.run/guides/reimagine-a-room",
      "https://docs.substrate.run/guides/transcription",
      "https://docs.substrate.run/guides/vector-stores",
      "https://docs.substrate.run/guides/remove-background",
      "https://docs.substrate.run/guides/masked-image-generation",
      "https://docs.substrate.run/guides/mixture-of-agents",
      "https://docs.substrate.run/reference/api",
      "https://docs.substrate.run/reference/quick",
      "https://docs.substrate.run/reference/box",
      "https://docs.substrate.run/reference/if",
      "https://docs.substrate.run/reference/run-python",
      "https://docs.substrate.run/reference/streaming",
      "https://docs.substrate.run/reference/external-files",
      "https://docs.substrate.run/reference/external-files/s3",
      "https://docs.substrate.run/reference/versioning",
      "https://docs.substrate.run/reference/legal/terms-of-service",
      "https://docs.substrate.run/reference/legal/privacy-policy",
      "https://docs.substrate.run/reference/legal/usage-policy",
      "https://www.val.town/v/substrate/hackerNewsRAG",
      "https://hn.algolia.com/api",
      "https://zod.dev/",
      "https://www.npmjs.com/package/zod-to-json-schema",
      "https://docs.pydantic.dev/latest/",
      "https://x.com/substratelabs",
      "https://www.linkedin.com/company/substratelabs",
      "https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA"
    ]
  },
  {
    "content": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nGuides\n\nReimagine a room\n\n֍\n\nGenerate variations of a room in different styles and summarize the interior design\n\nIn this example, we'll:\n\n*   Use StableDiffusionXLInpaint\n    \n    Edit an image using [Stable Diffusion XL](https://arxiv.org/abs/2307.01952)\n    . Supports inpainting (edit part of the image with a mask) and image-to-image (edit the full image).\n    \n    Example\n    \n    [API Reference](https://substrate.run/nodes#StableDiffusionXLInpaint)\n    \n    StableDiffusionXLInpaint( image\\_uri=\"https://media.substrate.run/docs-klimt-park.jpg\", mask\\_image\\_uri=\"https://media.substrate.run/spiral-logo.jpeg\", prompt=\"large tropical colorful bright birds in a jungle, high resolution oil painting\", negative\\_prompt=\"dark, cartoon, anime\", strength=0.8, num\\_images=2, store=\"hosted\", seeds=\\[ 1607280, 1720395, \\], )\n    \n    Output\n    \n    { \"outputs\": \\[ { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\", \"seed\": 1607326 }, { \"image\\_uri\": \"https://assets.substrate.run/48484848.jpg\", \"seed\": 1720398 } \\] }\n    \n    to generate variations of a photo of a room in different styles.\n*   Use StableDiffusionXLControlNet\n    \n    Generate an image with generation structured by an input image, using Stable Diffusion XL with [ControlNet](https://arxiv.org/abs/2302.05543)\n    .\n    \n    Example\n    \n    [API Reference](https://substrate.run/nodes#StableDiffusionXLControlNet)\n    \n    StableDiffusionXLControlNet( image\\_uri=\"https://media.substrate.run/spiral-logo.jpeg\", prompt=\"the futuristic solarpunk city of atlantis at sunset, cinematic bokeh HD\", control\\_method=\"illusion\", conditioning\\_scale=1.0, strength=1.0, store=\"hosted\", num\\_images=2, seeds=\\[ 1607226, 1720395, \\], )\n    \n    Output\n    \n    { \"outputs\": \\[ { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\", \"seed\": 1607266 }, { \"image\\_uri\": \"https://assets.substrate.run/48484848.jpg\", \"seed\": 1720398 } \\] }\n    \n    with the `edge` method to generate variations structured by the edges of the original image.\n*   Use StableDiffusionXLControlNet\n    \n    Generate an image with generation structured by an input image, using Stable Diffusion XL with [ControlNet](https://arxiv.org/abs/2302.05543)\n    .\n    \n    Example\n    \n    [API Reference](https://substrate.run/nodes#StableDiffusionXLControlNet)\n    \n    StableDiffusionXLControlNet( image\\_uri=\"https://media.substrate.run/spiral-logo.jpeg\", prompt=\"the futuristic solarpunk city of atlantis at sunset, cinematic bokeh HD\", control\\_method=\"illusion\", conditioning\\_scale=1.0, strength=1.0, store=\"hosted\", num\\_images=2, seeds=\\[ 1607226, 1720395, \\], )\n    \n    Output\n    \n    { \"outputs\": \\[ { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\", \"seed\": 1607266 }, { \"image\\_uri\": \"https://assets.substrate.run/48484848.jpg\", \"seed\": 1720398 } \\] }\n    \n    with the `depth` method to generate variations structured by a depth map of the original image.\n*   Use ComputeText\n    \n    Compute text using a language model.\n    \n    Example\n    \n    [API Reference](https://substrate.run/nodes#ComputeText)\n    \n    ComputeText( prompt=\"Who is Don Quixote?\", temperature=0.4, max\\_tokens=800, )\n    \n    Output\n    \n    { \"text\": \"Don Quixote is a fictional character in the novel of the same name by Miguel de Cervantes.\" }\n    \n    to summarize the final images.\n\nFirst, initialize Substrate:\n\nPython\n\nTypeScript\n\n`   from substrate import (    Substrate,    StableDiffusionXLControlNet,    StableDiffusionXLInpaint,    ComputeText,    ComputeText,    sb,    )        s = Substrate(api_key=YOUR_API_KEY)            `\n\nHere's the original image:\n\n![original](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Foffice.jpg&w=1200&q=75)\n\nWe'll first generate variations of the room using\n\nStableDiffusionXLInpaint\n\nEdit an image using [Stable Diffusion XL](https://arxiv.org/abs/2307.01952)\n. Supports inpainting (edit part of the image with a mask) and image-to-image (edit the full image).\n\nExample\n\n[API Reference](https://substrate.run/nodes#StableDiffusionXLInpaint)\n\nStableDiffusionXLInpaint( image\\_uri=\"https://media.substrate.run/docs-klimt-park.jpg\", mask\\_image\\_uri=\"https://media.substrate.run/spiral-logo.jpeg\", prompt=\"large tropical colorful bright birds in a jungle, high resolution oil painting\", negative\\_prompt=\"dark, cartoon, anime\", strength=0.8, num\\_images=2, store=\"hosted\", seeds=\\[ 1607280, 1720395, \\], )\n\nOutput\n\n{ \"outputs\": \\[ { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\", \"seed\": 1607326 }, { \"image\\_uri\": \"https://assets.substrate.run/48484848.jpg\", \"seed\": 1720398 } \\] }\n\n.\n\n*   This node can also be used to inpaint the masked part of an image if a `mask_image_uri` is provided. Here we'll inpaint in the entire image.\n*   The `strength` parameter controls the strength of the generation process over the original image – higher numbers result in images further from the original.\n\nPython\n\nTypeScript\n\n`   styles = [\"sunlit onsen style tokyo office\", \"80s disco style berlin office at night\"]    images = [    StableDiffusionXLInpaint(    image_uri=\"https://media.substrate.run/office.jpg\",    strength=0.75,    prompt=s,    num_images=1,    )    for s in styles    ]    res = s.run(*images)            `\n\n![inpaint tokyo](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Finpaint-tokyo.jpg&w=1200&q=75)\n\nsunlit onsen style tokyo office\n\n![inpaint berlin](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Finpaint-berlin.jpg&w=1200&q=75)\n\n80s disco style berlin office at night\n\nWhen using this `strength` value, some of the quality of the original is preserved in the variations, but they're quite different.\n\n֍\n\nInpaintImage\n\nEdit an image using image generation inside part of the image or the full image.\n\nExample\n\n[API Reference](https://substrate.run/nodes#InpaintImage)\n\nInpaintImage( image\\_uri=\"https://media.substrate.run/docs-klimt-park.jpg\", mask\\_image\\_uri=\"https://media.substrate.run/spiral-logo.jpeg\", prompt=\"large tropical colorful bright anime birds in a dark jungle full of vines, high resolution\", store=\"hosted\", )\n\nOutput\n\n{ \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\" }\n\nis a high-level alternative to `StableDiffusionXLControlNet`. You should use high-level nodes if you want your node to automatically update to the latest, best model.\n\nNext, we'll generate variations using\n\nStableDiffusionXLControlNet\n\nGenerate an image with generation structured by an input image, using Stable Diffusion XL with [ControlNet](https://arxiv.org/abs/2302.05543)\n.\n\nExample\n\n[API Reference](https://substrate.run/nodes#StableDiffusionXLControlNet)\n\nStableDiffusionXLControlNet( image\\_uri=\"https://media.substrate.run/spiral-logo.jpeg\", prompt=\"the futuristic solarpunk city of atlantis at sunset, cinematic bokeh HD\", control\\_method=\"illusion\", conditioning\\_scale=1.0, strength=1.0, store=\"hosted\", num\\_images=2, seeds=\\[ 1607226, 1720395, \\], )\n\nOutput\n\n{ \"outputs\": \\[ { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\", \"seed\": 1607266 }, { \"image\\_uri\": \"https://assets.substrate.run/48484848.jpg\", \"seed\": 1720398 } \\] }\n\nwith the `edge` method, which processes the original image with an edge detection algorithm and uses edges to structure generation.\n\nPython\n\nTypeScript\n\n`   styles = [\"sunlit onsen style tokyo office\", \"80s disco style berlin office at night\"]    images = [    StableDiffusionXLControlNet(    image_uri=\"https://media.substrate.run/office.jpg\",    control_method=\"edge\",    prompt=s,    num_images=1,    )    for s in styles    ]    res = s.run(*images)            `\n\n![edge tokyo](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Fedge-tokyo.jpg&w=1200&q=75)\n\nsunlit onsen style tokyo office\n\n![edge berlin](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Fedge-berlin.jpg&w=1200&q=75)\n\n80s disco style berlin office at night\n\nFinally, we'll use\n\nStableDiffusionXLControlNet\n\nGenerate an image with generation structured by an input image, using Stable Diffusion XL with [ControlNet](https://arxiv.org/abs/2302.05543)\n.\n\nExample\n\n[API Reference](https://substrate.run/nodes#StableDiffusionXLControlNet)\n\nStableDiffusionXLControlNet( image\\_uri=\"https://media.substrate.run/spiral-logo.jpeg\", prompt=\"the futuristic solarpunk city of atlantis at sunset, cinematic bokeh HD\", control\\_method=\"illusion\", conditioning\\_scale=1.0, strength=1.0, store=\"hosted\", num\\_images=2, seeds=\\[ 1607226, 1720395, \\], )\n\nOutput\n\n{ \"outputs\": \\[ { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\", \"seed\": 1607266 }, { \"image\\_uri\": \"https://assets.substrate.run/48484848.jpg\", \"seed\": 1720398 } \\] }\n\nwith the `depth` method, which processes the original image with a depth detection algorithm and uses depth to structure generation. We'll continue our workflow to describe the generated variations using ComputeText\n\nCompute text using a language model.\n\nExample\n\n[API Reference](https://substrate.run/nodes#ComputeText)\n\nComputeText( prompt=\"Who is Don Quixote?\", temperature=0.4, max\\_tokens=800, )\n\nOutput\n\n{ \"text\": \"Don Quixote is a fictional character in the novel of the same name by Miguel de Cervantes.\" }\n\n, and then summarize the generated descriptions using ComputeText\n\nCompute text using a language model.\n\nExample\n\n[API Reference](https://substrate.run/nodes#ComputeText)\n\nComputeText( prompt=\"Who is Don Quixote?\", temperature=0.4, max\\_tokens=800, )\n\nOutput\n\n{ \"text\": \"Don Quixote is a fictional character in the novel of the same name by Miguel de Cervantes.\" }\n\n.\n\nPython\n\nTypeScript\n\n`   styles = [\"sunlit onsen style tokyo office\", \"80s disco style berlin office at night\"]    images = [    StableDiffusionXLControlNet(    image_uri=\"https://media.substrate.run/office.jpg\",    control_method=\"depth\",    prompt=s,    num_images=1,    )    for s in styles    ]    descriptions = [    ComputeText(    prompt=\"Describe the interesting interior decor touches in this image\",    image_uris=[i.future.outputs[0].image_uri],    )    for i in images    ]    summaries = [    ComputeText(    prompt=sb.concat(    \"Summarize the 2 most interesting details in one sentence, be concise: \",    d.future.text,    ),    )    for d in descriptions    ]    res = s.run(*summaries)            `\n\n![edge tokyo](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Fdepth-tokyo.jpg&w=1200&q=75)\n\nThe living room boasts a spacious design with a large window allowing natural light and a cozy couch. Unique is the open-concept office area, separated by a partial wall, offering a functional workspace while maintaining unity, enhanced by plants, lamps, and a rug in the modern, minimalist decor.\n\n![edge berlin](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Fdepth-berlin.jpg&w=1200&q=75)\n\nThe image features a contemporary office with a captivating pink and purple color scheme: vibrant pink walls instill energy, while elegant purple furniture adds sophistication.\n\n[Extract and summarize Hacker News comments](/guides/extract-and-summarize \"Extract and summarize Hacker News comments\")\n[Transcribe audio & video](/guides/transcription \"Transcribe audio & video\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "markdown": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nGuides\n\nReimagine a room\n\n֍\n\nGenerate variations of a room in different styles and summarize the interior design\n\nIn this example, we'll:\n\n*   Use StableDiffusionXLInpaint\n    \n    Edit an image using [Stable Diffusion XL](https://arxiv.org/abs/2307.01952)\n    . Supports inpainting (edit part of the image with a mask) and image-to-image (edit the full image).\n    \n    Example\n    \n    [API Reference](https://substrate.run/nodes#StableDiffusionXLInpaint)\n    \n    StableDiffusionXLInpaint( image\\_uri=\"https://media.substrate.run/docs-klimt-park.jpg\", mask\\_image\\_uri=\"https://media.substrate.run/spiral-logo.jpeg\", prompt=\"large tropical colorful bright birds in a jungle, high resolution oil painting\", negative\\_prompt=\"dark, cartoon, anime\", strength=0.8, num\\_images=2, store=\"hosted\", seeds=\\[ 1607280, 1720395, \\], )\n    \n    Output\n    \n    { \"outputs\": \\[ { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\", \"seed\": 1607326 }, { \"image\\_uri\": \"https://assets.substrate.run/48484848.jpg\", \"seed\": 1720398 } \\] }\n    \n    to generate variations of a photo of a room in different styles.\n*   Use StableDiffusionXLControlNet\n    \n    Generate an image with generation structured by an input image, using Stable Diffusion XL with [ControlNet](https://arxiv.org/abs/2302.05543)\n    .\n    \n    Example\n    \n    [API Reference](https://substrate.run/nodes#StableDiffusionXLControlNet)\n    \n    StableDiffusionXLControlNet( image\\_uri=\"https://media.substrate.run/spiral-logo.jpeg\", prompt=\"the futuristic solarpunk city of atlantis at sunset, cinematic bokeh HD\", control\\_method=\"illusion\", conditioning\\_scale=1.0, strength=1.0, store=\"hosted\", num\\_images=2, seeds=\\[ 1607226, 1720395, \\], )\n    \n    Output\n    \n    { \"outputs\": \\[ { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\", \"seed\": 1607266 }, { \"image\\_uri\": \"https://assets.substrate.run/48484848.jpg\", \"seed\": 1720398 } \\] }\n    \n    with the `edge` method to generate variations structured by the edges of the original image.\n*   Use StableDiffusionXLControlNet\n    \n    Generate an image with generation structured by an input image, using Stable Diffusion XL with [ControlNet](https://arxiv.org/abs/2302.05543)\n    .\n    \n    Example\n    \n    [API Reference](https://substrate.run/nodes#StableDiffusionXLControlNet)\n    \n    StableDiffusionXLControlNet( image\\_uri=\"https://media.substrate.run/spiral-logo.jpeg\", prompt=\"the futuristic solarpunk city of atlantis at sunset, cinematic bokeh HD\", control\\_method=\"illusion\", conditioning\\_scale=1.0, strength=1.0, store=\"hosted\", num\\_images=2, seeds=\\[ 1607226, 1720395, \\], )\n    \n    Output\n    \n    { \"outputs\": \\[ { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\", \"seed\": 1607266 }, { \"image\\_uri\": \"https://assets.substrate.run/48484848.jpg\", \"seed\": 1720398 } \\] }\n    \n    with the `depth` method to generate variations structured by a depth map of the original image.\n*   Use ComputeText\n    \n    Compute text using a language model.\n    \n    Example\n    \n    [API Reference](https://substrate.run/nodes#ComputeText)\n    \n    ComputeText( prompt=\"Who is Don Quixote?\", temperature=0.4, max\\_tokens=800, )\n    \n    Output\n    \n    { \"text\": \"Don Quixote is a fictional character in the novel of the same name by Miguel de Cervantes.\" }\n    \n    to summarize the final images.\n\nFirst, initialize Substrate:\n\nPython\n\nTypeScript\n\n`   from substrate import (    Substrate,    StableDiffusionXLControlNet,    StableDiffusionXLInpaint,    ComputeText,    ComputeText,    sb,    )        s = Substrate(api_key=YOUR_API_KEY)            `\n\nHere's the original image:\n\n![original](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Foffice.jpg&w=1200&q=75)\n\nWe'll first generate variations of the room using\n\nStableDiffusionXLInpaint\n\nEdit an image using [Stable Diffusion XL](https://arxiv.org/abs/2307.01952)\n. Supports inpainting (edit part of the image with a mask) and image-to-image (edit the full image).\n\nExample\n\n[API Reference](https://substrate.run/nodes#StableDiffusionXLInpaint)\n\nStableDiffusionXLInpaint( image\\_uri=\"https://media.substrate.run/docs-klimt-park.jpg\", mask\\_image\\_uri=\"https://media.substrate.run/spiral-logo.jpeg\", prompt=\"large tropical colorful bright birds in a jungle, high resolution oil painting\", negative\\_prompt=\"dark, cartoon, anime\", strength=0.8, num\\_images=2, store=\"hosted\", seeds=\\[ 1607280, 1720395, \\], )\n\nOutput\n\n{ \"outputs\": \\[ { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\", \"seed\": 1607326 }, { \"image\\_uri\": \"https://assets.substrate.run/48484848.jpg\", \"seed\": 1720398 } \\] }\n\n.\n\n*   This node can also be used to inpaint the masked part of an image if a `mask_image_uri` is provided. Here we'll inpaint in the entire image.\n*   The `strength` parameter controls the strength of the generation process over the original image – higher numbers result in images further from the original.\n\nPython\n\nTypeScript\n\n`   styles = [\"sunlit onsen style tokyo office\", \"80s disco style berlin office at night\"]    images = [    StableDiffusionXLInpaint(    image_uri=\"https://media.substrate.run/office.jpg\",    strength=0.75,    prompt=s,    num_images=1,    )    for s in styles    ]    res = s.run(*images)            `\n\n![inpaint tokyo](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Finpaint-tokyo.jpg&w=1200&q=75)\n\nsunlit onsen style tokyo office\n\n![inpaint berlin](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Finpaint-berlin.jpg&w=1200&q=75)\n\n80s disco style berlin office at night\n\nWhen using this `strength` value, some of the quality of the original is preserved in the variations, but they're quite different.\n\n֍\n\nInpaintImage\n\nEdit an image using image generation inside part of the image or the full image.\n\nExample\n\n[API Reference](https://substrate.run/nodes#InpaintImage)\n\nInpaintImage( image\\_uri=\"https://media.substrate.run/docs-klimt-park.jpg\", mask\\_image\\_uri=\"https://media.substrate.run/spiral-logo.jpeg\", prompt=\"large tropical colorful bright anime birds in a dark jungle full of vines, high resolution\", store=\"hosted\", )\n\nOutput\n\n{ \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\" }\n\nis a high-level alternative to `StableDiffusionXLControlNet`. You should use high-level nodes if you want your node to automatically update to the latest, best model.\n\nNext, we'll generate variations using\n\nStableDiffusionXLControlNet\n\nGenerate an image with generation structured by an input image, using Stable Diffusion XL with [ControlNet](https://arxiv.org/abs/2302.05543)\n.\n\nExample\n\n[API Reference](https://substrate.run/nodes#StableDiffusionXLControlNet)\n\nStableDiffusionXLControlNet( image\\_uri=\"https://media.substrate.run/spiral-logo.jpeg\", prompt=\"the futuristic solarpunk city of atlantis at sunset, cinematic bokeh HD\", control\\_method=\"illusion\", conditioning\\_scale=1.0, strength=1.0, store=\"hosted\", num\\_images=2, seeds=\\[ 1607226, 1720395, \\], )\n\nOutput\n\n{ \"outputs\": \\[ { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\", \"seed\": 1607266 }, { \"image\\_uri\": \"https://assets.substrate.run/48484848.jpg\", \"seed\": 1720398 } \\] }\n\nwith the `edge` method, which processes the original image with an edge detection algorithm and uses edges to structure generation.\n\nPython\n\nTypeScript\n\n`   styles = [\"sunlit onsen style tokyo office\", \"80s disco style berlin office at night\"]    images = [    StableDiffusionXLControlNet(    image_uri=\"https://media.substrate.run/office.jpg\",    control_method=\"edge\",    prompt=s,    num_images=1,    )    for s in styles    ]    res = s.run(*images)            `\n\n![edge tokyo](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Fedge-tokyo.jpg&w=1200&q=75)\n\nsunlit onsen style tokyo office\n\n![edge berlin](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Fedge-berlin.jpg&w=1200&q=75)\n\n80s disco style berlin office at night\n\nFinally, we'll use\n\nStableDiffusionXLControlNet\n\nGenerate an image with generation structured by an input image, using Stable Diffusion XL with [ControlNet](https://arxiv.org/abs/2302.05543)\n.\n\nExample\n\n[API Reference](https://substrate.run/nodes#StableDiffusionXLControlNet)\n\nStableDiffusionXLControlNet( image\\_uri=\"https://media.substrate.run/spiral-logo.jpeg\", prompt=\"the futuristic solarpunk city of atlantis at sunset, cinematic bokeh HD\", control\\_method=\"illusion\", conditioning\\_scale=1.0, strength=1.0, store=\"hosted\", num\\_images=2, seeds=\\[ 1607226, 1720395, \\], )\n\nOutput\n\n{ \"outputs\": \\[ { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\", \"seed\": 1607266 }, { \"image\\_uri\": \"https://assets.substrate.run/48484848.jpg\", \"seed\": 1720398 } \\] }\n\nwith the `depth` method, which processes the original image with a depth detection algorithm and uses depth to structure generation. We'll continue our workflow to describe the generated variations using ComputeText\n\nCompute text using a language model.\n\nExample\n\n[API Reference](https://substrate.run/nodes#ComputeText)\n\nComputeText( prompt=\"Who is Don Quixote?\", temperature=0.4, max\\_tokens=800, )\n\nOutput\n\n{ \"text\": \"Don Quixote is a fictional character in the novel of the same name by Miguel de Cervantes.\" }\n\n, and then summarize the generated descriptions using ComputeText\n\nCompute text using a language model.\n\nExample\n\n[API Reference](https://substrate.run/nodes#ComputeText)\n\nComputeText( prompt=\"Who is Don Quixote?\", temperature=0.4, max\\_tokens=800, )\n\nOutput\n\n{ \"text\": \"Don Quixote is a fictional character in the novel of the same name by Miguel de Cervantes.\" }\n\n.\n\nPython\n\nTypeScript\n\n`   styles = [\"sunlit onsen style tokyo office\", \"80s disco style berlin office at night\"]    images = [    StableDiffusionXLControlNet(    image_uri=\"https://media.substrate.run/office.jpg\",    control_method=\"depth\",    prompt=s,    num_images=1,    )    for s in styles    ]    descriptions = [    ComputeText(    prompt=\"Describe the interesting interior decor touches in this image\",    image_uris=[i.future.outputs[0].image_uri],    )    for i in images    ]    summaries = [    ComputeText(    prompt=sb.concat(    \"Summarize the 2 most interesting details in one sentence, be concise: \",    d.future.text,    ),    )    for d in descriptions    ]    res = s.run(*summaries)            `\n\n![edge tokyo](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Fdepth-tokyo.jpg&w=1200&q=75)\n\nThe living room boasts a spacious design with a large window allowing natural light and a cozy couch. Unique is the open-concept office area, separated by a partial wall, offering a functional workspace while maintaining unity, enhanced by plants, lamps, and a rug in the modern, minimalist decor.\n\n![edge berlin](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Fdepth-berlin.jpg&w=1200&q=75)\n\nThe image features a contemporary office with a captivating pink and purple color scheme: vibrant pink walls instill energy, while elegant purple furniture adds sophistication.\n\n[Extract and summarize Hacker News comments](/guides/extract-and-summarize \"Extract and summarize Hacker News comments\")\n[Transcribe audio & video](/guides/transcription \"Transcribe audio & video\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "metadata": {
      "ogUrl": "https://docs.substrate.run",
      "title": "Reimagine a Room | Substrate",
      "robots": "index,follow",
      "ogImage": "/og-image-v3.png",
      "ogTitle": "Reimagine a Room | Substrate",
      "sourceURL": "https://docs.substrate.run/guides/reimagine-a-room",
      "description": "Substrate",
      "ogDescription": "The platform for compound AI. Powerful SDKs, with batteries included: optimized AI models, vector storage, code interpreter, and agentic control flow. Stop using LangChain.",
      "pageStatusCode": 200,
      "ogLocaleAlternate": []
    },
    "linksOnPage": [
      "https://substrate.run",
      "https://docs.substrate.run/",
      "https://substrate.run/nodes",
      "https://substrate.run/pricing",
      "https://substrate.run/company",
      "https://blog.substrate.run",
      "https://docs.substrate.run/overview/setup",
      "https://docs.substrate.run/overview/connecting",
      "https://docs.substrate.run/overview/storing",
      "https://docs.substrate.run/why",
      "https://docs.substrate.run/changelog",
      "https://docs.substrate.run/guides/extract-and-summarize",
      "https://docs.substrate.run/guides/reimagine-a-room",
      "https://docs.substrate.run/guides/transcription",
      "https://docs.substrate.run/guides/vector-stores",
      "https://docs.substrate.run/guides/remove-background",
      "https://docs.substrate.run/guides/masked-image-generation",
      "https://docs.substrate.run/guides/mixture-of-agents",
      "https://docs.substrate.run/reference/api",
      "https://docs.substrate.run/reference/quick",
      "https://docs.substrate.run/reference/box",
      "https://docs.substrate.run/reference/if",
      "https://docs.substrate.run/reference/run-python",
      "https://docs.substrate.run/reference/streaming",
      "https://docs.substrate.run/reference/external-files",
      "https://docs.substrate.run/reference/external-files/s3",
      "https://docs.substrate.run/reference/versioning",
      "https://docs.substrate.run/reference/legal/terms-of-service",
      "https://docs.substrate.run/reference/legal/privacy-policy",
      "https://docs.substrate.run/reference/legal/usage-policy",
      "https://arxiv.org/abs/2307.01952",
      "https://substrate.run/nodes#StableDiffusionXLInpaint",
      "https://arxiv.org/abs/2302.05543",
      "https://substrate.run/nodes#StableDiffusionXLControlNet",
      "https://substrate.run/nodes#ComputeText",
      "https://substrate.run/nodes#InpaintImage",
      "https://x.com/substratelabs",
      "https://www.linkedin.com/company/substratelabs",
      "https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA"
    ]
  },
  {
    "content": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nGuides\n\nTranscribe audio & video\n\n֍\n\nLearn how to transcribe audio and video\n\nThe\n\nTranscribeSpeech\n\nTranscribe speech in an audio or video file.\n\nExample\n\n[API Reference](https://substrate.run/nodes#TranscribeSpeech)\n\nTranscribeSpeech( audio\\_uri=\"https://media.substrate.run/dfw-clip.m4a\", prompt=\"David Foster Wallace interviewed about US culture, and Infinite Jest\", segment=True, align=True, diarize=True, suggest\\_chapters=True, )\n\nOutput\n\n{ \"text\": \"language like that, the wounded inner child, the inner pain, is part of a kind of pop psychological movement in the United States that is a sort of popular Freudianism that ...\", \"segments\": \\[ { \"start\": 0.874, \"end\": 15.353, \"speaker\": \"SPEAKER\\_00\", \"text\": \"language like that, the wounded inner child, the inner pain, is part of a kind of pop psychological movement in the United States that is a sort of popular Freudianism that\", \"words\": \\[ { \"word\": \"language\", \"start\": 0.874, \"end\": 1.275, \"speaker\": \"SPEAKER\\_00\" }, { \"word\": \"like\", \"start\": 1.295, \"end\": 1.455, \"speaker\": \"SPEAKER\\_00\" } \\] } \\], \"chapters\": \\[ { \"title\": \"Introduction to the Wounded Inner Child and Popular Psychology in US\", \"start\": 0.794 }, { \"title\": \"The Paradox of Popular Psychology and Anger in America\", \"start\": 16.186 } \\] }\n\nnode transcribes speech from audio or video input, with additional built-in capabilities:\n\n*   segmentation by sentence\n*   diarization (speaker identification)\n*   alignment to word-level timestamps\n*   automatic chapter detection\n\nTo simply transcribe input without further processing, provide an `audio_uri`. This can be a publicly-hosted audio or video file, base-64-encoded audio or video data, or a privately-hosted [external file (opens in a new tab)](http://localhost:3000/reference/external-files)\n. For best results, you may also provide a `prompt` that describes the content of the audio or video.\n\nPython\n\nTypeScript\n\n`   from substrate import Substrate, TranscribeSpeech        # ...        transcript = TranscribeSpeech(    audio_uri=\"https://media.substrate.run/dfw-clip.m4a\",    prompt=\"David Foster Wallace interviewed about US culture\",    )    res = substrate.run(transcript)            `\n\nOutput\n\n`   {    \"text\": \"language like that, the wounded inner child, the inner pain, is part of a kind of pop psychological movement in the United States that is a sort of popular Freudianism that ...\"    }            `\n\nTo enable additional capabilities, set:\n\n*   `segment: True` to return a list of sentence `segments` with `start` and `end` timestamps.\n*   `align: True` to return a list of aligned `words` within sentence `segments`.\n*   `diarize: True` to include `speaker` IDs within `segments` and `words`.\n*   `suggest_chapters: True` to return a list of suggested `chapters` with titles and `start` timestamps.\n\nPython\n\nTypeScript\n\n`   transcript = TranscribeSpeech(    audio_uri=\"https://media.substrate.run/dfw-clip.m4a\",    prompt=\"David Foster Wallace interviewed about US culture\",    segment=True,    align=True,    diarize=True,    suggest_chapters=True,    )            `\n\nOutput\n\n`   {    \"text\": \"language like that, the wounded inner child, the inner pain, is part of a kind of pop psychological movement in the United States that is a sort of popular Freudianism that ...\",    \"segments\": [    {    \"start\": 0.874,    \"end\": 15.353,    \"speaker\": \"SPEAKER_00\",    \"text\": \"language like that, the wounded inner child, the inner pain, is part of a kind of pop psychological movement in the United States that is a sort of popular Freudianism that\",    \"words\": [    {    \"word\": \"language\",    \"start\": 0.874,    \"end\": 1.275,    \"speaker\": \"SPEAKER_00\"    },    {    \"word\": \"like\",    \"start\": 1.295,    \"end\": 1.455,    \"speaker\": \"SPEAKER_00\"    }    ]    }    ],    \"chapters\": [    {    \"title\": \"Introduction to the Wounded Inner Child and Popular Psychology in US\",    \"start\": 0.794    },    {    \"title\": \"The Paradox of Popular Psychology and Anger in America\",    \"start\": 16.186    }    ]    }            `\n\n[Reimagine a room](/guides/reimagine-a-room \"Reimagine a room\")\n[Store & query vectors](/guides/vector-stores \"Store & query vectors\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "markdown": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nGuides\n\nTranscribe audio & video\n\n֍\n\nLearn how to transcribe audio and video\n\nThe\n\nTranscribeSpeech\n\nTranscribe speech in an audio or video file.\n\nExample\n\n[API Reference](https://substrate.run/nodes#TranscribeSpeech)\n\nTranscribeSpeech( audio\\_uri=\"https://media.substrate.run/dfw-clip.m4a\", prompt=\"David Foster Wallace interviewed about US culture, and Infinite Jest\", segment=True, align=True, diarize=True, suggest\\_chapters=True, )\n\nOutput\n\n{ \"text\": \"language like that, the wounded inner child, the inner pain, is part of a kind of pop psychological movement in the United States that is a sort of popular Freudianism that ...\", \"segments\": \\[ { \"start\": 0.874, \"end\": 15.353, \"speaker\": \"SPEAKER\\_00\", \"text\": \"language like that, the wounded inner child, the inner pain, is part of a kind of pop psychological movement in the United States that is a sort of popular Freudianism that\", \"words\": \\[ { \"word\": \"language\", \"start\": 0.874, \"end\": 1.275, \"speaker\": \"SPEAKER\\_00\" }, { \"word\": \"like\", \"start\": 1.295, \"end\": 1.455, \"speaker\": \"SPEAKER\\_00\" } \\] } \\], \"chapters\": \\[ { \"title\": \"Introduction to the Wounded Inner Child and Popular Psychology in US\", \"start\": 0.794 }, { \"title\": \"The Paradox of Popular Psychology and Anger in America\", \"start\": 16.186 } \\] }\n\nnode transcribes speech from audio or video input, with additional built-in capabilities:\n\n*   segmentation by sentence\n*   diarization (speaker identification)\n*   alignment to word-level timestamps\n*   automatic chapter detection\n\nTo simply transcribe input without further processing, provide an `audio_uri`. This can be a publicly-hosted audio or video file, base-64-encoded audio or video data, or a privately-hosted [external file (opens in a new tab)](http://localhost:3000/reference/external-files)\n. For best results, you may also provide a `prompt` that describes the content of the audio or video.\n\nPython\n\nTypeScript\n\n`   from substrate import Substrate, TranscribeSpeech        # ...        transcript = TranscribeSpeech(    audio_uri=\"https://media.substrate.run/dfw-clip.m4a\",    prompt=\"David Foster Wallace interviewed about US culture\",    )    res = substrate.run(transcript)            `\n\nOutput\n\n`   {    \"text\": \"language like that, the wounded inner child, the inner pain, is part of a kind of pop psychological movement in the United States that is a sort of popular Freudianism that ...\"    }            `\n\nTo enable additional capabilities, set:\n\n*   `segment: True` to return a list of sentence `segments` with `start` and `end` timestamps.\n*   `align: True` to return a list of aligned `words` within sentence `segments`.\n*   `diarize: True` to include `speaker` IDs within `segments` and `words`.\n*   `suggest_chapters: True` to return a list of suggested `chapters` with titles and `start` timestamps.\n\nPython\n\nTypeScript\n\n`   transcript = TranscribeSpeech(    audio_uri=\"https://media.substrate.run/dfw-clip.m4a\",    prompt=\"David Foster Wallace interviewed about US culture\",    segment=True,    align=True,    diarize=True,    suggest_chapters=True,    )            `\n\nOutput\n\n`   {    \"text\": \"language like that, the wounded inner child, the inner pain, is part of a kind of pop psychological movement in the United States that is a sort of popular Freudianism that ...\",    \"segments\": [    {    \"start\": 0.874,    \"end\": 15.353,    \"speaker\": \"SPEAKER_00\",    \"text\": \"language like that, the wounded inner child, the inner pain, is part of a kind of pop psychological movement in the United States that is a sort of popular Freudianism that\",    \"words\": [    {    \"word\": \"language\",    \"start\": 0.874,    \"end\": 1.275,    \"speaker\": \"SPEAKER_00\"    },    {    \"word\": \"like\",    \"start\": 1.295,    \"end\": 1.455,    \"speaker\": \"SPEAKER_00\"    }    ]    }    ],    \"chapters\": [    {    \"title\": \"Introduction to the Wounded Inner Child and Popular Psychology in US\",    \"start\": 0.794    },    {    \"title\": \"The Paradox of Popular Psychology and Anger in America\",    \"start\": 16.186    }    ]    }            `\n\n[Reimagine a room](/guides/reimagine-a-room \"Reimagine a room\")\n[Store & query vectors](/guides/vector-stores \"Store & query vectors\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "metadata": {
      "ogUrl": "https://docs.substrate.run",
      "title": "Transcription | Substrate",
      "robots": "index,follow",
      "ogImage": "/og-image-v3.png",
      "ogTitle": "Transcription | Substrate",
      "sourceURL": "https://docs.substrate.run/guides/transcription",
      "description": "Substrate",
      "ogDescription": "The platform for compound AI. Powerful SDKs, with batteries included: optimized AI models, vector storage, code interpreter, and agentic control flow. Stop using LangChain.",
      "pageStatusCode": 200,
      "ogLocaleAlternate": []
    },
    "linksOnPage": [
      "https://substrate.run",
      "https://docs.substrate.run/",
      "https://substrate.run/nodes",
      "https://substrate.run/pricing",
      "https://substrate.run/company",
      "https://blog.substrate.run",
      "https://docs.substrate.run/overview/setup",
      "https://docs.substrate.run/overview/connecting",
      "https://docs.substrate.run/overview/storing",
      "https://docs.substrate.run/why",
      "https://docs.substrate.run/changelog",
      "https://docs.substrate.run/guides/extract-and-summarize",
      "https://docs.substrate.run/guides/reimagine-a-room",
      "https://docs.substrate.run/guides/transcription",
      "https://docs.substrate.run/guides/vector-stores",
      "https://docs.substrate.run/guides/remove-background",
      "https://docs.substrate.run/guides/masked-image-generation",
      "https://docs.substrate.run/guides/mixture-of-agents",
      "https://docs.substrate.run/reference/api",
      "https://docs.substrate.run/reference/quick",
      "https://docs.substrate.run/reference/box",
      "https://docs.substrate.run/reference/if",
      "https://docs.substrate.run/reference/run-python",
      "https://docs.substrate.run/reference/streaming",
      "https://docs.substrate.run/reference/external-files",
      "https://docs.substrate.run/reference/external-files/s3",
      "https://docs.substrate.run/reference/versioning",
      "https://docs.substrate.run/reference/legal/terms-of-service",
      "https://docs.substrate.run/reference/legal/privacy-policy",
      "https://docs.substrate.run/reference/legal/usage-policy",
      "https://substrate.run/nodes#TranscribeSpeech",
      "http://localhost:3000/reference/external-files",
      "https://x.com/substratelabs",
      "https://www.linkedin.com/company/substratelabs",
      "https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA"
    ]
  },
  {
    "content": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nGuides\n\nStore & query vectors\n\n֍\n\nLearn how to store vectors and query a vector store\n\nSubstrate comes with built-in vector storage, which you can use to store and query generated embeddings. In this example, we'll embed a set of common phrases used to enhance image generation prompts. Then, we'll query the vector store with a given prompt to recommend phrases to enhance the prompt.\n\nFirst, we'll create a new vector store using\n\nFindOrCreateVectorStore\n\nFind a vector store matching the given collection name, or create a new vector store.\n\nExample\n\n[API Reference](https://substrate.run/nodes#FindOrCreateVectorStore)\n\nFindOrCreateVectorStore( collection\\_name=\"smoke\\_tests\", model=\"jina-v2\", )\n\nOutput\n\n{ \"collection\\_name\": \"smoke\\_tests\", \"model\": \"jina-v2\" }\n\n, providing a name for the collection, and the model we'll use to embed our data.\n\nPython\n\nTypeScript\n\n`   create = FindOrCreateVectorStore(    collection_name=\"image_prompt_enhancements\",    model=\"jina-v2\",    );    create_res = substrate.run(create)            `\n\nNext, we'll embed the enhancement phrases using\n\nEmbedText\n\nGenerate embedding for a text document.\n\nExample\n\n[API Reference](https://substrate.run/nodes#EmbedText)\n\nEmbedText( text=\"Argon is the third most abundant gas in Earth's atmosphere, at 0.934% (9340 ppmv). It is more than twice as abundant as water vapor.\", model=\"jina-v2\", collection\\_name=\"smoke\\_tests\", metadata={ \"group\": \"18\", }, embedded\\_metadata\\_keys=\\[ \"group\", \\], )\n\nOutput\n\n{ \"embedding\": { \"vector\": \\[ -0.035030052065849304, -0.04128379374742508, 0.05782046541571617 \\], \"doc\\_id\": \"c9de81fb98804ce0afb2b8ac17c0799b\", \"metadata\": { \"group\": \"18\", \"doc\\_id\": \"c9de81fb98804ce0afb2b8ac17c0799b\", \"doc\": \"group: 18 Argon is the third most abundant gas in Earth's atmosphere, at 0.934% (9340 ppmv). It is more than twice as abundant as water vapor.\" } } }\n\nproviding the text to embed, the name of the collection, and the embedding model. We'll create an array of embedding nodes, and Substrate will automatically run the nodes in parallel.\n\nPython\n\nTypeScript\n\n`   enhancements = [    \"highly detailed\",    \"cell shaded cartoon\",    \"concept art\",    \"octane render\",    \"volumetric lighting\",    \"8k postprocessing\",    \"cinematic\",    \"sharp focus\",    ]    nodes = []    for e in enhancements:    embed = EmbedText(    text=e,    collection_name=\"image_prompt_enhancements\",    model=\"jina-v2\",    )    nodes.append(embed)    embed_res = substrate.run(*nodes)            `\n\nFinally, we'll query the vector store with a given prompt using\n\nQueryVectorStore\n\nQuery a vector store for similar vectors.\n\nExample\n\n[API Reference](https://substrate.run/nodes#QueryVectorStore)\n\nQueryVectorStore( collection\\_name=\"smoke\\_tests\", model=\"jina-v2\", query\\_strings=\\[ \"gas\", \"metal\", \\], top\\_k=1, include\\_metadata=True, )\n\nOutput\n\n{ \"results\": \\[ \\[ { \"id\": \"483e75021c9d4ad69c3d78ace76da2ea\", \"distance\": -0.78324556350708, \"metadata\": { \"doc\": \"group: 18 Argon is the third most abundant gas in Earth's atmosphere, at 0.934% (9340 ppmv). It is more than twice as abundant as water vapor.\", \"group\": \"18\", \"doc\\_id\": \"483e75021c9d4ad69c3d78ace76da2ea\" } } \\], \\[ { \"id\": \"dd8f3774e05d42caa53cfbaa7389c08f\", \"distance\": -0.74278724193573, \"metadata\": { \"doc\": \"group: 8 Osmium is the densest naturally occurring element. When experimentally measured using X-ray crystallography, it has a density of 22.59 g/cm3. Manufacturers use its alloys with platinum, iridium, and other platinum-group metals to make fountain pen nib tipping, electrical contacts, and in other applications that require extreme durability and hardness.\", \"group\": \"8\", \"doc\\_id\": \"dd8f3774e05d42caa53cfbaa7389c08f\" } } \\] \\], \"collection\\_name\": \"comments\", \"model\": \"jina-v2\" }\n\n, providing the query string, the collection name, and the embedding model.\n\n*   We'll set `include_metadata` to `True` to include metadata in the response, as the metadata includes the embedded text in the `doc` field.\n*   We'll set `top_k` to 3 to retrieve only the top 3 most similar results.\n\nPython\n\nTypeScript\n\n`   query = QueryVectorStore(    query_strings=[\"a towering shell the size of a city skyscraper\"],    collection_name=\"image_prompt_enhancements\",    model=\"jina-v2\",    include_metadata=True,    top_k=3,    )    query_res = substrate.run(query)    query_out = query_res.get(query)            `\n\nThe output of\n\nQueryVectorStore\n\nQuery a vector store for similar vectors.\n\nExample\n\n[API Reference](https://substrate.run/nodes#QueryVectorStore)\n\nQueryVectorStore( collection\\_name=\"smoke\\_tests\", model=\"jina-v2\", query\\_strings=\\[ \"gas\", \"metal\", \\], top\\_k=1, include\\_metadata=True, )\n\nOutput\n\n{ \"results\": \\[ \\[ { \"id\": \"483e75021c9d4ad69c3d78ace76da2ea\", \"distance\": -0.78324556350708, \"metadata\": { \"doc\": \"group: 18 Argon is the third most abundant gas in Earth's atmosphere, at 0.934% (9340 ppmv). It is more than twice as abundant as water vapor.\", \"group\": \"18\", \"doc\\_id\": \"483e75021c9d4ad69c3d78ace76da2ea\" } } \\], \\[ { \"id\": \"dd8f3774e05d42caa53cfbaa7389c08f\", \"distance\": -0.74278724193573, \"metadata\": { \"doc\": \"group: 8 Osmium is the densest naturally occurring element. When experimentally measured using X-ray crystallography, it has a density of 22.59 g/cm3. Manufacturers use its alloys with platinum, iridium, and other platinum-group metals to make fountain pen nib tipping, electrical contacts, and in other applications that require extreme durability and hardness.\", \"group\": \"8\", \"doc\\_id\": \"dd8f3774e05d42caa53cfbaa7389c08f\" } } \\] \\], \"collection\\_name\": \"comments\", \"model\": \"jina-v2\" }\n\nhas query results in the `results` field, which is a _list of lists_. In this example, it contains a single list of results. If we instead provided two `query_strings`, it would contain two lists of results, one for each query string.\n\nOutput\n\n`   {    \"results\": [    [    {    \"id\": \"079ee5765c8c4df98b50bdb7b5cbdd29\",    \"distance\": -0.723642945289612,    \"vector\": null,    \"metadata\": {    \"doc\": \"cell shaded cartoon\",    \"doc_id\": \"079ee5765c8c4df98b50bdb7b5cbdd29\"    }    },    {    \"id\": \"98ec8bb1da1243d88721645fc0a8899b\",    \"distance\": -0.717301785945892,    \"vector\": null,    \"metadata\": {    \"doc\": \"cinematic\",    \"doc_id\": \"98ec8bb1da1243d88721645fc0a8899b\"    }    },    {    \"id\": \"158f2fc695e648878d245fdf93fa2917\",    \"distance\": -0.715586066246033,    \"vector\": null,    \"metadata\": {    \"doc\": \"wide shot\",    \"doc_id\": \"158f2fc695e648878d245fdf93fa2917\"    }    }    ]    ],    \"collection_name\": null,    \"model\": \"jina-v2\",    \"metric\": \"inner\"    }            `\n\n[Transcribe audio & video](/guides/transcription \"Transcribe audio & video\")\n[Separate foreground & background](/guides/remove-background \"Separate foreground & background\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "markdown": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nGuides\n\nStore & query vectors\n\n֍\n\nLearn how to store vectors and query a vector store\n\nSubstrate comes with built-in vector storage, which you can use to store and query generated embeddings. In this example, we'll embed a set of common phrases used to enhance image generation prompts. Then, we'll query the vector store with a given prompt to recommend phrases to enhance the prompt.\n\nFirst, we'll create a new vector store using\n\nFindOrCreateVectorStore\n\nFind a vector store matching the given collection name, or create a new vector store.\n\nExample\n\n[API Reference](https://substrate.run/nodes#FindOrCreateVectorStore)\n\nFindOrCreateVectorStore( collection\\_name=\"smoke\\_tests\", model=\"jina-v2\", )\n\nOutput\n\n{ \"collection\\_name\": \"smoke\\_tests\", \"model\": \"jina-v2\" }\n\n, providing a name for the collection, and the model we'll use to embed our data.\n\nPython\n\nTypeScript\n\n`   create = FindOrCreateVectorStore(    collection_name=\"image_prompt_enhancements\",    model=\"jina-v2\",    );    create_res = substrate.run(create)            `\n\nNext, we'll embed the enhancement phrases using\n\nEmbedText\n\nGenerate embedding for a text document.\n\nExample\n\n[API Reference](https://substrate.run/nodes#EmbedText)\n\nEmbedText( text=\"Argon is the third most abundant gas in Earth's atmosphere, at 0.934% (9340 ppmv). It is more than twice as abundant as water vapor.\", model=\"jina-v2\", collection\\_name=\"smoke\\_tests\", metadata={ \"group\": \"18\", }, embedded\\_metadata\\_keys=\\[ \"group\", \\], )\n\nOutput\n\n{ \"embedding\": { \"vector\": \\[ -0.035030052065849304, -0.04128379374742508, 0.05782046541571617 \\], \"doc\\_id\": \"c9de81fb98804ce0afb2b8ac17c0799b\", \"metadata\": { \"group\": \"18\", \"doc\\_id\": \"c9de81fb98804ce0afb2b8ac17c0799b\", \"doc\": \"group: 18 Argon is the third most abundant gas in Earth's atmosphere, at 0.934% (9340 ppmv). It is more than twice as abundant as water vapor.\" } } }\n\nproviding the text to embed, the name of the collection, and the embedding model. We'll create an array of embedding nodes, and Substrate will automatically run the nodes in parallel.\n\nPython\n\nTypeScript\n\n`   enhancements = [    \"highly detailed\",    \"cell shaded cartoon\",    \"concept art\",    \"octane render\",    \"volumetric lighting\",    \"8k postprocessing\",    \"cinematic\",    \"sharp focus\",    ]    nodes = []    for e in enhancements:    embed = EmbedText(    text=e,    collection_name=\"image_prompt_enhancements\",    model=\"jina-v2\",    )    nodes.append(embed)    embed_res = substrate.run(*nodes)            `\n\nFinally, we'll query the vector store with a given prompt using\n\nQueryVectorStore\n\nQuery a vector store for similar vectors.\n\nExample\n\n[API Reference](https://substrate.run/nodes#QueryVectorStore)\n\nQueryVectorStore( collection\\_name=\"smoke\\_tests\", model=\"jina-v2\", query\\_strings=\\[ \"gas\", \"metal\", \\], top\\_k=1, include\\_metadata=True, )\n\nOutput\n\n{ \"results\": \\[ \\[ { \"id\": \"483e75021c9d4ad69c3d78ace76da2ea\", \"distance\": -0.78324556350708, \"metadata\": { \"doc\": \"group: 18 Argon is the third most abundant gas in Earth's atmosphere, at 0.934% (9340 ppmv). It is more than twice as abundant as water vapor.\", \"group\": \"18\", \"doc\\_id\": \"483e75021c9d4ad69c3d78ace76da2ea\" } } \\], \\[ { \"id\": \"dd8f3774e05d42caa53cfbaa7389c08f\", \"distance\": -0.74278724193573, \"metadata\": { \"doc\": \"group: 8 Osmium is the densest naturally occurring element. When experimentally measured using X-ray crystallography, it has a density of 22.59 g/cm3. Manufacturers use its alloys with platinum, iridium, and other platinum-group metals to make fountain pen nib tipping, electrical contacts, and in other applications that require extreme durability and hardness.\", \"group\": \"8\", \"doc\\_id\": \"dd8f3774e05d42caa53cfbaa7389c08f\" } } \\] \\], \"collection\\_name\": \"comments\", \"model\": \"jina-v2\" }\n\n, providing the query string, the collection name, and the embedding model.\n\n*   We'll set `include_metadata` to `True` to include metadata in the response, as the metadata includes the embedded text in the `doc` field.\n*   We'll set `top_k` to 3 to retrieve only the top 3 most similar results.\n\nPython\n\nTypeScript\n\n`   query = QueryVectorStore(    query_strings=[\"a towering shell the size of a city skyscraper\"],    collection_name=\"image_prompt_enhancements\",    model=\"jina-v2\",    include_metadata=True,    top_k=3,    )    query_res = substrate.run(query)    query_out = query_res.get(query)            `\n\nThe output of\n\nQueryVectorStore\n\nQuery a vector store for similar vectors.\n\nExample\n\n[API Reference](https://substrate.run/nodes#QueryVectorStore)\n\nQueryVectorStore( collection\\_name=\"smoke\\_tests\", model=\"jina-v2\", query\\_strings=\\[ \"gas\", \"metal\", \\], top\\_k=1, include\\_metadata=True, )\n\nOutput\n\n{ \"results\": \\[ \\[ { \"id\": \"483e75021c9d4ad69c3d78ace76da2ea\", \"distance\": -0.78324556350708, \"metadata\": { \"doc\": \"group: 18 Argon is the third most abundant gas in Earth's atmosphere, at 0.934% (9340 ppmv). It is more than twice as abundant as water vapor.\", \"group\": \"18\", \"doc\\_id\": \"483e75021c9d4ad69c3d78ace76da2ea\" } } \\], \\[ { \"id\": \"dd8f3774e05d42caa53cfbaa7389c08f\", \"distance\": -0.74278724193573, \"metadata\": { \"doc\": \"group: 8 Osmium is the densest naturally occurring element. When experimentally measured using X-ray crystallography, it has a density of 22.59 g/cm3. Manufacturers use its alloys with platinum, iridium, and other platinum-group metals to make fountain pen nib tipping, electrical contacts, and in other applications that require extreme durability and hardness.\", \"group\": \"8\", \"doc\\_id\": \"dd8f3774e05d42caa53cfbaa7389c08f\" } } \\] \\], \"collection\\_name\": \"comments\", \"model\": \"jina-v2\" }\n\nhas query results in the `results` field, which is a _list of lists_. In this example, it contains a single list of results. If we instead provided two `query_strings`, it would contain two lists of results, one for each query string.\n\nOutput\n\n`   {    \"results\": [    [    {    \"id\": \"079ee5765c8c4df98b50bdb7b5cbdd29\",    \"distance\": -0.723642945289612,    \"vector\": null,    \"metadata\": {    \"doc\": \"cell shaded cartoon\",    \"doc_id\": \"079ee5765c8c4df98b50bdb7b5cbdd29\"    }    },    {    \"id\": \"98ec8bb1da1243d88721645fc0a8899b\",    \"distance\": -0.717301785945892,    \"vector\": null,    \"metadata\": {    \"doc\": \"cinematic\",    \"doc_id\": \"98ec8bb1da1243d88721645fc0a8899b\"    }    },    {    \"id\": \"158f2fc695e648878d245fdf93fa2917\",    \"distance\": -0.715586066246033,    \"vector\": null,    \"metadata\": {    \"doc\": \"wide shot\",    \"doc_id\": \"158f2fc695e648878d245fdf93fa2917\"    }    }    ]    ],    \"collection_name\": null,    \"model\": \"jina-v2\",    \"metric\": \"inner\"    }            `\n\n[Transcribe audio & video](/guides/transcription \"Transcribe audio & video\")\n[Separate foreground & background](/guides/remove-background \"Separate foreground & background\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "metadata": {
      "ogUrl": "https://docs.substrate.run",
      "title": "Vector Stores | Substrate",
      "robots": "index,follow",
      "ogImage": "/og-image-v3.png",
      "ogTitle": "Vector Stores | Substrate",
      "sourceURL": "https://docs.substrate.run/guides/vector-stores",
      "description": "Substrate",
      "ogDescription": "The platform for compound AI. Powerful SDKs, with batteries included: optimized AI models, vector storage, code interpreter, and agentic control flow. Stop using LangChain.",
      "pageStatusCode": 200,
      "ogLocaleAlternate": []
    },
    "linksOnPage": [
      "https://substrate.run",
      "https://docs.substrate.run/",
      "https://substrate.run/nodes",
      "https://substrate.run/pricing",
      "https://substrate.run/company",
      "https://blog.substrate.run",
      "https://docs.substrate.run/overview/setup",
      "https://docs.substrate.run/overview/connecting",
      "https://docs.substrate.run/overview/storing",
      "https://docs.substrate.run/why",
      "https://docs.substrate.run/changelog",
      "https://docs.substrate.run/guides/extract-and-summarize",
      "https://docs.substrate.run/guides/reimagine-a-room",
      "https://docs.substrate.run/guides/transcription",
      "https://docs.substrate.run/guides/vector-stores",
      "https://docs.substrate.run/guides/remove-background",
      "https://docs.substrate.run/guides/masked-image-generation",
      "https://docs.substrate.run/guides/mixture-of-agents",
      "https://docs.substrate.run/reference/api",
      "https://docs.substrate.run/reference/quick",
      "https://docs.substrate.run/reference/box",
      "https://docs.substrate.run/reference/if",
      "https://docs.substrate.run/reference/run-python",
      "https://docs.substrate.run/reference/streaming",
      "https://docs.substrate.run/reference/external-files",
      "https://docs.substrate.run/reference/external-files/s3",
      "https://docs.substrate.run/reference/versioning",
      "https://docs.substrate.run/reference/legal/terms-of-service",
      "https://docs.substrate.run/reference/legal/privacy-policy",
      "https://docs.substrate.run/reference/legal/usage-policy",
      "https://substrate.run/nodes#FindOrCreateVectorStore",
      "https://substrate.run/nodes#EmbedText",
      "https://substrate.run/nodes#QueryVectorStore",
      "https://x.com/substratelabs",
      "https://www.linkedin.com/company/substratelabs",
      "https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA"
    ]
  },
  {
    "content": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nGuides\n\nSeparate foreground & background\n\n֍\n\nGenerate an image, remove the background, and fill the foreground\n\nIn this example, we'll create a branching image generation workflow that:\n\n*   Generates an image using GenerateImage\n    \n    Generate an image.\n    \n    Example\n    \n    [API Reference](https://substrate.run/nodes#GenerateImage)\n    \n    GenerateImage( prompt=\"hokusai futuristic supercell spiral cloud with glowing core over turbulent ocean\", store=\"hosted\", )\n    \n    Output\n    \n    { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\" }\n    \n*   Removes the background from the image using RemoveBackground\n    \n    Remove the background from an image and return the foreground segment as a cut-out or a mask.\n    \n    Example\n    \n    [API Reference](https://substrate.run/nodes#RemoveBackground)\n    \n    RemoveBackground( image\\_uri=\"https://media.substrate.run/apple-forest.jpeg\", store=\"hosted\", )\n    \n    Output\n    \n    { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\" }\n    \n*   Generates a masked foreground from the image using RemoveBackground\n    \n    Remove the background from an image and return the foreground segment as a cut-out or a mask.\n    \n    Example\n    \n    [API Reference](https://substrate.run/nodes#RemoveBackground)\n    \n    RemoveBackground( image\\_uri=\"https://media.substrate.run/apple-forest.jpeg\", store=\"hosted\", )\n    \n    Output\n    \n    { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\" }\n    \n    , with `return_mask` enabled\n*   Fills the masked foreground using EraseImage\n    \n    Erase the masked part of an image, e.g. to remove an object by inpainting.\n    \n    Example\n    \n    [API Reference](https://substrate.run/nodes#EraseImage)\n    \n    EraseImage( image\\_uri=\"https://media.substrate.run/apple-forest.jpeg\", mask\\_image\\_uri=\"https://media.substrate.run/apple-forest-mask.jpeg\", store=\"hosted\", )\n    \n    Output\n    \n    { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\" }\n    \n\nFirst, initialize Substrate:\n\nPython\n\nTypeScript\n\n`   from substrate import (    Substrate,    GenerateImage,    RemoveBackground,    EraseImage,    sb,    )        s = Substrate(api_key=YOUR_API_KEY)            `\n\nCreate and connect four nodes and run them:\n\nPython\n\nTypeScript\n\n`   image = GenerateImage(    prompt=\"a dark red chesterfield leather wing chair in a dark majestic room, pillars, celestial galaxy wallpaper\",    )    bg = RemoveBackground(image_uri=image.future.image_uri)    mask = RemoveBackground(    image_uri=image.future.image_uri,    return_mask=True,    )    erase = EraseImage(    image_uri=image.future.image_uri,    mask_image_uri=mask.future.image_uri,    )    res = s.run(erase)            `\n\n[Run this example](https://explore.substrate.run/s/eNrNlFtv0zAUx7-KZfUxSIOu3dY3JsYugNq1Qkyg6ci1T1MTJ7ZO7HZdle8-OxQWxJAoAmlvORfbv_-5ZMsrq7Dmoy9brhUftWZ_cAJh8GKtr9DwrHXFyDlWSMLjZSlyjG5BeTy35Y5s6XxMEEwJKhihYnKJtUdaaDSKGRR-icTWuspjRGhiumK77FJ8jalaMrK2zJhEk0xhWC6MuNuwtTDGCYfEm4xDvbTBKLDBu-AhN3Yewxs-8hSwyboShgeA80_mbnwYHiVMsbQrPBWyyMmGSnVU6KQKAulkAPR6s1M4n76eXMB4Apdvej2AeMEi-EA4PO6DLQ8-3xzdLHmzJ9dL6A834zMnV_-BawDXi3B9EWarVC7C6K2gFHXxHWUv1FcQPpjJu0Vx-Ih6RqL-ZQT2gzwCdz-HcgbTBJnoYL8LTkC9nVwd3398_wfVv8125zpD_kQbM640ofR6hYnBb1xS60nIJNSSznUFqQbwuzWxDmofW9g-8-2FNrcKxmS8wAjUKVQsnpRY15bS5ngf5_u2-VH_J_r5PAE7vXyegJ1Z-RvAn9f1XwDGeUSVt9MYP3Wl098OdpvUNA9WSOZW)\n\n![image](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Fchesterfield.jpeg&w=640&q=75)\n\n`res.get(image)`\n\n![no background](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Fchesterfield-no-bg.jpeg&w=640&q=75)\n\n`res.get(removeBg)`\n\n![image](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Fchesterfield-mask.jpeg&w=640&q=75)\n\n`res.get(removeBgMask)`\n\n![image](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Fchesterfield-only-bg.jpeg&w=640&q=75)\n\n`res.get(fillMask)`\n\n[Store & query vectors](/guides/vector-stores \"Store & query vectors\")\n[Masked image generation](/guides/masked-image-generation \"Masked image generation\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "markdown": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nGuides\n\nSeparate foreground & background\n\n֍\n\nGenerate an image, remove the background, and fill the foreground\n\nIn this example, we'll create a branching image generation workflow that:\n\n*   Generates an image using GenerateImage\n    \n    Generate an image.\n    \n    Example\n    \n    [API Reference](https://substrate.run/nodes#GenerateImage)\n    \n    GenerateImage( prompt=\"hokusai futuristic supercell spiral cloud with glowing core over turbulent ocean\", store=\"hosted\", )\n    \n    Output\n    \n    { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\" }\n    \n*   Removes the background from the image using RemoveBackground\n    \n    Remove the background from an image and return the foreground segment as a cut-out or a mask.\n    \n    Example\n    \n    [API Reference](https://substrate.run/nodes#RemoveBackground)\n    \n    RemoveBackground( image\\_uri=\"https://media.substrate.run/apple-forest.jpeg\", store=\"hosted\", )\n    \n    Output\n    \n    { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\" }\n    \n*   Generates a masked foreground from the image using RemoveBackground\n    \n    Remove the background from an image and return the foreground segment as a cut-out or a mask.\n    \n    Example\n    \n    [API Reference](https://substrate.run/nodes#RemoveBackground)\n    \n    RemoveBackground( image\\_uri=\"https://media.substrate.run/apple-forest.jpeg\", store=\"hosted\", )\n    \n    Output\n    \n    { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\" }\n    \n    , with `return_mask` enabled\n*   Fills the masked foreground using EraseImage\n    \n    Erase the masked part of an image, e.g. to remove an object by inpainting.\n    \n    Example\n    \n    [API Reference](https://substrate.run/nodes#EraseImage)\n    \n    EraseImage( image\\_uri=\"https://media.substrate.run/apple-forest.jpeg\", mask\\_image\\_uri=\"https://media.substrate.run/apple-forest-mask.jpeg\", store=\"hosted\", )\n    \n    Output\n    \n    { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\" }\n    \n\nFirst, initialize Substrate:\n\nPython\n\nTypeScript\n\n`   from substrate import (    Substrate,    GenerateImage,    RemoveBackground,    EraseImage,    sb,    )        s = Substrate(api_key=YOUR_API_KEY)            `\n\nCreate and connect four nodes and run them:\n\nPython\n\nTypeScript\n\n`   image = GenerateImage(    prompt=\"a dark red chesterfield leather wing chair in a dark majestic room, pillars, celestial galaxy wallpaper\",    )    bg = RemoveBackground(image_uri=image.future.image_uri)    mask = RemoveBackground(    image_uri=image.future.image_uri,    return_mask=True,    )    erase = EraseImage(    image_uri=image.future.image_uri,    mask_image_uri=mask.future.image_uri,    )    res = s.run(erase)            `\n\n[Run this example](https://explore.substrate.run/s/eNrNlFtv0zAUx7-KZfUxSIOu3dY3JsYugNq1Qkyg6ci1T1MTJ7ZO7HZdle8-OxQWxJAoAmlvORfbv_-5ZMsrq7Dmoy9brhUftWZ_cAJh8GKtr9DwrHXFyDlWSMLjZSlyjG5BeTy35Y5s6XxMEEwJKhihYnKJtUdaaDSKGRR-icTWuspjRGhiumK77FJ8jalaMrK2zJhEk0xhWC6MuNuwtTDGCYfEm4xDvbTBKLDBu-AhN3Yewxs-8hSwyboShgeA80_mbnwYHiVMsbQrPBWyyMmGSnVU6KQKAulkAPR6s1M4n76eXMB4Apdvej2AeMEi-EA4PO6DLQ8-3xzdLHmzJ9dL6A834zMnV_-BawDXi3B9EWarVC7C6K2gFHXxHWUv1FcQPpjJu0Vx-Ih6RqL-ZQT2gzwCdz-HcgbTBJnoYL8LTkC9nVwd3398_wfVv8125zpD_kQbM640ofR6hYnBb1xS60nIJNSSznUFqQbwuzWxDmofW9g-8-2FNrcKxmS8wAjUKVQsnpRY15bS5ngf5_u2-VH_J_r5PAE7vXyegJ1Z-RvAn9f1XwDGeUSVt9MYP3Wl098OdpvUNA9WSOZW)\n\n![image](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Fchesterfield.jpeg&w=640&q=75)\n\n`res.get(image)`\n\n![no background](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Fchesterfield-no-bg.jpeg&w=640&q=75)\n\n`res.get(removeBg)`\n\n![image](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Fchesterfield-mask.jpeg&w=640&q=75)\n\n`res.get(removeBgMask)`\n\n![image](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Fchesterfield-only-bg.jpeg&w=640&q=75)\n\n`res.get(fillMask)`\n\n[Store & query vectors](/guides/vector-stores \"Store & query vectors\")\n[Masked image generation](/guides/masked-image-generation \"Masked image generation\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "metadata": {
      "ogUrl": "https://docs.substrate.run",
      "title": "Remove Background | Substrate",
      "robots": "index,follow",
      "ogImage": "/og-image-v3.png",
      "ogTitle": "Remove Background | Substrate",
      "sourceURL": "https://docs.substrate.run/guides/remove-background",
      "description": "Substrate",
      "ogDescription": "The platform for compound AI. Powerful SDKs, with batteries included: optimized AI models, vector storage, code interpreter, and agentic control flow. Stop using LangChain.",
      "pageStatusCode": 200,
      "ogLocaleAlternate": []
    },
    "linksOnPage": [
      "https://substrate.run",
      "https://docs.substrate.run/",
      "https://substrate.run/nodes",
      "https://substrate.run/pricing",
      "https://substrate.run/company",
      "https://blog.substrate.run",
      "https://docs.substrate.run/overview/setup",
      "https://docs.substrate.run/overview/connecting",
      "https://docs.substrate.run/overview/storing",
      "https://docs.substrate.run/why",
      "https://docs.substrate.run/changelog",
      "https://docs.substrate.run/guides/extract-and-summarize",
      "https://docs.substrate.run/guides/reimagine-a-room",
      "https://docs.substrate.run/guides/transcription",
      "https://docs.substrate.run/guides/vector-stores",
      "https://docs.substrate.run/guides/remove-background",
      "https://docs.substrate.run/guides/masked-image-generation",
      "https://docs.substrate.run/guides/mixture-of-agents",
      "https://docs.substrate.run/reference/api",
      "https://docs.substrate.run/reference/quick",
      "https://docs.substrate.run/reference/box",
      "https://docs.substrate.run/reference/if",
      "https://docs.substrate.run/reference/run-python",
      "https://docs.substrate.run/reference/streaming",
      "https://docs.substrate.run/reference/external-files",
      "https://docs.substrate.run/reference/external-files/s3",
      "https://docs.substrate.run/reference/versioning",
      "https://docs.substrate.run/reference/legal/terms-of-service",
      "https://docs.substrate.run/reference/legal/privacy-policy",
      "https://docs.substrate.run/reference/legal/usage-policy",
      "https://substrate.run/nodes#GenerateImage",
      "https://substrate.run/nodes#RemoveBackground",
      "https://substrate.run/nodes#EraseImage",
      "https://explore.substrate.run/s/eNrNlFtv0zAUx7-KZfUxSIOu3dY3JsYugNq1Qkyg6ci1T1MTJ7ZO7HZdle8-OxQWxJAoAmlvORfbv_-5ZMsrq7Dmoy9brhUftWZ_cAJh8GKtr9DwrHXFyDlWSMLjZSlyjG5BeTy35Y5s6XxMEEwJKhihYnKJtUdaaDSKGRR-icTWuspjRGhiumK77FJ8jalaMrK2zJhEk0xhWC6MuNuwtTDGCYfEm4xDvbTBKLDBu-AhN3Yewxs-8hSwyboShgeA80_mbnwYHiVMsbQrPBWyyMmGSnVU6KQKAulkAPR6s1M4n76eXMB4Apdvej2AeMEi-EA4PO6DLQ8-3xzdLHmzJ9dL6A834zMnV_-BawDXi3B9EWarVC7C6K2gFHXxHWUv1FcQPpjJu0Vx-Ih6RqL-ZQT2gzwCdz-HcgbTBJnoYL8LTkC9nVwd3398_wfVv8125zpD_kQbM640ofR6hYnBb1xS60nIJNSSznUFqQbwuzWxDmofW9g-8-2FNrcKxmS8wAjUKVQsnpRY15bS5ngf5_u2-VH_J_r5PAE7vXyegJ1Z-RvAn9f1XwDGeUSVt9MYP3Wl098OdpvUNA9WSOZW",
      "https://x.com/substratelabs",
      "https://www.linkedin.com/company/substratelabs",
      "https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA"
    ]
  },
  {
    "content": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nOn This Page\n\n*   [1\\. Generate illusions](#1-generate-illusions)\n    \n*   [2\\. Generate a variation and inpaint](#2-generate-a-variation-and-inpaint)\n    \n\nGuides\n\nMasked image generation\n\n֍\n\nUse a mask to generate images\n\nIn this example, we'll generate a mask from a logo image with\n\nRemoveBackground\n\nRemove the background from an image and return the foreground segment as a cut-out or a mask.\n\nExample\n\n[API Reference](https://substrate.run/nodes#RemoveBackground)\n\nRemoveBackground( image\\_uri=\"https://media.substrate.run/apple-forest.jpeg\", store=\"hosted\", )\n\nOutput\n\n{ \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\" }\n\n, and use that mask to generate variations of the image using two workflows:\n\n1.  Using StableDiffusionXLControlNet\n    \n    Generate an image with generation structured by an input image, using Stable Diffusion XL with [ControlNet](https://arxiv.org/abs/2302.05543)\n    .\n    \n    Example\n    \n    [API Reference](https://substrate.run/nodes#StableDiffusionXLControlNet)\n    \n    StableDiffusionXLControlNet( image\\_uri=\"https://media.substrate.run/spiral-logo.jpeg\", prompt=\"the futuristic solarpunk city of atlantis at sunset, cinematic bokeh HD\", control\\_method=\"illusion\", conditioning\\_scale=1.0, strength=1.0, store=\"hosted\", num\\_images=2, seeds=\\[ 1607226, 1720395, \\], )\n    \n    Output\n    \n    { \"outputs\": \\[ { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\", \"seed\": 1607266 }, { \"image\\_uri\": \"https://assets.substrate.run/48484848.jpg\", \"seed\": 1720398 } \\] }\n    \n    with the `illusion` method to generate illusions incorporating the mask.\n2.  Using StableDiffusionXLControlNet\n    \n    Generate an image with generation structured by an input image, using Stable Diffusion XL with [ControlNet](https://arxiv.org/abs/2302.05543)\n    .\n    \n    Example\n    \n    [API Reference](https://substrate.run/nodes#StableDiffusionXLControlNet)\n    \n    StableDiffusionXLControlNet( image\\_uri=\"https://media.substrate.run/spiral-logo.jpeg\", prompt=\"the futuristic solarpunk city of atlantis at sunset, cinematic bokeh HD\", control\\_method=\"illusion\", conditioning\\_scale=1.0, strength=1.0, store=\"hosted\", num\\_images=2, seeds=\\[ 1607226, 1720395, \\], )\n    \n    Output\n    \n    { \"outputs\": \\[ { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\", \"seed\": 1607266 }, { \"image\\_uri\": \"https://assets.substrate.run/48484848.jpg\", \"seed\": 1720398 } \\] }\n    \n    with the `edge` method followed by StableDiffusionXLInpaint\n    \n    Edit an image using [Stable Diffusion XL](https://arxiv.org/abs/2307.01952)\n    . Supports inpainting (edit part of the image with a mask) and image-to-image (edit the full image).\n    \n    Example\n    \n    [API Reference](https://substrate.run/nodes#StableDiffusionXLInpaint)\n    \n    StableDiffusionXLInpaint( image\\_uri=\"https://media.substrate.run/docs-klimt-park.jpg\", mask\\_image\\_uri=\"https://media.substrate.run/spiral-logo.jpeg\", prompt=\"large tropical colorful bright birds in a jungle, high resolution oil painting\", negative\\_prompt=\"dark, cartoon, anime\", strength=0.8, num\\_images=2, store=\"hosted\", seeds=\\[ 1607280, 1720395, \\], )\n    \n    Output\n    \n    { \"outputs\": \\[ { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\", \"seed\": 1607326 }, { \"image\\_uri\": \"https://assets.substrate.run/48484848.jpg\", \"seed\": 1720398 } \\] }\n    \n    to fill a mask with content and then generate inside the mask.\n\nFirst, initialize Substrate:\n\nPython\n\nTypeScript\n\n`   from substrate import (    Substrate,    RemoveBackground,    StableDiffusionXLControlNet,    StableDiffusionXLInpaint,    )        s = Substrate(api_key=YOUR_API_KEY)            `\n\nHere's the original image:\n\n![original](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Flogo-sq.png&w=640&q=75)\n\n### 1\\. Generate illusions[](#1-generate-illusions)\n\nThis workflow uses\n\nRemoveBackground\n\nRemove the background from an image and return the foreground segment as a cut-out or a mask.\n\nExample\n\n[API Reference](https://substrate.run/nodes#RemoveBackground)\n\nRemoveBackground( image\\_uri=\"https://media.substrate.run/apple-forest.jpeg\", store=\"hosted\", )\n\nOutput\n\n{ \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\" }\n\nto generate a mask, followed by StableDiffusionXLControlNet\n\nGenerate an image with generation structured by an input image, using Stable Diffusion XL with [ControlNet](https://arxiv.org/abs/2302.05543)\n.\n\nExample\n\n[API Reference](https://substrate.run/nodes#StableDiffusionXLControlNet)\n\nStableDiffusionXLControlNet( image\\_uri=\"https://media.substrate.run/spiral-logo.jpeg\", prompt=\"the futuristic solarpunk city of atlantis at sunset, cinematic bokeh HD\", control\\_method=\"illusion\", conditioning\\_scale=1.0, strength=1.0, store=\"hosted\", num\\_images=2, seeds=\\[ 1607226, 1720395, \\], )\n\nOutput\n\n{ \"outputs\": \\[ { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\", \"seed\": 1607266 }, { \"image\\_uri\": \"https://assets.substrate.run/48484848.jpg\", \"seed\": 1720398 } \\] }\n\nwith the `illusion` method to generate a two images incorporating the mask into a view of the ocean from above:\n\nPython\n\nTypeScript\n\n`   mask = RemoveBackground(image_uri=\"https://media.substrate.run/logo-sq.png\", return_mask=True)    controlnet = StableDiffusionXLControlNet(    image_uri=mask.future.image_uri,    control_method=\"illusion\",    conditioning_scale=1,    prompt=\"sunlit bright birds-eye view of the ocean, turbulent choppy waves\",    num_images=2,    )    res = s.run(controlnet)            `\n\n![image](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Fillusion-1.jpg&w=640&q=75)\n\n![no background](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Fillusion-2.jpg&w=640&q=75)\n\nExperimenting with different prompts can produce striking results:\n\n![image](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Flogo-atlantis-1.jpg&w=640&q=75)\n\n![no background](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Flogo-atlantis-2.jpg&w=640&q=75)\n\n### 2\\. Generate a variation and inpaint[](#2-generate-a-variation-and-inpaint)\n\nThis workflow uses\n\nStableDiffusionXLControlNet\n\nGenerate an image with generation structured by an input image, using Stable Diffusion XL with [ControlNet](https://arxiv.org/abs/2302.05543)\n.\n\nExample\n\n[API Reference](https://substrate.run/nodes#StableDiffusionXLControlNet)\n\nStableDiffusionXLControlNet( image\\_uri=\"https://media.substrate.run/spiral-logo.jpeg\", prompt=\"the futuristic solarpunk city of atlantis at sunset, cinematic bokeh HD\", control\\_method=\"illusion\", conditioning\\_scale=1.0, strength=1.0, store=\"hosted\", num\\_images=2, seeds=\\[ 1607226, 1720395, \\], )\n\nOutput\n\n{ \"outputs\": \\[ { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\", \"seed\": 1607266 }, { \"image\\_uri\": \"https://assets.substrate.run/48484848.jpg\", \"seed\": 1720398 } \\] }\n\nto generate a variation of the original, and StableDiffusionXLInpaint\n\nEdit an image using [Stable Diffusion XL](https://arxiv.org/abs/2307.01952)\n. Supports inpainting (edit part of the image with a mask) and image-to-image (edit the full image).\n\nExample\n\n[API Reference](https://substrate.run/nodes#StableDiffusionXLInpaint)\n\nStableDiffusionXLInpaint( image\\_uri=\"https://media.substrate.run/docs-klimt-park.jpg\", mask\\_image\\_uri=\"https://media.substrate.run/spiral-logo.jpeg\", prompt=\"large tropical colorful bright birds in a jungle, high resolution oil painting\", negative\\_prompt=\"dark, cartoon, anime\", strength=0.8, num\\_images=2, store=\"hosted\", seeds=\\[ 1607280, 1720395, \\], )\n\nOutput\n\n{ \"outputs\": \\[ { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\", \"seed\": 1607326 }, { \"image\\_uri\": \"https://assets.substrate.run/48484848.jpg\", \"seed\": 1720398 } \\] }\n\nto generate a variation inpainting inside a mask.\n\nPython\n\nTypeScript\n\n`   original = \"https://media.substrate.run/logo-nopad-bg-white.png\"    controlnet = StableDiffusionXLControlNet(    image_uri=original,    control_method=\"depth\",    prompt=\"silver disco ball, 4k\",    conditioning_scale=0.8,    num_images=1,    )    inpaint = StableDiffusionXLInpaint(    image_uri=controlnet.future.outputs[0].image_uri,    mask_image_uri=mask.future.image_uri,    prompt=\"towers in the futuristic ancient solarpunk city of atlantis\",    num_images=1,    )    res = s.run(inpaint)            `\n\n![image](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Fex-controlnet.jpeg&w=640&q=75)\n\n`res.get(controlnet)`\n\n![no background](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Fex-cn-inpaint.webp&w=640&q=75)\n\n`res.get(inpaint)`\n\n[Separate foreground & background](/guides/remove-background \"Separate foreground & background\")\n[Mixture of Agents](/guides/mixture-of-agents \"Mixture of Agents\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "markdown": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nOn This Page\n\n*   [1\\. Generate illusions](#1-generate-illusions)\n    \n*   [2\\. Generate a variation and inpaint](#2-generate-a-variation-and-inpaint)\n    \n\nGuides\n\nMasked image generation\n\n֍\n\nUse a mask to generate images\n\nIn this example, we'll generate a mask from a logo image with\n\nRemoveBackground\n\nRemove the background from an image and return the foreground segment as a cut-out or a mask.\n\nExample\n\n[API Reference](https://substrate.run/nodes#RemoveBackground)\n\nRemoveBackground( image\\_uri=\"https://media.substrate.run/apple-forest.jpeg\", store=\"hosted\", )\n\nOutput\n\n{ \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\" }\n\n, and use that mask to generate variations of the image using two workflows:\n\n1.  Using StableDiffusionXLControlNet\n    \n    Generate an image with generation structured by an input image, using Stable Diffusion XL with [ControlNet](https://arxiv.org/abs/2302.05543)\n    .\n    \n    Example\n    \n    [API Reference](https://substrate.run/nodes#StableDiffusionXLControlNet)\n    \n    StableDiffusionXLControlNet( image\\_uri=\"https://media.substrate.run/spiral-logo.jpeg\", prompt=\"the futuristic solarpunk city of atlantis at sunset, cinematic bokeh HD\", control\\_method=\"illusion\", conditioning\\_scale=1.0, strength=1.0, store=\"hosted\", num\\_images=2, seeds=\\[ 1607226, 1720395, \\], )\n    \n    Output\n    \n    { \"outputs\": \\[ { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\", \"seed\": 1607266 }, { \"image\\_uri\": \"https://assets.substrate.run/48484848.jpg\", \"seed\": 1720398 } \\] }\n    \n    with the `illusion` method to generate illusions incorporating the mask.\n2.  Using StableDiffusionXLControlNet\n    \n    Generate an image with generation structured by an input image, using Stable Diffusion XL with [ControlNet](https://arxiv.org/abs/2302.05543)\n    .\n    \n    Example\n    \n    [API Reference](https://substrate.run/nodes#StableDiffusionXLControlNet)\n    \n    StableDiffusionXLControlNet( image\\_uri=\"https://media.substrate.run/spiral-logo.jpeg\", prompt=\"the futuristic solarpunk city of atlantis at sunset, cinematic bokeh HD\", control\\_method=\"illusion\", conditioning\\_scale=1.0, strength=1.0, store=\"hosted\", num\\_images=2, seeds=\\[ 1607226, 1720395, \\], )\n    \n    Output\n    \n    { \"outputs\": \\[ { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\", \"seed\": 1607266 }, { \"image\\_uri\": \"https://assets.substrate.run/48484848.jpg\", \"seed\": 1720398 } \\] }\n    \n    with the `edge` method followed by StableDiffusionXLInpaint\n    \n    Edit an image using [Stable Diffusion XL](https://arxiv.org/abs/2307.01952)\n    . Supports inpainting (edit part of the image with a mask) and image-to-image (edit the full image).\n    \n    Example\n    \n    [API Reference](https://substrate.run/nodes#StableDiffusionXLInpaint)\n    \n    StableDiffusionXLInpaint( image\\_uri=\"https://media.substrate.run/docs-klimt-park.jpg\", mask\\_image\\_uri=\"https://media.substrate.run/spiral-logo.jpeg\", prompt=\"large tropical colorful bright birds in a jungle, high resolution oil painting\", negative\\_prompt=\"dark, cartoon, anime\", strength=0.8, num\\_images=2, store=\"hosted\", seeds=\\[ 1607280, 1720395, \\], )\n    \n    Output\n    \n    { \"outputs\": \\[ { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\", \"seed\": 1607326 }, { \"image\\_uri\": \"https://assets.substrate.run/48484848.jpg\", \"seed\": 1720398 } \\] }\n    \n    to fill a mask with content and then generate inside the mask.\n\nFirst, initialize Substrate:\n\nPython\n\nTypeScript\n\n`   from substrate import (    Substrate,    RemoveBackground,    StableDiffusionXLControlNet,    StableDiffusionXLInpaint,    )        s = Substrate(api_key=YOUR_API_KEY)            `\n\nHere's the original image:\n\n![original](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Flogo-sq.png&w=640&q=75)\n\n### 1\\. Generate illusions[](#1-generate-illusions)\n\nThis workflow uses\n\nRemoveBackground\n\nRemove the background from an image and return the foreground segment as a cut-out or a mask.\n\nExample\n\n[API Reference](https://substrate.run/nodes#RemoveBackground)\n\nRemoveBackground( image\\_uri=\"https://media.substrate.run/apple-forest.jpeg\", store=\"hosted\", )\n\nOutput\n\n{ \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\" }\n\nto generate a mask, followed by StableDiffusionXLControlNet\n\nGenerate an image with generation structured by an input image, using Stable Diffusion XL with [ControlNet](https://arxiv.org/abs/2302.05543)\n.\n\nExample\n\n[API Reference](https://substrate.run/nodes#StableDiffusionXLControlNet)\n\nStableDiffusionXLControlNet( image\\_uri=\"https://media.substrate.run/spiral-logo.jpeg\", prompt=\"the futuristic solarpunk city of atlantis at sunset, cinematic bokeh HD\", control\\_method=\"illusion\", conditioning\\_scale=1.0, strength=1.0, store=\"hosted\", num\\_images=2, seeds=\\[ 1607226, 1720395, \\], )\n\nOutput\n\n{ \"outputs\": \\[ { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\", \"seed\": 1607266 }, { \"image\\_uri\": \"https://assets.substrate.run/48484848.jpg\", \"seed\": 1720398 } \\] }\n\nwith the `illusion` method to generate a two images incorporating the mask into a view of the ocean from above:\n\nPython\n\nTypeScript\n\n`   mask = RemoveBackground(image_uri=\"https://media.substrate.run/logo-sq.png\", return_mask=True)    controlnet = StableDiffusionXLControlNet(    image_uri=mask.future.image_uri,    control_method=\"illusion\",    conditioning_scale=1,    prompt=\"sunlit bright birds-eye view of the ocean, turbulent choppy waves\",    num_images=2,    )    res = s.run(controlnet)            `\n\n![image](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Fillusion-1.jpg&w=640&q=75)\n\n![no background](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Fillusion-2.jpg&w=640&q=75)\n\nExperimenting with different prompts can produce striking results:\n\n![image](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Flogo-atlantis-1.jpg&w=640&q=75)\n\n![no background](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Flogo-atlantis-2.jpg&w=640&q=75)\n\n### 2\\. Generate a variation and inpaint[](#2-generate-a-variation-and-inpaint)\n\nThis workflow uses\n\nStableDiffusionXLControlNet\n\nGenerate an image with generation structured by an input image, using Stable Diffusion XL with [ControlNet](https://arxiv.org/abs/2302.05543)\n.\n\nExample\n\n[API Reference](https://substrate.run/nodes#StableDiffusionXLControlNet)\n\nStableDiffusionXLControlNet( image\\_uri=\"https://media.substrate.run/spiral-logo.jpeg\", prompt=\"the futuristic solarpunk city of atlantis at sunset, cinematic bokeh HD\", control\\_method=\"illusion\", conditioning\\_scale=1.0, strength=1.0, store=\"hosted\", num\\_images=2, seeds=\\[ 1607226, 1720395, \\], )\n\nOutput\n\n{ \"outputs\": \\[ { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\", \"seed\": 1607266 }, { \"image\\_uri\": \"https://assets.substrate.run/48484848.jpg\", \"seed\": 1720398 } \\] }\n\nto generate a variation of the original, and StableDiffusionXLInpaint\n\nEdit an image using [Stable Diffusion XL](https://arxiv.org/abs/2307.01952)\n. Supports inpainting (edit part of the image with a mask) and image-to-image (edit the full image).\n\nExample\n\n[API Reference](https://substrate.run/nodes#StableDiffusionXLInpaint)\n\nStableDiffusionXLInpaint( image\\_uri=\"https://media.substrate.run/docs-klimt-park.jpg\", mask\\_image\\_uri=\"https://media.substrate.run/spiral-logo.jpeg\", prompt=\"large tropical colorful bright birds in a jungle, high resolution oil painting\", negative\\_prompt=\"dark, cartoon, anime\", strength=0.8, num\\_images=2, store=\"hosted\", seeds=\\[ 1607280, 1720395, \\], )\n\nOutput\n\n{ \"outputs\": \\[ { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\", \"seed\": 1607326 }, { \"image\\_uri\": \"https://assets.substrate.run/48484848.jpg\", \"seed\": 1720398 } \\] }\n\nto generate a variation inpainting inside a mask.\n\nPython\n\nTypeScript\n\n`   original = \"https://media.substrate.run/logo-nopad-bg-white.png\"    controlnet = StableDiffusionXLControlNet(    image_uri=original,    control_method=\"depth\",    prompt=\"silver disco ball, 4k\",    conditioning_scale=0.8,    num_images=1,    )    inpaint = StableDiffusionXLInpaint(    image_uri=controlnet.future.outputs[0].image_uri,    mask_image_uri=mask.future.image_uri,    prompt=\"towers in the futuristic ancient solarpunk city of atlantis\",    num_images=1,    )    res = s.run(inpaint)            `\n\n![image](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Fex-controlnet.jpeg&w=640&q=75)\n\n`res.get(controlnet)`\n\n![no background](https://docs.substrate.run/_next/image?url=https%3A%2F%2Fmedia.substrate.run%2Fex-cn-inpaint.webp&w=640&q=75)\n\n`res.get(inpaint)`\n\n[Separate foreground & background](/guides/remove-background \"Separate foreground & background\")\n[Mixture of Agents](/guides/mixture-of-agents \"Mixture of Agents\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "metadata": {
      "ogUrl": "https://docs.substrate.run",
      "title": "Masked Image Generation | Substrate",
      "robots": "index,follow",
      "ogImage": "/og-image-v3.png",
      "ogTitle": "Masked Image Generation | Substrate",
      "sourceURL": "https://docs.substrate.run/guides/masked-image-generation",
      "description": "Substrate",
      "ogDescription": "The platform for compound AI. Powerful SDKs, with batteries included: optimized AI models, vector storage, code interpreter, and agentic control flow. Stop using LangChain.",
      "pageStatusCode": 200,
      "ogLocaleAlternate": []
    },
    "linksOnPage": [
      "https://substrate.run",
      "https://docs.substrate.run/",
      "https://substrate.run/nodes",
      "https://substrate.run/pricing",
      "https://substrate.run/company",
      "https://blog.substrate.run",
      "https://docs.substrate.run/overview/setup",
      "https://docs.substrate.run/overview/connecting",
      "https://docs.substrate.run/overview/storing",
      "https://docs.substrate.run/why",
      "https://docs.substrate.run/changelog",
      "https://docs.substrate.run/guides/extract-and-summarize",
      "https://docs.substrate.run/guides/reimagine-a-room",
      "https://docs.substrate.run/guides/transcription",
      "https://docs.substrate.run/guides/vector-stores",
      "https://docs.substrate.run/guides/remove-background",
      "https://docs.substrate.run/guides/masked-image-generation",
      "https://docs.substrate.run/guides/mixture-of-agents",
      "https://docs.substrate.run/reference/api",
      "https://docs.substrate.run/reference/quick",
      "https://docs.substrate.run/reference/box",
      "https://docs.substrate.run/reference/if",
      "https://docs.substrate.run/reference/run-python",
      "https://docs.substrate.run/reference/streaming",
      "https://docs.substrate.run/reference/external-files",
      "https://docs.substrate.run/reference/external-files/s3",
      "https://docs.substrate.run/reference/versioning",
      "https://docs.substrate.run/reference/legal/terms-of-service",
      "https://docs.substrate.run/reference/legal/privacy-policy",
      "https://docs.substrate.run/reference/legal/usage-policy",
      "https://substrate.run/nodes#RemoveBackground",
      "https://arxiv.org/abs/2302.05543",
      "https://substrate.run/nodes#StableDiffusionXLControlNet",
      "https://arxiv.org/abs/2307.01952",
      "https://substrate.run/nodes#StableDiffusionXLInpaint",
      "https://x.com/substratelabs",
      "https://www.linkedin.com/company/substratelabs",
      "https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA"
    ]
  },
  {
    "content": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nGuides\n\nMixture of Agents\n\n֍\n\nLearn how to implement Mixture of Agents\n\nLanguage models can perform better on tasks when given the opportunity to reflect on a proposed response. \"Mixture of Agents\" is a pattern (coined [by Together AI (opens in a new tab)](https://www.together.ai/blog/together-moa)\n) in which multiple different LLMs propose responses, and subsequent LLM steps evaluate and synthesize those responses into a single improved response.\n\n`propose`\n\nComputeText\n\n`propose`\n\nComputeText\n\n`propose`\n\nComputeText\n\n`evaluate`\n\nComputeText\n\n`summarize`\n\nComputeText\n\nPress enter or space to select a node.You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.\n\nPress enter or space to select an edge. You can then press delete to remove it or escape to cancel.\n\nThis pattern is simple to implement with Substrate, automatically parallelized, and easy to extend.\n\nTypeScript\n\nPython\n\n``   const substrate = new Substrate({ apiKey: SUBSTRATE_API_KEY });        const prompt = \"write me a summary of don quixote\";    const mist = new ComputeText({ prompt: prompt, model: \"Mistral7BInstruct\" });    const llama = new ComputeText({ prompt: prompt, model: \"Llama3Instruct8B\" });    const mixt = new ComputeText({ prompt: prompt, model: \"Mixtral8x7BInstruct\" });    const reasoning = new ComputeText({    prompt: sb.interpolate`Reason about the strengths and weaknesses of each response. Explain which elements from each response are superior.    PROMPT: ${prompt}    CANDIDATE RESPONSES:    1) ${mist.future.text}    2) ${llama.future.text}    3) ${mixt.future.text}`,    });    const answer = new ComputeText({    prompt: sb.interpolate`Come up with one detailed, comprehensive, unified response using the best parts of the candidate responses, based on the evaluation. Return only the response, do not reveal the process (do not say candidate response or evaluation).    PROMPT: ${prompt}    CANDIDATE RESPONSES:    1) ${mist.future.text}    2) ${llama.future.text}    3) ${mixt.future.text}    EVALUATION: ${reasoning.future.text}`,    });        const res = await substrate.run(answer);    console.log(res.get(answer).text);            ``\n\n[Masked image generation](/guides/masked-image-generation \"Masked image generation\")\n[API design](/reference/api \"API design\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "markdown": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nGuides\n\nMixture of Agents\n\n֍\n\nLearn how to implement Mixture of Agents\n\nLanguage models can perform better on tasks when given the opportunity to reflect on a proposed response. \"Mixture of Agents\" is a pattern (coined [by Together AI (opens in a new tab)](https://www.together.ai/blog/together-moa)\n) in which multiple different LLMs propose responses, and subsequent LLM steps evaluate and synthesize those responses into a single improved response.\n\n`propose`\n\nComputeText\n\n`propose`\n\nComputeText\n\n`propose`\n\nComputeText\n\n`evaluate`\n\nComputeText\n\n`summarize`\n\nComputeText\n\nPress enter or space to select a node.You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.\n\nPress enter or space to select an edge. You can then press delete to remove it or escape to cancel.\n\nThis pattern is simple to implement with Substrate, automatically parallelized, and easy to extend.\n\nTypeScript\n\nPython\n\n``   const substrate = new Substrate({ apiKey: SUBSTRATE_API_KEY });        const prompt = \"write me a summary of don quixote\";    const mist = new ComputeText({ prompt: prompt, model: \"Mistral7BInstruct\" });    const llama = new ComputeText({ prompt: prompt, model: \"Llama3Instruct8B\" });    const mixt = new ComputeText({ prompt: prompt, model: \"Mixtral8x7BInstruct\" });    const reasoning = new ComputeText({    prompt: sb.interpolate`Reason about the strengths and weaknesses of each response. Explain which elements from each response are superior.    PROMPT: ${prompt}    CANDIDATE RESPONSES:    1) ${mist.future.text}    2) ${llama.future.text}    3) ${mixt.future.text}`,    });    const answer = new ComputeText({    prompt: sb.interpolate`Come up with one detailed, comprehensive, unified response using the best parts of the candidate responses, based on the evaluation. Return only the response, do not reveal the process (do not say candidate response or evaluation).    PROMPT: ${prompt}    CANDIDATE RESPONSES:    1) ${mist.future.text}    2) ${llama.future.text}    3) ${mixt.future.text}    EVALUATION: ${reasoning.future.text}`,    });        const res = await substrate.run(answer);    console.log(res.get(answer).text);            ``\n\n[Masked image generation](/guides/masked-image-generation \"Masked image generation\")\n[API design](/reference/api \"API design\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "metadata": {
      "ogUrl": "https://docs.substrate.run",
      "title": "Mixture of Agents | Substrate",
      "robots": "index,follow",
      "ogImage": "/og-image-v3.png",
      "ogTitle": "Mixture of Agents | Substrate",
      "sourceURL": "https://docs.substrate.run/guides/mixture-of-agents",
      "description": "Substrate",
      "ogDescription": "The platform for compound AI. Powerful SDKs, with batteries included: optimized AI models, vector storage, code interpreter, and agentic control flow. Stop using LangChain.",
      "pageStatusCode": 200,
      "ogLocaleAlternate": []
    },
    "linksOnPage": [
      "https://substrate.run",
      "https://docs.substrate.run/",
      "https://substrate.run/nodes",
      "https://substrate.run/pricing",
      "https://substrate.run/company",
      "https://blog.substrate.run",
      "https://docs.substrate.run/overview/setup",
      "https://docs.substrate.run/overview/connecting",
      "https://docs.substrate.run/overview/storing",
      "https://docs.substrate.run/why",
      "https://docs.substrate.run/changelog",
      "https://docs.substrate.run/guides/extract-and-summarize",
      "https://docs.substrate.run/guides/reimagine-a-room",
      "https://docs.substrate.run/guides/transcription",
      "https://docs.substrate.run/guides/vector-stores",
      "https://docs.substrate.run/guides/remove-background",
      "https://docs.substrate.run/guides/masked-image-generation",
      "https://docs.substrate.run/guides/mixture-of-agents",
      "https://docs.substrate.run/reference/api",
      "https://docs.substrate.run/reference/quick",
      "https://docs.substrate.run/reference/box",
      "https://docs.substrate.run/reference/if",
      "https://docs.substrate.run/reference/run-python",
      "https://docs.substrate.run/reference/streaming",
      "https://docs.substrate.run/reference/external-files",
      "https://docs.substrate.run/reference/external-files/s3",
      "https://docs.substrate.run/reference/versioning",
      "https://docs.substrate.run/reference/legal/terms-of-service",
      "https://docs.substrate.run/reference/legal/privacy-policy",
      "https://docs.substrate.run/reference/legal/usage-policy",
      "https://www.together.ai/blog/together-moa",
      "https://x.com/substratelabs",
      "https://www.linkedin.com/company/substratelabs",
      "https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA"
    ]
  },
  {
    "content": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nOn This Page\n\n*   [Nodes](#nodes)\n    \n*   [Philosophy](#philosophy)\n    \n\nReference\n\nAPI design\n\n֍\n\nOur API design principles\n\nThe Substrate API consists of a carefully curated, well-abstracted library of components: **nodes**.\n\nNodes[](#nodes)\n\n----------------\n\n[Nodes (opens in a new tab)](https://substrate.run/nodes)\n are designed following these principles:\n\n1\n\n**High-level nodes** like\n\nComputeText\n\nCompute text using a language model.\n\nExample\n\n[API Reference](https://substrate.run/nodes#ComputeText)\n\nComputeText( prompt=\"Who is Don Quixote?\", temperature=0.4, max\\_tokens=800, )\n\nOutput\n\n{ \"text\": \"Don Quixote is a fictional character in the novel of the same name by Miguel de Cervantes.\" }\n\nprovide an **accessible, general interface** for common operations.\n\n*   For example, `ComputeText` is for invoking a language model with text (and optional images) and receiving text.\n\nHigh-level nodes default to using a low-cost smaller model. As we release more capable models, we will automatically upgrade high level nodes to use the best option at equivalent cost. You can pin a specific model using the [`model` (opens in a new tab)](https://www.substrate.run/nodes#ComputeText-model)\n parameter.\n\n2\n\nThe function of each node is **focused** in order to **simplify inputs and outputs**.\n\n*   Most language model APIs follow the OpenAI [completions (opens in a new tab)](https://platform.openai.com/docs/api-reference/completions)\n     format, with output `text` nested inside an array of `choices` objects. But advanced usage patterns should never make the simple pattern more complex.\n*   On Substrate, the output of ComputeText\n    \n    Compute text using a language model.\n    \n    Example\n    \n    [API Reference](https://substrate.run/nodes#ComputeText)\n    \n    ComputeText( prompt=\"Who is Don Quixote?\", temperature=0.4, max\\_tokens=800, )\n    \n    Output\n    \n    { \"text\": \"Don Quixote is a fictional character in the novel of the same name by Miguel de Cervantes.\" }\n    \n    is simply `text`.\n*   To generate multiple output choices for a prompt, use MultiComputeText\n    \n    Generate multiple text choices using a language model.\n    \n    Example\n    \n    [API Reference](https://substrate.run/nodes#MultiComputeText)\n    \n    MultiComputeText( prompt=\"Who is Don Quixote?\", num\\_choices=2, max\\_tokens=800, )\n    \n    Output\n    \n    { \"choices\": \\[ { \"text\": \"Don Quixote is a fictional character and the protagonist of the novel Don Quixote by Miguel...\" }, { \"text\": \"Don Quixote is a fictional character created by the Spanish author Miguel de Cervantes...\" } \\] }\n    \n    .\n*   To process multiple prompts in batch with higher throughput, use BatchComputeText\n    \n    Compute text for multiple prompts in batch using a language model.\n    \n    Example\n    \n    [API Reference](https://substrate.run/nodes#BatchComputeText)\n    \n    BatchComputeText( prompts=\\[ \"Who is Don Quixote?\", \"Who is Sancho Panza?\", \\], max\\_tokens=800, )\n    \n    Output\n    \n    { \"outputs\": \\[ { \"text\": \"Don Quixote is a fictional character and the protagonist of the novel Don Quixote by Miguel...\" }, { \"text\": \"Don Quixote is a fictional character created by the Spanish author Miguel de Cervantes...\" } \\] }\n    \n    .\n*   The `Multi` and `Batch` pattern is used throughout the library.\n\n3\n\n**Low-level nodes** expose additional implementation-specific parameters.\n\n*   When there is no clear unifying abstraction, only a low-level node is provided. For example, StableDiffusionXLControlNet\n    \n    Generate an image with generation structured by an input image, using Stable Diffusion XL with [ControlNet](https://arxiv.org/abs/2302.05543)\n    .\n    \n    Example\n    \n    [API Reference](https://substrate.run/nodes#StableDiffusionXLControlNet)\n    \n    StableDiffusionXLControlNet( image\\_uri=\"https://media.substrate.run/spiral-logo.jpeg\", prompt=\"the futuristic solarpunk city of atlantis at sunset, cinematic bokeh HD\", control\\_method=\"illusion\", conditioning\\_scale=1.0, strength=1.0, store=\"hosted\", num\\_images=2, seeds=\\[ 1607226, 1720395, \\], )\n    \n    Output\n    \n    { \"outputs\": \\[ { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\", \"seed\": 1607266 }, { \"image\\_uri\": \"https://assets.substrate.run/48484848.jpg\", \"seed\": 1720398 } \\] }\n    \n    is a specific way to generate images structured by another image.\n*   When there is only one available implementation, only a high-level node is provided. For example, UpscaleImage\n    \n    Upscale an image using image generation.\n    \n    Example\n    \n    [API Reference](https://substrate.run/nodes#UpscaleImage)\n    \n    UpscaleImage( prompt=\"high resolution detailed spiral shell\", image\\_uri=\"https://media.substrate.run/docs-shell-emoji.jpg\", store=\"hosted\", )\n    \n    Output\n    \n    { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\" }\n    \n    only upscales images using a tiled control net method. When we add additional upscaling methods, we'll introduce low-level nodes.\n\nIf you are using a high-level node pinned to specific model, you can pass any of the pinned model's parameters through the high-level node:\n\n`   ComputeText(    prompt=\"tell me a story\",    model=\"Llama3Instruct8B\",    presence_penalty=2,    )            `\n\n֍\n\nWe plan to introduce a higher level layer distilling common subgraph patterns, and a lower level layer that enables disaggregated inference and deeper exploration.\n\nPhilosophy[](#philosophy)\n\n--------------------------\n\nUnix is one of the most enduring environments for programming, in large part due to its elegant abstractions grounded in a simple modular philosophy:\n\n> *   Make each program do one thing well.\n> *   Expect the output of every program to become the input to another, as yet unknown, program. Don't clutter output with extraneous information.\n\nSubstrate is grounded in the same modular approach, and these core beliefs:\n\n*   Enduring abstractions and infrastructure must be built with each other in mind.\n*   Complexity must be progressively revealed.\n\n[Mixture of Agents](/guides/mixture-of-agents \"Mixture of Agents\")\n[Quick reference](/reference/quick \"Quick reference\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "markdown": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nOn This Page\n\n*   [Nodes](#nodes)\n    \n*   [Philosophy](#philosophy)\n    \n\nReference\n\nAPI design\n\n֍\n\nOur API design principles\n\nThe Substrate API consists of a carefully curated, well-abstracted library of components: **nodes**.\n\nNodes[](#nodes)\n\n----------------\n\n[Nodes (opens in a new tab)](https://substrate.run/nodes)\n are designed following these principles:\n\n1\n\n**High-level nodes** like\n\nComputeText\n\nCompute text using a language model.\n\nExample\n\n[API Reference](https://substrate.run/nodes#ComputeText)\n\nComputeText( prompt=\"Who is Don Quixote?\", temperature=0.4, max\\_tokens=800, )\n\nOutput\n\n{ \"text\": \"Don Quixote is a fictional character in the novel of the same name by Miguel de Cervantes.\" }\n\nprovide an **accessible, general interface** for common operations.\n\n*   For example, `ComputeText` is for invoking a language model with text (and optional images) and receiving text.\n\nHigh-level nodes default to using a low-cost smaller model. As we release more capable models, we will automatically upgrade high level nodes to use the best option at equivalent cost. You can pin a specific model using the [`model` (opens in a new tab)](https://www.substrate.run/nodes#ComputeText-model)\n parameter.\n\n2\n\nThe function of each node is **focused** in order to **simplify inputs and outputs**.\n\n*   Most language model APIs follow the OpenAI [completions (opens in a new tab)](https://platform.openai.com/docs/api-reference/completions)\n     format, with output `text` nested inside an array of `choices` objects. But advanced usage patterns should never make the simple pattern more complex.\n*   On Substrate, the output of ComputeText\n    \n    Compute text using a language model.\n    \n    Example\n    \n    [API Reference](https://substrate.run/nodes#ComputeText)\n    \n    ComputeText( prompt=\"Who is Don Quixote?\", temperature=0.4, max\\_tokens=800, )\n    \n    Output\n    \n    { \"text\": \"Don Quixote is a fictional character in the novel of the same name by Miguel de Cervantes.\" }\n    \n    is simply `text`.\n*   To generate multiple output choices for a prompt, use MultiComputeText\n    \n    Generate multiple text choices using a language model.\n    \n    Example\n    \n    [API Reference](https://substrate.run/nodes#MultiComputeText)\n    \n    MultiComputeText( prompt=\"Who is Don Quixote?\", num\\_choices=2, max\\_tokens=800, )\n    \n    Output\n    \n    { \"choices\": \\[ { \"text\": \"Don Quixote is a fictional character and the protagonist of the novel Don Quixote by Miguel...\" }, { \"text\": \"Don Quixote is a fictional character created by the Spanish author Miguel de Cervantes...\" } \\] }\n    \n    .\n*   To process multiple prompts in batch with higher throughput, use BatchComputeText\n    \n    Compute text for multiple prompts in batch using a language model.\n    \n    Example\n    \n    [API Reference](https://substrate.run/nodes#BatchComputeText)\n    \n    BatchComputeText( prompts=\\[ \"Who is Don Quixote?\", \"Who is Sancho Panza?\", \\], max\\_tokens=800, )\n    \n    Output\n    \n    { \"outputs\": \\[ { \"text\": \"Don Quixote is a fictional character and the protagonist of the novel Don Quixote by Miguel...\" }, { \"text\": \"Don Quixote is a fictional character created by the Spanish author Miguel de Cervantes...\" } \\] }\n    \n    .\n*   The `Multi` and `Batch` pattern is used throughout the library.\n\n3\n\n**Low-level nodes** expose additional implementation-specific parameters.\n\n*   When there is no clear unifying abstraction, only a low-level node is provided. For example, StableDiffusionXLControlNet\n    \n    Generate an image with generation structured by an input image, using Stable Diffusion XL with [ControlNet](https://arxiv.org/abs/2302.05543)\n    .\n    \n    Example\n    \n    [API Reference](https://substrate.run/nodes#StableDiffusionXLControlNet)\n    \n    StableDiffusionXLControlNet( image\\_uri=\"https://media.substrate.run/spiral-logo.jpeg\", prompt=\"the futuristic solarpunk city of atlantis at sunset, cinematic bokeh HD\", control\\_method=\"illusion\", conditioning\\_scale=1.0, strength=1.0, store=\"hosted\", num\\_images=2, seeds=\\[ 1607226, 1720395, \\], )\n    \n    Output\n    \n    { \"outputs\": \\[ { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\", \"seed\": 1607266 }, { \"image\\_uri\": \"https://assets.substrate.run/48484848.jpg\", \"seed\": 1720398 } \\] }\n    \n    is a specific way to generate images structured by another image.\n*   When there is only one available implementation, only a high-level node is provided. For example, UpscaleImage\n    \n    Upscale an image using image generation.\n    \n    Example\n    \n    [API Reference](https://substrate.run/nodes#UpscaleImage)\n    \n    UpscaleImage( prompt=\"high resolution detailed spiral shell\", image\\_uri=\"https://media.substrate.run/docs-shell-emoji.jpg\", store=\"hosted\", )\n    \n    Output\n    \n    { \"image\\_uri\": \"https://assets.substrate.run/84848484.jpg\" }\n    \n    only upscales images using a tiled control net method. When we add additional upscaling methods, we'll introduce low-level nodes.\n\nIf you are using a high-level node pinned to specific model, you can pass any of the pinned model's parameters through the high-level node:\n\n`   ComputeText(    prompt=\"tell me a story\",    model=\"Llama3Instruct8B\",    presence_penalty=2,    )            `\n\n֍\n\nWe plan to introduce a higher level layer distilling common subgraph patterns, and a lower level layer that enables disaggregated inference and deeper exploration.\n\nPhilosophy[](#philosophy)\n\n--------------------------\n\nUnix is one of the most enduring environments for programming, in large part due to its elegant abstractions grounded in a simple modular philosophy:\n\n> *   Make each program do one thing well.\n> *   Expect the output of every program to become the input to another, as yet unknown, program. Don't clutter output with extraneous information.\n\nSubstrate is grounded in the same modular approach, and these core beliefs:\n\n*   Enduring abstractions and infrastructure must be built with each other in mind.\n*   Complexity must be progressively revealed.\n\n[Mixture of Agents](/guides/mixture-of-agents \"Mixture of Agents\")\n[Quick reference](/reference/quick \"Quick reference\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "metadata": {
      "ogUrl": "https://docs.substrate.run",
      "title": "API | Substrate",
      "robots": "index,follow",
      "ogImage": "/og-image-v3.png",
      "ogTitle": "API | Substrate",
      "sourceURL": "https://docs.substrate.run/reference/api",
      "description": "Substrate",
      "ogDescription": "The platform for compound AI. Powerful SDKs, with batteries included: optimized AI models, vector storage, code interpreter, and agentic control flow. Stop using LangChain.",
      "pageStatusCode": 200,
      "ogLocaleAlternate": []
    },
    "linksOnPage": [
      "https://substrate.run",
      "https://docs.substrate.run/",
      "https://substrate.run/nodes",
      "https://substrate.run/pricing",
      "https://substrate.run/company",
      "https://blog.substrate.run",
      "https://docs.substrate.run/overview/setup",
      "https://docs.substrate.run/overview/connecting",
      "https://docs.substrate.run/overview/storing",
      "https://docs.substrate.run/why",
      "https://docs.substrate.run/changelog",
      "https://docs.substrate.run/guides/extract-and-summarize",
      "https://docs.substrate.run/guides/reimagine-a-room",
      "https://docs.substrate.run/guides/transcription",
      "https://docs.substrate.run/guides/vector-stores",
      "https://docs.substrate.run/guides/remove-background",
      "https://docs.substrate.run/guides/masked-image-generation",
      "https://docs.substrate.run/guides/mixture-of-agents",
      "https://docs.substrate.run/reference/api",
      "https://docs.substrate.run/reference/quick",
      "https://docs.substrate.run/reference/box",
      "https://docs.substrate.run/reference/if",
      "https://docs.substrate.run/reference/run-python",
      "https://docs.substrate.run/reference/streaming",
      "https://docs.substrate.run/reference/external-files",
      "https://docs.substrate.run/reference/external-files/s3",
      "https://docs.substrate.run/reference/versioning",
      "https://docs.substrate.run/reference/legal/terms-of-service",
      "https://docs.substrate.run/reference/legal/privacy-policy",
      "https://docs.substrate.run/reference/legal/usage-policy",
      "https://substrate.run/nodes#ComputeText",
      "https://www.substrate.run/nodes#ComputeText-model",
      "https://platform.openai.com/docs/api-reference/completions",
      "https://substrate.run/nodes#MultiComputeText",
      "https://substrate.run/nodes#BatchComputeText",
      "https://arxiv.org/abs/2302.05543",
      "https://substrate.run/nodes#StableDiffusionXLControlNet",
      "https://substrate.run/nodes#UpscaleImage",
      "https://x.com/substratelabs",
      "https://www.linkedin.com/company/substratelabs",
      "https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA"
    ]
  },
  {
    "content": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nOn This Page\n\n*   [Connecting text nodes](#connecting-text-nodes)\n    \n*   [Generating JSON](#generating-json)\n    \n*   [Running custom code](#running-custom-code)\n    \n\nReference\n\nQuick reference\n\n֍\n\nA concise collection of usage examples\n\n#### Connecting text nodes[](#connecting-text-nodes)\n\nTypeScript\n\nPython\n\n``   import { Substrate, ComputeText, sb } from \"substrate\";        // 1) Initialize Substrate    const s = new Substrate({ apiKey: YOUR_API_KEY });        // 2) Construct a graph    const a = new ComputeText({ prompt: \"tell me a story\" });    // use sb.concat to join a list of static or future strings    const b = new ComputeText({ prompt: sb.concat(\"summarize: \", a.future.text) });    const cs = [];    [1, 2].forEach((i) => {    cs.push(    new ComputeText({    // or sb.interpolate to use a template string    prompt: sb.interpolate`summarize: ${b.future.text}`,    }),    );    });        // 3) Call run with terminal nodes    const res = await s.run(...cs);        // 4) Get the output of nodes    console.log(res.get(b).text); // summary    console.log(res.get(cs[0]).text); // summary of summary    console.log(res.get(cs[1]).text); // alternate summary of summary            ``\n\n#### Generating JSON[](#generating-json)\n\nTypeScript\n\nPython\n\n`   import { Substrate, ComputeJSON, sb } from \"substrate\";    import { z } from \"zod\";    import { zodToJsonSchema } from \"zod-to-json-schema\";        const bookInfo = z.object({    author: z.string().describe(\"The book's author.\"),    characters: z.array(z.string()).describe(\"List of main characters.\"),    });        const a = new ComputeJSON({    prompt: \"Tell me the author and two main characters of Don Quixote\",    json_schema: zodToJsonSchema(bookInfo),    });    const b = ComputeText({    prompt: sb.concat(\"Tell me about \", a.future.json_object.get(\"author\")),    });    const c = ComputeText({    prompt: sb.concat(    \"Tell me about \",    a.future.json_object.get(\"characters\").at(0),    ),    });            `\n\n#### Running custom code[](#running-custom-code)\n\nPython\n\n`   def markdown(url: str):    import requests    from bs4 import BeautifulSoup    from markdownify import markdownify        res = requests.get(url)    soup = BeautifulSoup(res.content, \"html.parser\")    return markdownify(str(soup))        md = RunPython(    function=markdown,    kwargs={    \"url\": \"https://metrograph.com/film/?vista_film_id=9999001208\",    },    pip_install=[\"requests\", \"beautifulsoup4\", \"markdownify\"],    )    res = substrate.run(md)    out = res.get(md)    print(out.output)            `\n\n[API design](/reference/api \"API design\")\n[Box](/reference/box \"Box\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "markdown": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nOn This Page\n\n*   [Connecting text nodes](#connecting-text-nodes)\n    \n*   [Generating JSON](#generating-json)\n    \n*   [Running custom code](#running-custom-code)\n    \n\nReference\n\nQuick reference\n\n֍\n\nA concise collection of usage examples\n\n#### Connecting text nodes[](#connecting-text-nodes)\n\nTypeScript\n\nPython\n\n``   import { Substrate, ComputeText, sb } from \"substrate\";        // 1) Initialize Substrate    const s = new Substrate({ apiKey: YOUR_API_KEY });        // 2) Construct a graph    const a = new ComputeText({ prompt: \"tell me a story\" });    // use sb.concat to join a list of static or future strings    const b = new ComputeText({ prompt: sb.concat(\"summarize: \", a.future.text) });    const cs = [];    [1, 2].forEach((i) => {    cs.push(    new ComputeText({    // or sb.interpolate to use a template string    prompt: sb.interpolate`summarize: ${b.future.text}`,    }),    );    });        // 3) Call run with terminal nodes    const res = await s.run(...cs);        // 4) Get the output of nodes    console.log(res.get(b).text); // summary    console.log(res.get(cs[0]).text); // summary of summary    console.log(res.get(cs[1]).text); // alternate summary of summary            ``\n\n#### Generating JSON[](#generating-json)\n\nTypeScript\n\nPython\n\n`   import { Substrate, ComputeJSON, sb } from \"substrate\";    import { z } from \"zod\";    import { zodToJsonSchema } from \"zod-to-json-schema\";        const bookInfo = z.object({    author: z.string().describe(\"The book's author.\"),    characters: z.array(z.string()).describe(\"List of main characters.\"),    });        const a = new ComputeJSON({    prompt: \"Tell me the author and two main characters of Don Quixote\",    json_schema: zodToJsonSchema(bookInfo),    });    const b = ComputeText({    prompt: sb.concat(\"Tell me about \", a.future.json_object.get(\"author\")),    });    const c = ComputeText({    prompt: sb.concat(    \"Tell me about \",    a.future.json_object.get(\"characters\").at(0),    ),    });            `\n\n#### Running custom code[](#running-custom-code)\n\nPython\n\n`   def markdown(url: str):    import requests    from bs4 import BeautifulSoup    from markdownify import markdownify        res = requests.get(url)    soup = BeautifulSoup(res.content, \"html.parser\")    return markdownify(str(soup))        md = RunPython(    function=markdown,    kwargs={    \"url\": \"https://metrograph.com/film/?vista_film_id=9999001208\",    },    pip_install=[\"requests\", \"beautifulsoup4\", \"markdownify\"],    )    res = substrate.run(md)    out = res.get(md)    print(out.output)            `\n\n[API design](/reference/api \"API design\")\n[Box](/reference/box \"Box\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "metadata": {
      "ogUrl": "https://docs.substrate.run",
      "title": "Quick | Substrate",
      "robots": "index,follow",
      "ogImage": "/og-image-v3.png",
      "ogTitle": "Quick | Substrate",
      "sourceURL": "https://docs.substrate.run/reference/quick",
      "description": "Substrate",
      "ogDescription": "The platform for compound AI. Powerful SDKs, with batteries included: optimized AI models, vector storage, code interpreter, and agentic control flow. Stop using LangChain.",
      "pageStatusCode": 200,
      "ogLocaleAlternate": []
    },
    "linksOnPage": [
      "https://substrate.run",
      "https://docs.substrate.run/",
      "https://substrate.run/nodes",
      "https://substrate.run/pricing",
      "https://substrate.run/company",
      "https://blog.substrate.run",
      "https://docs.substrate.run/overview/setup",
      "https://docs.substrate.run/overview/connecting",
      "https://docs.substrate.run/overview/storing",
      "https://docs.substrate.run/why",
      "https://docs.substrate.run/changelog",
      "https://docs.substrate.run/guides/extract-and-summarize",
      "https://docs.substrate.run/guides/reimagine-a-room",
      "https://docs.substrate.run/guides/transcription",
      "https://docs.substrate.run/guides/vector-stores",
      "https://docs.substrate.run/guides/remove-background",
      "https://docs.substrate.run/guides/masked-image-generation",
      "https://docs.substrate.run/guides/mixture-of-agents",
      "https://docs.substrate.run/reference/api",
      "https://docs.substrate.run/reference/quick",
      "https://docs.substrate.run/reference/box",
      "https://docs.substrate.run/reference/if",
      "https://docs.substrate.run/reference/run-python",
      "https://docs.substrate.run/reference/streaming",
      "https://docs.substrate.run/reference/external-files",
      "https://docs.substrate.run/reference/external-files/s3",
      "https://docs.substrate.run/reference/versioning",
      "https://docs.substrate.run/reference/legal/terms-of-service",
      "https://docs.substrate.run/reference/legal/privacy-policy",
      "https://docs.substrate.run/reference/legal/usage-policy",
      "https://x.com/substratelabs",
      "https://www.linkedin.com/company/substratelabs",
      "https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA"
    ]
  },
  {
    "content": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nReference\n\nBox\n\n[`Box` (opens in a new tab)](https://substrate.run/nodes#Box)\n combines multiple values into a single output. It accepts a dictionary as input, and simply returns the evaluated dictionary – including the result of any future references.\n\nPython\n\nTypeScript\n\n`   from substrate import Substrate, ComputeText, Box        story = ComputeText(prompt=\"tell me a story\")    summary = ComputeText(prompt=sb.concat(\"summarize this: \", story.future.text))    box = Box(    value={    \"story\": story.future.text,    \"summary\": summary.future.text,    }    )    res = substrate.run(box)            `\n\nThis example shows how `Box` can be used to combine multiple node outputs into a single result at the end of a graph – but `Box` can also be used to combine outputs in the middle of a graph.\n\n[Quick reference](/reference/quick \"Quick reference\")\n[If](/reference/if \"If\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "markdown": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nReference\n\nBox\n\n[`Box` (opens in a new tab)](https://substrate.run/nodes#Box)\n combines multiple values into a single output. It accepts a dictionary as input, and simply returns the evaluated dictionary – including the result of any future references.\n\nPython\n\nTypeScript\n\n`   from substrate import Substrate, ComputeText, Box        story = ComputeText(prompt=\"tell me a story\")    summary = ComputeText(prompt=sb.concat(\"summarize this: \", story.future.text))    box = Box(    value={    \"story\": story.future.text,    \"summary\": summary.future.text,    }    )    res = substrate.run(box)            `\n\nThis example shows how `Box` can be used to combine multiple node outputs into a single result at the end of a graph – but `Box` can also be used to combine outputs in the middle of a graph.\n\n[Quick reference](/reference/quick \"Quick reference\")\n[If](/reference/if \"If\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "metadata": {
      "ogUrl": "https://docs.substrate.run",
      "title": "Box | Substrate",
      "robots": "index,follow",
      "ogImage": "/og-image-v3.png",
      "ogTitle": "Box | Substrate",
      "sourceURL": "https://docs.substrate.run/reference/box",
      "description": "Substrate",
      "ogDescription": "The platform for compound AI. Powerful SDKs, with batteries included: optimized AI models, vector storage, code interpreter, and agentic control flow. Stop using LangChain.",
      "pageStatusCode": 200,
      "ogLocaleAlternate": []
    },
    "linksOnPage": [
      "https://substrate.run",
      "https://docs.substrate.run/",
      "https://substrate.run/nodes",
      "https://substrate.run/pricing",
      "https://substrate.run/company",
      "https://blog.substrate.run",
      "https://docs.substrate.run/overview/setup",
      "https://docs.substrate.run/overview/connecting",
      "https://docs.substrate.run/overview/storing",
      "https://docs.substrate.run/why",
      "https://docs.substrate.run/changelog",
      "https://docs.substrate.run/guides/extract-and-summarize",
      "https://docs.substrate.run/guides/reimagine-a-room",
      "https://docs.substrate.run/guides/transcription",
      "https://docs.substrate.run/guides/vector-stores",
      "https://docs.substrate.run/guides/remove-background",
      "https://docs.substrate.run/guides/masked-image-generation",
      "https://docs.substrate.run/guides/mixture-of-agents",
      "https://docs.substrate.run/reference/api",
      "https://docs.substrate.run/reference/quick",
      "https://docs.substrate.run/reference/box",
      "https://docs.substrate.run/reference/if",
      "https://docs.substrate.run/reference/run-python",
      "https://docs.substrate.run/reference/streaming",
      "https://docs.substrate.run/reference/external-files",
      "https://docs.substrate.run/reference/external-files/s3",
      "https://docs.substrate.run/reference/versioning",
      "https://docs.substrate.run/reference/legal/terms-of-service",
      "https://docs.substrate.run/reference/legal/privacy-policy",
      "https://docs.substrate.run/reference/legal/usage-policy",
      "https://substrate.run/nodes#Box",
      "https://x.com/substratelabs",
      "https://www.linkedin.com/company/substratelabs",
      "https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA"
    ]
  },
  {
    "content": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nReference\n\nIf\n\nUse [`If` (opens in a new tab)](https://substrate.run/nodes#If)\n to return one of two options based on a condition. This example summarizes using bullets if the input is longer than 800 characters.\n\nPython\n\nTypeScript\n\n`   from substrate import Substrate, ComputeText, If, sb        idea = ComputeText(prompt=\"Give me a unique startup idea\")    bullets = ComputeText(    prompt=sb.concat(\"Summarize in bullets: \", idea.future.text),    )    full = ComputeText(    prompt=sb.concat(\"Summarize: \", idea.future.text),    )    summary = If(    condition=sb.jq(idea.future.text, \"length > 800\"),    value_if_true=bullets.future.text,    value_if_false=full.future.text,    )            `\n\nSimilar to an `if` `else` statement, the second option is not required. If only one option is provided and the condition is not met, `If` returns a `null` result.\n\n[Box](/reference/box \"Box\")\n[RunPython](/reference/run-python \"RunPython\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "markdown": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nReference\n\nIf\n\nUse [`If` (opens in a new tab)](https://substrate.run/nodes#If)\n to return one of two options based on a condition. This example summarizes using bullets if the input is longer than 800 characters.\n\nPython\n\nTypeScript\n\n`   from substrate import Substrate, ComputeText, If, sb        idea = ComputeText(prompt=\"Give me a unique startup idea\")    bullets = ComputeText(    prompt=sb.concat(\"Summarize in bullets: \", idea.future.text),    )    full = ComputeText(    prompt=sb.concat(\"Summarize: \", idea.future.text),    )    summary = If(    condition=sb.jq(idea.future.text, \"length > 800\"),    value_if_true=bullets.future.text,    value_if_false=full.future.text,    )            `\n\nSimilar to an `if` `else` statement, the second option is not required. If only one option is provided and the condition is not met, `If` returns a `null` result.\n\n[Box](/reference/box \"Box\")\n[RunPython](/reference/run-python \"RunPython\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "metadata": {
      "ogUrl": "https://docs.substrate.run",
      "title": "If | Substrate",
      "robots": "index,follow",
      "ogImage": "/og-image-v3.png",
      "ogTitle": "If | Substrate",
      "sourceURL": "https://docs.substrate.run/reference/if",
      "description": "Substrate",
      "ogDescription": "The platform for compound AI. Powerful SDKs, with batteries included: optimized AI models, vector storage, code interpreter, and agentic control flow. Stop using LangChain.",
      "pageStatusCode": 200,
      "ogLocaleAlternate": []
    },
    "linksOnPage": [
      "https://substrate.run",
      "https://docs.substrate.run/",
      "https://substrate.run/nodes",
      "https://substrate.run/pricing",
      "https://substrate.run/company",
      "https://blog.substrate.run",
      "https://docs.substrate.run/overview/setup",
      "https://docs.substrate.run/overview/connecting",
      "https://docs.substrate.run/overview/storing",
      "https://docs.substrate.run/why",
      "https://docs.substrate.run/changelog",
      "https://docs.substrate.run/guides/extract-and-summarize",
      "https://docs.substrate.run/guides/reimagine-a-room",
      "https://docs.substrate.run/guides/transcription",
      "https://docs.substrate.run/guides/vector-stores",
      "https://docs.substrate.run/guides/remove-background",
      "https://docs.substrate.run/guides/masked-image-generation",
      "https://docs.substrate.run/guides/mixture-of-agents",
      "https://docs.substrate.run/reference/api",
      "https://docs.substrate.run/reference/quick",
      "https://docs.substrate.run/reference/box",
      "https://docs.substrate.run/reference/if",
      "https://docs.substrate.run/reference/run-python",
      "https://docs.substrate.run/reference/streaming",
      "https://docs.substrate.run/reference/external-files",
      "https://docs.substrate.run/reference/external-files/s3",
      "https://docs.substrate.run/reference/versioning",
      "https://docs.substrate.run/reference/legal/terms-of-service",
      "https://docs.substrate.run/reference/legal/privacy-policy",
      "https://docs.substrate.run/reference/legal/usage-policy",
      "https://substrate.run/nodes#If",
      "https://x.com/substratelabs",
      "https://www.linkedin.com/company/substratelabs",
      "https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA"
    ]
  },
  {
    "content": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nReference\n\nRunPython\n\n֍\n\nRun custom code using `RunPython`\n\nSubstrate has a built-in Python sandbox, which you can use to run custom Python code on Substrate. Similar functionality for the TypeScript SDK is coming soon.\n\nIn the Python SDK, create a `RunPython` node with:\n\n*   `function` – The function to run remotely.\n*   `kwargs` – Keyword arguments to your function. This can include future references to the output of previous nodes.\n\n`   start = 1            def add(n: int):    print(\"hello\")    return start + n            add1 = RunPython(    function=add,    kwargs={\"n\": 1},    )    add2 = RunPython(    function=add,    kwargs={\"n\": add1.future.output},    )    res = substrate.run(add1, add2)    add1_out = res.get(add1)    print(add1_out.output) # 2    add2_out = res.get(add2)    print(add2_out.output) # 3    print(add2_out.stdout) # hello            `\n\nAny outputs printed to stdout are returned in the `stdout` field. If your code does not run successfully, the contents of stderr are returned in the `stderr` field.\n\nSubstrate's code interpreter runs Python in a sandbox with network access. You can add packages to the sandbox by passing a list of Python dependencies to `pip_install`.\n\n`   def markdown(url: str):    import requests    from bs4 import BeautifulSoup    from markdownify import markdownify        res = requests.get(url)    soup = BeautifulSoup(res.content, \"html.parser\")    return markdownify(str(soup))        md = RunPython(    function=markdown,    kwargs={    \"url\": \"https://metrograph.com/film/?vista_film_id=9999001208\",    },    pip_install=[\"requests\", \"beautifulsoup4\", \"markdownify\"],    )    res = substrate.run(md)    out = res.get(md)    print(out.output) # (markdown content of the web page)            `\n\nHere, we define a local function `markdown` that retrieves the markdown content of a web page. Then, we run the function remotely on Substrate using `RunPython`.\n\n[If](/reference/if \"If\")\n[Streaming](/reference/streaming \"Streaming\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "markdown": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nReference\n\nRunPython\n\n֍\n\nRun custom code using `RunPython`\n\nSubstrate has a built-in Python sandbox, which you can use to run custom Python code on Substrate. Similar functionality for the TypeScript SDK is coming soon.\n\nIn the Python SDK, create a `RunPython` node with:\n\n*   `function` – The function to run remotely.\n*   `kwargs` – Keyword arguments to your function. This can include future references to the output of previous nodes.\n\n`   start = 1            def add(n: int):    print(\"hello\")    return start + n            add1 = RunPython(    function=add,    kwargs={\"n\": 1},    )    add2 = RunPython(    function=add,    kwargs={\"n\": add1.future.output},    )    res = substrate.run(add1, add2)    add1_out = res.get(add1)    print(add1_out.output) # 2    add2_out = res.get(add2)    print(add2_out.output) # 3    print(add2_out.stdout) # hello            `\n\nAny outputs printed to stdout are returned in the `stdout` field. If your code does not run successfully, the contents of stderr are returned in the `stderr` field.\n\nSubstrate's code interpreter runs Python in a sandbox with network access. You can add packages to the sandbox by passing a list of Python dependencies to `pip_install`.\n\n`   def markdown(url: str):    import requests    from bs4 import BeautifulSoup    from markdownify import markdownify        res = requests.get(url)    soup = BeautifulSoup(res.content, \"html.parser\")    return markdownify(str(soup))        md = RunPython(    function=markdown,    kwargs={    \"url\": \"https://metrograph.com/film/?vista_film_id=9999001208\",    },    pip_install=[\"requests\", \"beautifulsoup4\", \"markdownify\"],    )    res = substrate.run(md)    out = res.get(md)    print(out.output) # (markdown content of the web page)            `\n\nHere, we define a local function `markdown` that retrieves the markdown content of a web page. Then, we run the function remotely on Substrate using `RunPython`.\n\n[If](/reference/if \"If\")\n[Streaming](/reference/streaming \"Streaming\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "metadata": {
      "ogUrl": "https://docs.substrate.run",
      "title": "Run Python | Substrate",
      "robots": "index,follow",
      "ogImage": "/og-image-v3.png",
      "ogTitle": "Run Python | Substrate",
      "sourceURL": "https://docs.substrate.run/reference/run-python",
      "description": "Substrate",
      "ogDescription": "The platform for compound AI. Powerful SDKs, with batteries included: optimized AI models, vector storage, code interpreter, and agentic control flow. Stop using LangChain.",
      "pageStatusCode": 200,
      "ogLocaleAlternate": []
    },
    "linksOnPage": [
      "https://substrate.run",
      "https://docs.substrate.run/",
      "https://substrate.run/nodes",
      "https://substrate.run/pricing",
      "https://substrate.run/company",
      "https://blog.substrate.run",
      "https://docs.substrate.run/overview/setup",
      "https://docs.substrate.run/overview/connecting",
      "https://docs.substrate.run/overview/storing",
      "https://docs.substrate.run/why",
      "https://docs.substrate.run/changelog",
      "https://docs.substrate.run/guides/extract-and-summarize",
      "https://docs.substrate.run/guides/reimagine-a-room",
      "https://docs.substrate.run/guides/transcription",
      "https://docs.substrate.run/guides/vector-stores",
      "https://docs.substrate.run/guides/remove-background",
      "https://docs.substrate.run/guides/masked-image-generation",
      "https://docs.substrate.run/guides/mixture-of-agents",
      "https://docs.substrate.run/reference/api",
      "https://docs.substrate.run/reference/quick",
      "https://docs.substrate.run/reference/box",
      "https://docs.substrate.run/reference/if",
      "https://docs.substrate.run/reference/run-python",
      "https://docs.substrate.run/reference/streaming",
      "https://docs.substrate.run/reference/external-files",
      "https://docs.substrate.run/reference/external-files/s3",
      "https://docs.substrate.run/reference/versioning",
      "https://docs.substrate.run/reference/legal/terms-of-service",
      "https://docs.substrate.run/reference/legal/privacy-policy",
      "https://docs.substrate.run/reference/legal/usage-policy",
      "https://x.com/substratelabs",
      "https://www.linkedin.com/company/substratelabs",
      "https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA"
    ]
  },
  {
    "content": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nOn This Page\n\n*   [Server](#server)\n    \n*   [Forward to client](#forward-to-client)\n    \n*   [Client](#client)\n    \n*   [Streaming Event Types](#streaming-event-types)\n    \n*   [node.result](#noderesult)\n    \n*   [node.error](#nodeerror)\n    \n*   [node.delta](#nodedelta)\n    \n*   [graph.result](#graphresult)\n    \n\nReference\n\nStreaming\n\n֍\n\nReceive streaming outputs\n\nWhen streaming, Substrate returns individual node outputs as they complete, as well as incremental chunks from nodes that support streaming. The stream ends with the full graph result.\n\nSubstrate uses Server-Sent Events (SSE) to stream results and each event may contain the following:\n\n*   `node.result`: Completed result of a node.\n*   `node.delta`: Incremental chunks of output from a running node.\n*   `node.error`: Error encountered when running a node.\n*   `graph.result`: The full result of the completed graph run.\n\nServer[](#server)\n\n------------------\n\nTo stream results from a graph run, call `substrate.stream` instead of `substrate.run`:\n\nTypeScript\n\nPython\n\n`   const stream = await substrate.stream(story, summary);            `\n\nDepending on your use case, you can continue to work with the streaming response in your server-side code.\n\nYou can also forward the streaming response directly to your client, and work with the streaming response client-side.\n\n### Forward to client[](#forward-to-client)\n\nTo forward a streaming response, return the stream's `apiResponse.body` in your API response with `Content-Type` `text/event-stream`:\n\nNext.jsNode.jsFastAPI\n\napi/endpoint/route.ts\n\n`   export async function POST(request: Request) {    // ...    const body = stream.apiResponse.body;    return new Response(body, {    headers: { \"Content-Type\": \"text/event-stream\" },    });    }            `\n\nClient[](#client)\n\n------------------\n\nTo handle a forwarded streaming response in client-side JavaScript, use `sb.streaming.fromSSEResponse` to turn the response into an async iterator.\n\nexample.tsx\n\n``   \"use client\";        import { useState } from \"react\";    import { sb } from \"substrate\";        export default function Demo() {    const [output, setOutput] = useState<any[]>([]);    const [text, setText] = useState<string>(\"\");        async function submitPrompt(event: any) {    event.preventDefault();        const request = new Request(\"/api/endpoint\", {    method: \"POST\",    body: new FormData(event.currentTarget),    });    const response = await fetch(request);        if (response.ok) {    setOutput([]);    setText(\"\");        const stream = await sb.streaming.fromSSEResponse(response);        for await (let message of stream) {    // node.result is received after a node runs    // it contains the node's output in the `data` field    if (message.object === \"node.result\") {    setOutput((state) => [...state, message.data.json_object]);    }    // node.delta is received when a node outputs incremental data    if (message.object === \"node.delta\") {    setText((state) => state + message.data.choices.item.text);    }    }    }    }    // ...    }            ``\n\nStreaming Event Types[](#streaming-event-types)\n\n------------------------------------------------\n\n### `node.result`[](#noderesult)\n\nContains the entire node's output. Sent as soon as the node completes.\n\n`   {    object: \"node.result\";    nodeId: string;    data: $NodeOutput;    }            `\n\n### `node.error`[](#nodeerror)\n\nContains an error that occured during a node's run.\n\n`   {    object: \"node.error\";    nodeId: string;    data: {    type: \"api_error\" | \"invalid_request_error\" | \"dependency_error\";    message: string;    }    }            `\n\n### `node.delta`[](#nodedelta)\n\nFor nodes that support streaming chunks, delta events are used. These events contain partial results in the same structure as the node's output with one difference: if a field is an array, it contains an `array.item` structure that describes the array item and which index it belongs to.\n\n`   {    object: \"node.delta\";    nodeId: string;    data: $NodeOutputChunk;    }            `\n\nThe `array.item` object:\n\n`   {    object: \"array.item\";    index: number;    item: $NodeOutputArrayItem; // value of the array item    }            `\n\n### `graph.result`[](#graphresult)\n\nWhen the graph run completes the entire graph result is sent as a final message.\n\n`   {    object: \"graph.result\";    data: $GraphResult; // contains results from all nodes in the graph    }            `\n\n[RunPython](/reference/run-python \"RunPython\")\n[External files](/reference/external-files \"External files\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "markdown": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nOn This Page\n\n*   [Server](#server)\n    \n*   [Forward to client](#forward-to-client)\n    \n*   [Client](#client)\n    \n*   [Streaming Event Types](#streaming-event-types)\n    \n*   [node.result](#noderesult)\n    \n*   [node.error](#nodeerror)\n    \n*   [node.delta](#nodedelta)\n    \n*   [graph.result](#graphresult)\n    \n\nReference\n\nStreaming\n\n֍\n\nReceive streaming outputs\n\nWhen streaming, Substrate returns individual node outputs as they complete, as well as incremental chunks from nodes that support streaming. The stream ends with the full graph result.\n\nSubstrate uses Server-Sent Events (SSE) to stream results and each event may contain the following:\n\n*   `node.result`: Completed result of a node.\n*   `node.delta`: Incremental chunks of output from a running node.\n*   `node.error`: Error encountered when running a node.\n*   `graph.result`: The full result of the completed graph run.\n\nServer[](#server)\n\n------------------\n\nTo stream results from a graph run, call `substrate.stream` instead of `substrate.run`:\n\nTypeScript\n\nPython\n\n`   const stream = await substrate.stream(story, summary);            `\n\nDepending on your use case, you can continue to work with the streaming response in your server-side code.\n\nYou can also forward the streaming response directly to your client, and work with the streaming response client-side.\n\n### Forward to client[](#forward-to-client)\n\nTo forward a streaming response, return the stream's `apiResponse.body` in your API response with `Content-Type` `text/event-stream`:\n\nNext.jsNode.jsFastAPI\n\napi/endpoint/route.ts\n\n`   export async function POST(request: Request) {    // ...    const body = stream.apiResponse.body;    return new Response(body, {    headers: { \"Content-Type\": \"text/event-stream\" },    });    }            `\n\nClient[](#client)\n\n------------------\n\nTo handle a forwarded streaming response in client-side JavaScript, use `sb.streaming.fromSSEResponse` to turn the response into an async iterator.\n\nexample.tsx\n\n``   \"use client\";        import { useState } from \"react\";    import { sb } from \"substrate\";        export default function Demo() {    const [output, setOutput] = useState<any[]>([]);    const [text, setText] = useState<string>(\"\");        async function submitPrompt(event: any) {    event.preventDefault();        const request = new Request(\"/api/endpoint\", {    method: \"POST\",    body: new FormData(event.currentTarget),    });    const response = await fetch(request);        if (response.ok) {    setOutput([]);    setText(\"\");        const stream = await sb.streaming.fromSSEResponse(response);        for await (let message of stream) {    // node.result is received after a node runs    // it contains the node's output in the `data` field    if (message.object === \"node.result\") {    setOutput((state) => [...state, message.data.json_object]);    }    // node.delta is received when a node outputs incremental data    if (message.object === \"node.delta\") {    setText((state) => state + message.data.choices.item.text);    }    }    }    }    // ...    }            ``\n\nStreaming Event Types[](#streaming-event-types)\n\n------------------------------------------------\n\n### `node.result`[](#noderesult)\n\nContains the entire node's output. Sent as soon as the node completes.\n\n`   {    object: \"node.result\";    nodeId: string;    data: $NodeOutput;    }            `\n\n### `node.error`[](#nodeerror)\n\nContains an error that occured during a node's run.\n\n`   {    object: \"node.error\";    nodeId: string;    data: {    type: \"api_error\" | \"invalid_request_error\" | \"dependency_error\";    message: string;    }    }            `\n\n### `node.delta`[](#nodedelta)\n\nFor nodes that support streaming chunks, delta events are used. These events contain partial results in the same structure as the node's output with one difference: if a field is an array, it contains an `array.item` structure that describes the array item and which index it belongs to.\n\n`   {    object: \"node.delta\";    nodeId: string;    data: $NodeOutputChunk;    }            `\n\nThe `array.item` object:\n\n`   {    object: \"array.item\";    index: number;    item: $NodeOutputArrayItem; // value of the array item    }            `\n\n### `graph.result`[](#graphresult)\n\nWhen the graph run completes the entire graph result is sent as a final message.\n\n`   {    object: \"graph.result\";    data: $GraphResult; // contains results from all nodes in the graph    }            `\n\n[RunPython](/reference/run-python \"RunPython\")\n[External files](/reference/external-files \"External files\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "metadata": {
      "ogUrl": "https://docs.substrate.run",
      "title": "Streaming | Substrate",
      "robots": "index,follow",
      "ogImage": "/og-image-v3.png",
      "ogTitle": "Streaming | Substrate",
      "sourceURL": "https://docs.substrate.run/reference/streaming",
      "description": "Substrate",
      "ogDescription": "The platform for compound AI. Powerful SDKs, with batteries included: optimized AI models, vector storage, code interpreter, and agentic control flow. Stop using LangChain.",
      "pageStatusCode": 200,
      "ogLocaleAlternate": []
    },
    "linksOnPage": [
      "https://substrate.run",
      "https://docs.substrate.run/",
      "https://substrate.run/nodes",
      "https://substrate.run/pricing",
      "https://substrate.run/company",
      "https://blog.substrate.run",
      "https://docs.substrate.run/overview/setup",
      "https://docs.substrate.run/overview/connecting",
      "https://docs.substrate.run/overview/storing",
      "https://docs.substrate.run/why",
      "https://docs.substrate.run/changelog",
      "https://docs.substrate.run/guides/extract-and-summarize",
      "https://docs.substrate.run/guides/reimagine-a-room",
      "https://docs.substrate.run/guides/transcription",
      "https://docs.substrate.run/guides/vector-stores",
      "https://docs.substrate.run/guides/remove-background",
      "https://docs.substrate.run/guides/masked-image-generation",
      "https://docs.substrate.run/guides/mixture-of-agents",
      "https://docs.substrate.run/reference/api",
      "https://docs.substrate.run/reference/quick",
      "https://docs.substrate.run/reference/box",
      "https://docs.substrate.run/reference/if",
      "https://docs.substrate.run/reference/run-python",
      "https://docs.substrate.run/reference/streaming",
      "https://docs.substrate.run/reference/external-files",
      "https://docs.substrate.run/reference/external-files/s3",
      "https://docs.substrate.run/reference/versioning",
      "https://docs.substrate.run/reference/legal/terms-of-service",
      "https://docs.substrate.run/reference/legal/privacy-policy",
      "https://docs.substrate.run/reference/legal/usage-policy",
      "https://x.com/substratelabs",
      "https://www.linkedin.com/company/substratelabs",
      "https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA"
    ]
  },
  {
    "content": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nOn This Page\n\n*   [S3 Inputs](#s3-inputs)\n    \n*   [S3 Outputs](#s3-outputs)\n    \n\nReference\n\nExternal files\n\n֍\n\nRead from and write to your own file storage\n\nSubstrate nodes can read from and write to your own external file storage. Currently, Substrate supports connections to [Amazon S3](/external-files/s3)\n.\n\nYou can manage external file storage connections in the [Substrate Dashboard (opens in a new tab)](https://www.substrate.run/dashboard/external-files)\n.\n\n### S3 Inputs[](#s3-inputs)\n\nYou can use S3 URIs as inputs to nodes. For example, if you have an audio file stored in an S3 bucket named `my-bucket` and want to use it as an input to\n\nTranscribeSpeech\n\nTranscribe speech in an audio or video file.\n\nExample\n\n[API Reference](https://substrate.run/nodes#TranscribeSpeech)\n\nTranscribeSpeech( audio\\_uri=\"https://media.substrate.run/dfw-clip.m4a\", prompt=\"David Foster Wallace interviewed about US culture, and Infinite Jest\", segment=True, align=True, diarize=True, suggest\\_chapters=True, )\n\nOutput\n\n{ \"text\": \"language like that, the wounded inner child, the inner pain, is part of a kind of pop psychological movement in the United States that is a sort of popular Freudianism that ...\", \"segments\": \\[ { \"start\": 0.874, \"end\": 15.353, \"speaker\": \"SPEAKER\\_00\", \"text\": \"language like that, the wounded inner child, the inner pain, is part of a kind of pop psychological movement in the United States that is a sort of popular Freudianism that\", \"words\": \\[ { \"word\": \"language\", \"start\": 0.874, \"end\": 1.275, \"speaker\": \"SPEAKER\\_00\" }, { \"word\": \"like\", \"start\": 1.295, \"end\": 1.455, \"speaker\": \"SPEAKER\\_00\" } \\] } \\], \"chapters\": \\[ { \"title\": \"Introduction to the Wounded Inner Child and Popular Psychology in US\", \"start\": 0.794 }, { \"title\": \"The Paradox of Popular Psychology and Anger in America\", \"start\": 16.186 } \\] }\n\n, you can set `audio_uri` to `s3://my-bucket/<filename>`.\n\nPython\n\nTypeScript\n\n`   transcribe = TranscribeSpeech(audio_uri=\"s3://my-bucket/input.wav\")            `\n\n### S3 Outputs[](#s3-outputs)\n\nYou can write outputs to S3 URIs from nodes. For example, if you've linked an S3 bucket named `my-bucket` and want to write an output to that bucket, you can set the `store` parameter to `s3://my-bucket/<filename>`.\n\nPython\n\nTypeScript\n\n`   image = GenerateImage(    prompt=\"oil painting\",    store=\"s3://my-bucket/output.jpeg\"    )            `\n\n[Streaming](/reference/streaming \"Streaming\")\n[Amazon S3](/reference/external-files/s3 \"Amazon S3\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "markdown": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nOn This Page\n\n*   [S3 Inputs](#s3-inputs)\n    \n*   [S3 Outputs](#s3-outputs)\n    \n\nReference\n\nExternal files\n\n֍\n\nRead from and write to your own file storage\n\nSubstrate nodes can read from and write to your own external file storage. Currently, Substrate supports connections to [Amazon S3](/external-files/s3)\n.\n\nYou can manage external file storage connections in the [Substrate Dashboard (opens in a new tab)](https://www.substrate.run/dashboard/external-files)\n.\n\n### S3 Inputs[](#s3-inputs)\n\nYou can use S3 URIs as inputs to nodes. For example, if you have an audio file stored in an S3 bucket named `my-bucket` and want to use it as an input to\n\nTranscribeSpeech\n\nTranscribe speech in an audio or video file.\n\nExample\n\n[API Reference](https://substrate.run/nodes#TranscribeSpeech)\n\nTranscribeSpeech( audio\\_uri=\"https://media.substrate.run/dfw-clip.m4a\", prompt=\"David Foster Wallace interviewed about US culture, and Infinite Jest\", segment=True, align=True, diarize=True, suggest\\_chapters=True, )\n\nOutput\n\n{ \"text\": \"language like that, the wounded inner child, the inner pain, is part of a kind of pop psychological movement in the United States that is a sort of popular Freudianism that ...\", \"segments\": \\[ { \"start\": 0.874, \"end\": 15.353, \"speaker\": \"SPEAKER\\_00\", \"text\": \"language like that, the wounded inner child, the inner pain, is part of a kind of pop psychological movement in the United States that is a sort of popular Freudianism that\", \"words\": \\[ { \"word\": \"language\", \"start\": 0.874, \"end\": 1.275, \"speaker\": \"SPEAKER\\_00\" }, { \"word\": \"like\", \"start\": 1.295, \"end\": 1.455, \"speaker\": \"SPEAKER\\_00\" } \\] } \\], \"chapters\": \\[ { \"title\": \"Introduction to the Wounded Inner Child and Popular Psychology in US\", \"start\": 0.794 }, { \"title\": \"The Paradox of Popular Psychology and Anger in America\", \"start\": 16.186 } \\] }\n\n, you can set `audio_uri` to `s3://my-bucket/<filename>`.\n\nPython\n\nTypeScript\n\n`   transcribe = TranscribeSpeech(audio_uri=\"s3://my-bucket/input.wav\")            `\n\n### S3 Outputs[](#s3-outputs)\n\nYou can write outputs to S3 URIs from nodes. For example, if you've linked an S3 bucket named `my-bucket` and want to write an output to that bucket, you can set the `store` parameter to `s3://my-bucket/<filename>`.\n\nPython\n\nTypeScript\n\n`   image = GenerateImage(    prompt=\"oil painting\",    store=\"s3://my-bucket/output.jpeg\"    )            `\n\n[Streaming](/reference/streaming \"Streaming\")\n[Amazon S3](/reference/external-files/s3 \"Amazon S3\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "metadata": {
      "ogUrl": "https://docs.substrate.run",
      "title": "External Files | Substrate",
      "robots": "index,follow",
      "ogImage": "/og-image-v3.png",
      "ogTitle": "External Files | Substrate",
      "sourceURL": "https://docs.substrate.run/reference/external-files",
      "description": "Substrate",
      "ogDescription": "The platform for compound AI. Powerful SDKs, with batteries included: optimized AI models, vector storage, code interpreter, and agentic control flow. Stop using LangChain.",
      "pageStatusCode": 200,
      "ogLocaleAlternate": []
    },
    "linksOnPage": [
      "https://substrate.run",
      "https://docs.substrate.run/",
      "https://substrate.run/nodes",
      "https://substrate.run/pricing",
      "https://substrate.run/company",
      "https://blog.substrate.run",
      "https://docs.substrate.run/overview/setup",
      "https://docs.substrate.run/overview/connecting",
      "https://docs.substrate.run/overview/storing",
      "https://docs.substrate.run/why",
      "https://docs.substrate.run/changelog",
      "https://docs.substrate.run/guides/extract-and-summarize",
      "https://docs.substrate.run/guides/reimagine-a-room",
      "https://docs.substrate.run/guides/transcription",
      "https://docs.substrate.run/guides/vector-stores",
      "https://docs.substrate.run/guides/remove-background",
      "https://docs.substrate.run/guides/masked-image-generation",
      "https://docs.substrate.run/guides/mixture-of-agents",
      "https://docs.substrate.run/reference/api",
      "https://docs.substrate.run/reference/quick",
      "https://docs.substrate.run/reference/box",
      "https://docs.substrate.run/reference/if",
      "https://docs.substrate.run/reference/run-python",
      "https://docs.substrate.run/reference/streaming",
      "https://docs.substrate.run/reference/external-files",
      "https://docs.substrate.run/reference/external-files/s3",
      "https://docs.substrate.run/reference/versioning",
      "https://docs.substrate.run/reference/legal/terms-of-service",
      "https://docs.substrate.run/reference/legal/privacy-policy",
      "https://docs.substrate.run/reference/legal/usage-policy",
      "https://docs.substrate.run/external-files/s3",
      "https://www.substrate.run/dashboard/external-files",
      "https://substrate.run/nodes#TranscribeSpeech",
      "https://x.com/substratelabs",
      "https://www.linkedin.com/company/substratelabs",
      "https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA"
    ]
  },
  {
    "content": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nOn This Page\n\n*   [1\\. Register AWS Credentials](#1-register-aws-credentials)\n    \n*   [Cross Account Role](#cross-account-role)\n    \n*   [Access Key](#access-key)\n    \n*   [2\\. Create File Store](#2-create-file-store)\n    \n\nReference\n\n[External files](/reference/external-files)\n\nAmazon S3\n\n֍\n\nConnect to your own AWS S3 bucket\n\nSubstrate accesses your Amazon S3 buckets using credentials that you provide. You can register these credentials with Substrate in the [Dashboard (opens in a new tab)](https://www.substrate.run/dashboard/external-files)\n. Substrate securely stores your credentials and uses them to access your S3 buckets when you schedule a graph run.\n\n1\\. Register AWS Credentials[](#1-register-aws-credentials)\n\n------------------------------------------------------------\n\nThere are two ways you can register AWS credentials with Substrate: a [Cross Account Role (opens in a new tab)](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-user.html)\n or an [Access Key (opens in a new tab)](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html)\n.\n\n### Cross Account Role[](#cross-account-role)\n\nCross-account roles are the recommended way to provide secure access to your AWS resources.\n\nYou can configure a cross-account role for Substrate with the following steps:\n\n1.  Navigate to [External Files (opens in a new tab)](https://www.substrate.run/dashboard/external-files)\n     in the Substrate Dashboard. Create a new Credential and select **Cross-account role** as the credential type.\n2.  Provide a unique display name for the credential and take note of the **AWS Account ID** and the **External ID** displayed near the bottom of the form.\n3.  Visit the [AWS Console (opens in a new tab)](https://aws.amazon.com/console/)\n    , navigate to **IAM** and then **Roles**.\n4.  Click **Create Role**. Under **Trusted entity type**, choose **AWS account**. Select **Another AWS account** and click _Require external ID_.\n5.  Enter the **AWS Account ID** and **External ID** that you copied from the Substrate Dashboard and click next.\n6.  Then, on the Add Permissions screen, attach permissions to the role. Click next and enter a name and description for the role. You should see a trust policy similar to this:\n\n`   {    \"Version\": \"2012-10-17\",    \"Statement\": [    {    \"Effect\": \"Allow\",    \"Action\": \"sts:AssumeRole\",    \"Principal\": {    \"AWS\": \"018062818227\"    },    \"Condition\": {    \"StringEquals\": {    \"sts:ExternalId\": \"<YOUR_EXTERNAL_ID>\"    }    }    }    ]    }            `\n\n6.  After creating the cross-account role, copy its **ARN** and paste it into the Substrate Dashboard.\n7.  You can optionally use the **Test Credentials** button in the Substrate Dashboard to verify that the role has been set up correctly.\n8.  Click **Create** to save the credentials.\n\n### Access Key[](#access-key)\n\nThe Access Key credential type allows you to grant Substrate access to an IAM user by providing one of the user's Access Key ID and Secret Access Key combinations.\n\nFor help generating these keys, check out the [AWS docs (opens in a new tab)](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html)\n.\n\nOnce you have an Access Key ID and Secret Access Key:\n\n1.  Navigate to [External Files (opens in a new tab)](https://www.substrate.run/dashboard/external-files)\n     in the Substrate Dashboard. Create a new Credential and select **Access Key** as the credential type.\n2.  Enter a unique display name for the credential and paste in the Access Key ID and Secret Access Key.\n3.  You can optionally use the **Test Credentials** button in the Substrate Dashboard to verify that the access key has been set up correctly.\n4.  Click **Create** to save the credentials.\n\n2\\. Create File Store[](#2-create-file-store)\n\n----------------------------------------------\n\nTo register an S3 bucket with Substrate, navigate to [External Files (opens in a new tab)](https://www.substrate.run/dashboard/external-files)\n in the Substrate Dashboard. Create a new Connection.\n\nNext, enter the details of the S3 bucket you want to register. You will need to know the name of your S3 bucket and the AWS Region it's located in. You can access information about your S3 buckets in the [AWS Console (opens in a new tab)](https://s3.console.aws.amazon.com/s3/home)\n.\n\n[External files](/reference/external-files \"External files\")\n[Versioning](/reference/versioning \"Versioning\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "markdown": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\nCTRL K\n\nCTRL K\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nOn This Page\n\n*   [1\\. Register AWS Credentials](#1-register-aws-credentials)\n    \n*   [Cross Account Role](#cross-account-role)\n    \n*   [Access Key](#access-key)\n    \n*   [2\\. Create File Store](#2-create-file-store)\n    \n\nReference\n\n[External files](/reference/external-files)\n\nAmazon S3\n\n֍\n\nConnect to your own AWS S3 bucket\n\nSubstrate accesses your Amazon S3 buckets using credentials that you provide. You can register these credentials with Substrate in the [Dashboard (opens in a new tab)](https://www.substrate.run/dashboard/external-files)\n. Substrate securely stores your credentials and uses them to access your S3 buckets when you schedule a graph run.\n\n1\\. Register AWS Credentials[](#1-register-aws-credentials)\n\n------------------------------------------------------------\n\nThere are two ways you can register AWS credentials with Substrate: a [Cross Account Role (opens in a new tab)](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-user.html)\n or an [Access Key (opens in a new tab)](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html)\n.\n\n### Cross Account Role[](#cross-account-role)\n\nCross-account roles are the recommended way to provide secure access to your AWS resources.\n\nYou can configure a cross-account role for Substrate with the following steps:\n\n1.  Navigate to [External Files (opens in a new tab)](https://www.substrate.run/dashboard/external-files)\n     in the Substrate Dashboard. Create a new Credential and select **Cross-account role** as the credential type.\n2.  Provide a unique display name for the credential and take note of the **AWS Account ID** and the **External ID** displayed near the bottom of the form.\n3.  Visit the [AWS Console (opens in a new tab)](https://aws.amazon.com/console/)\n    , navigate to **IAM** and then **Roles**.\n4.  Click **Create Role**. Under **Trusted entity type**, choose **AWS account**. Select **Another AWS account** and click _Require external ID_.\n5.  Enter the **AWS Account ID** and **External ID** that you copied from the Substrate Dashboard and click next.\n6.  Then, on the Add Permissions screen, attach permissions to the role. Click next and enter a name and description for the role. You should see a trust policy similar to this:\n\n`   {    \"Version\": \"2012-10-17\",    \"Statement\": [    {    \"Effect\": \"Allow\",    \"Action\": \"sts:AssumeRole\",    \"Principal\": {    \"AWS\": \"018062818227\"    },    \"Condition\": {    \"StringEquals\": {    \"sts:ExternalId\": \"<YOUR_EXTERNAL_ID>\"    }    }    }    ]    }            `\n\n6.  After creating the cross-account role, copy its **ARN** and paste it into the Substrate Dashboard.\n7.  You can optionally use the **Test Credentials** button in the Substrate Dashboard to verify that the role has been set up correctly.\n8.  Click **Create** to save the credentials.\n\n### Access Key[](#access-key)\n\nThe Access Key credential type allows you to grant Substrate access to an IAM user by providing one of the user's Access Key ID and Secret Access Key combinations.\n\nFor help generating these keys, check out the [AWS docs (opens in a new tab)](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html)\n.\n\nOnce you have an Access Key ID and Secret Access Key:\n\n1.  Navigate to [External Files (opens in a new tab)](https://www.substrate.run/dashboard/external-files)\n     in the Substrate Dashboard. Create a new Credential and select **Access Key** as the credential type.\n2.  Enter a unique display name for the credential and paste in the Access Key ID and Secret Access Key.\n3.  You can optionally use the **Test Credentials** button in the Substrate Dashboard to verify that the access key has been set up correctly.\n4.  Click **Create** to save the credentials.\n\n2\\. Create File Store[](#2-create-file-store)\n\n----------------------------------------------\n\nTo register an S3 bucket with Substrate, navigate to [External Files (opens in a new tab)](https://www.substrate.run/dashboard/external-files)\n in the Substrate Dashboard. Create a new Connection.\n\nNext, enter the details of the S3 bucket you want to register. You will need to know the name of your S3 bucket and the AWS Region it's located in. You can access information about your S3 buckets in the [AWS Console (opens in a new tab)](https://s3.console.aws.amazon.com/s3/home)\n.\n\n[External files](/reference/external-files \"External files\")\n[Versioning](/reference/versioning \"Versioning\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "metadata": {
      "ogUrl": "https://docs.substrate.run",
      "title": "S3 | Substrate",
      "robots": "index,follow",
      "ogImage": "/og-image-v3.png",
      "ogTitle": "S3 | Substrate",
      "sourceURL": "https://docs.substrate.run/reference/external-files/s3",
      "description": "Substrate",
      "ogDescription": "The platform for compound AI. Powerful SDKs, with batteries included: optimized AI models, vector storage, code interpreter, and agentic control flow. Stop using LangChain.",
      "pageStatusCode": 200,
      "ogLocaleAlternate": []
    },
    "linksOnPage": [
      "https://substrate.run",
      "https://docs.substrate.run/",
      "https://substrate.run/nodes",
      "https://substrate.run/pricing",
      "https://substrate.run/company",
      "https://blog.substrate.run",
      "https://docs.substrate.run/overview/setup",
      "https://docs.substrate.run/overview/connecting",
      "https://docs.substrate.run/overview/storing",
      "https://docs.substrate.run/why",
      "https://docs.substrate.run/changelog",
      "https://docs.substrate.run/guides/extract-and-summarize",
      "https://docs.substrate.run/guides/reimagine-a-room",
      "https://docs.substrate.run/guides/transcription",
      "https://docs.substrate.run/guides/vector-stores",
      "https://docs.substrate.run/guides/remove-background",
      "https://docs.substrate.run/guides/masked-image-generation",
      "https://docs.substrate.run/guides/mixture-of-agents",
      "https://docs.substrate.run/reference/api",
      "https://docs.substrate.run/reference/quick",
      "https://docs.substrate.run/reference/box",
      "https://docs.substrate.run/reference/if",
      "https://docs.substrate.run/reference/run-python",
      "https://docs.substrate.run/reference/streaming",
      "https://docs.substrate.run/reference/external-files",
      "https://docs.substrate.run/reference/external-files/s3",
      "https://docs.substrate.run/reference/versioning",
      "https://docs.substrate.run/reference/legal/terms-of-service",
      "https://docs.substrate.run/reference/legal/privacy-policy",
      "https://docs.substrate.run/reference/legal/usage-policy",
      "https://www.substrate.run/dashboard/external-files",
      "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-user.html",
      "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html",
      "https://aws.amazon.com/console/",
      "https://s3.console.aws.amazon.com/s3/home",
      "https://x.com/substratelabs",
      "https://www.linkedin.com/company/substratelabs",
      "https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA"
    ]
  },
  {
    "content": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nReference\n\nVersioning\n\n֍\n\nVersioning scheme for the Substrate API and SDKs\n\nWhen backwards-incompatible changes are made to the API, we release a new API version, in the form of a date string, and update the [Changelog](/changelog)\n.\n\nEach Substrate SDK release is pinned to an API version. SDK versions follow [semantic versioning (opens in a new tab)](https://semver.org/)\n with the following components:\n\n`<SDK_MAJOR><API_VERSION>.<SDK_MINOR>.<SDK_PATCH>`\n\n`020240101.3.2` is an example SDK version string with 4 components:\n\n*   `0` – `SDK_MAJOR` – backwards-incompatible SDK changes\n*   `20240101` – `API_VERSION` – backwards-incompatible API changes\n*   `3` – `SDK_MINOR` – backwards-compatible SDK changes\n*   `1` – `SDK_PATCH` – minor SDK changes\n\n[Amazon S3](/reference/external-files/s3 \"Amazon S3\")\n[Terms of Service](/reference/legal/terms-of-service \"Terms of Service\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "markdown": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nReference\n\nVersioning\n\n֍\n\nVersioning scheme for the Substrate API and SDKs\n\nWhen backwards-incompatible changes are made to the API, we release a new API version, in the form of a date string, and update the [Changelog](/changelog)\n.\n\nEach Substrate SDK release is pinned to an API version. SDK versions follow [semantic versioning (opens in a new tab)](https://semver.org/)\n with the following components:\n\n`<SDK_MAJOR><API_VERSION>.<SDK_MINOR>.<SDK_PATCH>`\n\n`020240101.3.2` is an example SDK version string with 4 components:\n\n*   `0` – `SDK_MAJOR` – backwards-incompatible SDK changes\n*   `20240101` – `API_VERSION` – backwards-incompatible API changes\n*   `3` – `SDK_MINOR` – backwards-compatible SDK changes\n*   `1` – `SDK_PATCH` – minor SDK changes\n\n[Amazon S3](/reference/external-files/s3 \"Amazon S3\")\n[Terms of Service](/reference/legal/terms-of-service \"Terms of Service\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "metadata": {
      "ogUrl": "https://docs.substrate.run",
      "title": "Versioning | Substrate",
      "robots": "index,follow",
      "ogImage": "/og-image-v3.png",
      "ogTitle": "Versioning | Substrate",
      "sourceURL": "https://docs.substrate.run/reference/versioning",
      "description": "Substrate",
      "ogDescription": "The platform for compound AI. Powerful SDKs, with batteries included: optimized AI models, vector storage, code interpreter, and agentic control flow. Stop using LangChain.",
      "pageStatusCode": 200,
      "ogLocaleAlternate": []
    },
    "linksOnPage": [
      "https://substrate.run",
      "https://docs.substrate.run/",
      "https://substrate.run/nodes",
      "https://substrate.run/pricing",
      "https://substrate.run/company",
      "https://blog.substrate.run",
      "https://docs.substrate.run/overview/setup",
      "https://docs.substrate.run/overview/connecting",
      "https://docs.substrate.run/overview/storing",
      "https://docs.substrate.run/why",
      "https://docs.substrate.run/changelog",
      "https://docs.substrate.run/guides/extract-and-summarize",
      "https://docs.substrate.run/guides/reimagine-a-room",
      "https://docs.substrate.run/guides/transcription",
      "https://docs.substrate.run/guides/vector-stores",
      "https://docs.substrate.run/guides/remove-background",
      "https://docs.substrate.run/guides/masked-image-generation",
      "https://docs.substrate.run/guides/mixture-of-agents",
      "https://docs.substrate.run/reference/api",
      "https://docs.substrate.run/reference/quick",
      "https://docs.substrate.run/reference/box",
      "https://docs.substrate.run/reference/if",
      "https://docs.substrate.run/reference/run-python",
      "https://docs.substrate.run/reference/streaming",
      "https://docs.substrate.run/reference/external-files",
      "https://docs.substrate.run/reference/external-files/s3",
      "https://docs.substrate.run/reference/versioning",
      "https://docs.substrate.run/reference/legal/terms-of-service",
      "https://docs.substrate.run/reference/legal/privacy-policy",
      "https://docs.substrate.run/reference/legal/usage-policy",
      "https://semver.org/",
      "https://x.com/substratelabs",
      "https://www.linkedin.com/company/substratelabs",
      "https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA"
    ]
  },
  {
    "content": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nReference\n\nLegal\n\nTerms of Service\n\nTerms of Service\n================\n\nLast Updated: April 2, 2024\n\nThis Terms of Service (\"Agreement\") is a legally binding contract between you and Substrate Labs Inc. (\"Substrate,\" \"us,\" \"we,\" or \"our\") regarding your use of the Service (as defined in Section 1). References to \"Customer\", \"you\", and \"your\" refer to the individual, company, or other entity that accepts the Agreement, by executing an ordering document provided to you by us, placing an Order using online functionality Substrate makes available like clicking a box, creating an Account (as defined in Section 3.2), or otherwise affirmatively accepting the Agreement through another means Substrate offers you. If the Service is being used on behalf of a company or other entity by an individual authorized to accept this Agreement on its behalf, then all references to \"Customer,\" \"you,\" or \"your\" refer to the company or other entity. If you are a company or other entity, the individual accepting this Agreement on your behalf represents and warrants that they have authority to bind you to this Agreement. If you are accepting this Agreement on behalf of a company or other entity and an authorized representative of the entity has already accepted this Agreement on behalf of the entity or entered into a separate agreement regarding the use of the Service (\"Separate Agreement\") prior to the date upon which you accept this Agreement (\"Effective Date\"), this Agreement will not apply to you, and your and the entity's rights and obligations with respect to the Service will at all times be governed by, and subject to, the Separate Agreement. If you are not eligible, or do not agree to the terms and conditions of this Agreement, then you do not have our permission to use the Service. Your use of and our provision of the Service to you, constitutes an Agreement by Substrate and by you to be bound by this Agreement.\n\n1.  Defined Terms. Certain capitalized terms used in this Agreement are defined in Section 14 (Definitions) and others are defined contextually in this Agreement.\n    \n2.  Overview. The Service provides features and functionalities in connection with Substrate's unified application programming interface (\"API\") for open-source machine learning models (\"Service\"). During the Subscription Term (defined below) and subject to the Customer's compliance with this Agreement, Substrate will make the API available to the Customer under the terms and conditions set forth in this Agreement.\n    \n3.  The Service.\n    \n\n3.1. Permitted Use. Subject to the terms and conditions of this Agreement and each Order, Substrate will make the Service available to Customer and, if Customer is a company or entity, to Customer's Users during the Subscription Term. Customer may only use the Service internally.\n\n3.2. Access. To access the Service, Customer and its Users must register for an account (\"Account\") and, in doing so, may be required to provide Substrate with information (such name, email address, or other contact information). Customer agrees that the information it provides to Substrate is accurate, complete, and not misleading and that it will keep it accurate and up to date at all times. Only Users, using the mechanisms designated by Substrate (including, if applicable, API access keys) (\"Log-in Credentials\"), may access and use the Service. Each User must keep their Log-in Credentials confidential and not share them with anyone else. Customer is responsible for its Users' compliance with this Agreement and all actions taken through their Log-in Credentials (excluding misuse of the Log-in Credentials caused by Substrate's breach of this Agreement). Customer will promptly notify Substrate if Customer becomes aware of any compromise of any Log-in Credentials. Substrate may Process Log-in Credentials in connection with Substrate's provision of the Service or for Substrate's internal business purposes. Customer represents and warrants to Substrate that: (a) it has not previously been suspended or removed from the Service; and (b) its registration and use of the Service is in compliance with all Laws.\n\n3.3. License. Subject to the terms and conditions of this Agreement, Substrate hereby grants to Customer a non-exclusive, royalty-free, fully paid-up, non-sublicensable, non-transferable (except pursuant to Section 13.1) license, during the Subscription Term, to: (a) download, reproduce, and use Substrate's Documentation, technical literature, sample code, and other materials related to the APIs, and reproduce and modify any source code made available as part of such materials; and (b) make calls to Substrate's APIs; in each case of (a) and (b), solely as specified in the Documentation and in accordance with this Agreement. Substrate reserves the right to monitor Customer's use of the APIs and may restrict Customer's access to the API or limit the volume of API calls in that Customer may make, including if Customer's use exceeds Substrate's API call limits or has a negative impact on performance of the Service. Substrate may, but has no obligation to, update, upgrade, or otherwise modify its APIs and features or functionality thereof. For avoidance of doubt, Customer's right to use the APIs is subject to Section 3.4 (Restrictions).\n\n3.4. Restrictions. Customer will not (and will not permit its Users or anyone else to) do any of the following: (a) provide access to, distribute, sell, or sublicense the Service to a third party (other than Users); (b) use the Service on behalf of, or to provide any product or service to, third parties; (c) use the Service to develop a similar or competing product or service; (d) reverse engineer, decompile, disassemble, or seek to access the source code or non-public APIs to the Service (other than as contemplated by the Documentation with respect to the source code), except to the extent expressly permitted by Law (and then only with prior notice to Substrate); (e) modify or create derivative works of the Service or copy any element of the Service; (f) remove or obscure any proprietary notices in the Service; (g) publish benchmarks or performance information about the Service; (h) interfere with the operation of the Service, circumvent or violate any access, usage, rate, concurrency, or frequency restrictions, or conduct any security or vulnerability test of the Service; (i) transmit any viruses or other harmful materials to the Service or perform denial-of-service attacks or other similar attacks; (j) take any action that risks harm to others or to the security, availability, or integrity of the Service; (k) access or use the Service in a manner that violates any Law; (l) use the Service with Prohibited Data or for High Risk Activities; (m) use the Service in any way other than as expressly authorized in the Agreement; or (n) authorize or knowingly assist any third party to do any of the foregoing. Customer acknowledges that the Service is not intended to meet any legal obligations for these uses, including HIPAA requirements, and that Substrate is not a Business Associate as defined under HIPAA. Notwithstanding anything else in this Agreement, Substrate has no liability for Prohibited Data or use of the Service for High Risk Activities.\n\n3.5. Data Protection Laws. Customer will not use the Service with any Customer Data that is subject to Data Protection Laws without first entering into a data processing addendum with Substrate concerning the Processing of such Customer Data in accordance with such Data Protection Laws.\n\n3.6. Support. During the applicable Subscription Term, Substrate will provide Customer with support for the Service during Substrate's normal business hours and in accordance with Substrate's standard support practices (\"Support\").\n\n3.7. Use of Customer Data. Customer grants Substrate the non-exclusive, worldwide, sublicensable right to use, copy, store (temporarily), disclose, transmit, transfer, publicly display, modify, and create derivative works from Customer Data solely to the extent necessary to: (a) provide the Service (including the generation of AI Output and the provision of other AI Features); (b) create, derive, or generate Usage Data; (c) create and compile Aggregated Data; and (d) as otherwise required by Laws or as agreed to in writing between the parties.\n\n3.8. Privacy Policy. To the extent Personal Data as defined in Substrate's Privacy Policy at [https://docs.substrate.run/reference/legal/privacy-policy (opens in a new tab)](https://docs.substrate.run/reference/legal/privacy-policy)\n is uploaded, transmitted, submitted, provided, or processed in connection with Customer's use of the Service, Substrate will comply with the Privacy Policy.\n\n3.9. Usage Data; Aggregated Data. Substrate may Process Usage Data and Aggregated Data for internal business purposes to: (a) track use of Service for billing purposes; (b) provide support for Service; (c) monitor the performance and stability of the Service; (d) prevent or address technical issues with the Service; (e) improve Service, our other products and services, and to develop new products and services (including without limitation, to train artificial intelligence or machine learning models); and (f) for all other lawful business practices, such as analytics, benchmarking, and reports. Customer will not interfere with the collection of Usage Data.\n\n3.10. Customer Obligations. Customer is responsible for its Customer Data, including its content and accuracy, and will comply with Laws and the Documentation when using the Service. Customer represents and warrants that it has made all disclosures, provided all notices, and has obtained all rights, consents, and permissions necessary for Substrate to collect, access, use, disclose, transfer, transmit, store, host, or otherwise process the Customer Data as set forth in this Agreement without violating or infringing Laws, third-party rights, or terms or policies that apply to the Customer Data.\n\n3.11. Suspension. Substrate may immediately suspend Customer's and its Users' access to the Service if: (a) Customer breaches Section 3.4 (Restrictions) or Section 3.10 (Customer Obligations); (b) Customer's Account is 30 days or more overdue; (c) changes to Laws or new Laws require that Substrate suspend the Service or otherwise may impose additional liability on us; or (d) Customer's or its Users' actions risk harm to any of Substrate's other customers or the security, availability, or integrity of the Service. Where practicable, Substrate will use reasonable efforts to provide Customer with prior notice of the suspension. If the issue that led to the suspension is resolved, Substrate will use reasonable efforts to restore your access to the Service.\n\n3.12. Modifications to the Service. Substrate may modify or discontinue all or any part of the Service at any time (including by limiting or discontinuing certain features or functionality of the Service), temporarily or permanently, without notifying Customer (except that Substrate will use commercially reasonable efforts provide Customer with 30 days' prior notice in the event of any deprecation of any material feature or functionality of the Service). Substrate will have no liability for any change or modification to the Service or any suspension or termination of access to or use of the Service as a result thereof. Notwithstanding the foregoing, any such change or modification will only apply on a going-forward basis.\n\n3.13. Customer Systems. Customer will provide and maintain any hardware, software, other technology, and infrastructure that Customer requires to access and use the Service. Customer will be solely liable for implementation, securing, and maintaining the foregoing, and Substrate will not be liable to Customer for any failure or non-fulfillment of Customer to do so.\n\n3.14. AI Features. a) Generally. Certain portions of the Service may include or be powered by generative artificial intelligence (\"AI Features\"), which may generate and return an output to Customer (\"AI Output\"). The AI Output will be deemed Customer Data hereunder. Customer acknowledges that AI Outputs provided to Customer may be similar or identical to AI Outputs independently provided by Substrate to others. b) Infringement by Outputs. Due to the nature of the AI Features, Substrate does not represent or warrant that (a) any AI Output does not incorporate or reflect third-party content or materials or (b) any AI Output will not infringe third-party intellectual property rights. c) Optional AI Features. Certain optional AI Features (the \"Optional AI Features\") may require Substrate to retain certain Customer Data (e.g., embeddings, AI Output, etc.) for extended periods to enable higher performance or additional features of the Service. Customer grants Substrate the non-exclusive, worldwide, revocable (provided such revocation may prevent Substrate from providing Optional AI Features), sublicensable right to store and publicly display Customer Data solely to the extent necessary to provide Optional AI Features. Optional AI Features may be enabled or disabled upon reasonable written notice to Substrate, or as otherwise provided by Substrate through the Service. d) Additional Use Restrictions. Some of the Third-Party Platforms that Substrate employs to provide the AI Features have restrictions on the types of data that can be submitted to their services. Before using any AI Features, Customer should review and ensure it complies with the acceptable use policies of the Third-Party Platforms, including those available at [https://stability.ai/use-policy (opens in a new tab)](https://stability.ai/use-policy)\n and [https://openai.com/policies/usage-policies (opens in a new tab)](https://openai.com/policies/usage-policies)\n. Customer is responsible for its compliance with such policies, and Substrate has no responsibility for Service interruptions caused by Customer's violation of such policies. Substrate may suspend or terminate Customer's use of all or part of the Service if Substrate becomes aware that Customer is violating such policies. e) **Disclaimer. AI Outputs are generated through machine learning processes and are not tested, verified, endorsed, or guaranteed to be accurate, complete, or current by Substrate. Customer should independently review and verify all AI Outputs as to appropriateness for any or all Customer use cases or applications.**\n\n3.15. Third-Party Platforms. Use of Third-Party Platforms are subject to Customer's agreements with the relevant provider and not this Agreement. Substrate does not control and have no liability for Third-Party Platforms, including their security, functionality, operation, availability, or interoperability with the Service or how the Third-Party Platforms or their providers use Customer Data. By enabling a Third-Party Platform to interact with the Service, Customer authorizes Substrate to access and exchange Customer Data with such Third-Party Platform on Customer's behalf. 3.16. Open Source. The Service may be distributed or used with certain third-party open source software (\"OSS\"), as listed in the Documentation or as specified by Substrate upon prior written request by Customer. Any use of OSS on a stand-alone basis will be subject to the terms of the applicable OSS license and not this Agreement.\n\n4.  Commercial Terms.\n\n4.1. Subscription Term Renewal. Each Subscription Term will automatically renew for successive terms equal in length to the Subscription Term. Customer may cancel the Service by in the Substrate Dashboard or by emailing [support@substrate.run](mailto:support@substrate.run)\n. YOUR CANCELLATION MUST BE RECEIVED AT LEAST THIRTY (30) DAYS BEFORE THE EXPIRATION OF THE THEN-CURRENT SUBSCRIPTION TERM IN ORDER TO AVOID BEING CHARGED FOR THE NEXT SUBSCRIPTION PERIOD.\n\n4.2. Fees. Fees for the Service are described in the Order. All fees for the Service (\"Fees\") will be paid in US dollars unless otherwise provided in an Order. Fees are invoiced or charged as described in the Order. Unless the Order provides otherwise, all Fees are due within 30 days of the invoice date. Your Account will be charged a service charge of 1.5% per month or the maximum amount allowed by Law, whichever is less and Customer will also be responsible for Fees or charges that are incidental to any chargeback or collection of any the unpaid amount including any collection Fees. All Fees and other expenses are non-refundable. Customer is responsible for any sales, use, GST, value-added, withholding, or similar taxes or levies that apply to Orders, whether domestic or foreign, other than Substrate's income tax (\"Taxes\"). Fees are exclusive of all Taxes.\n\n4.3. Authorization. You authorize Substrate or its third-party payment processors to charge all sums for the Orders that you place and any level of Service you select as described in this Agreement or published by Substrate, including all applicable Taxes, to the payment method specified in your Account. If you pay any Fees with a credit card, then Substrate may seek pre-authorization of your credit card account prior to your purchase to verify that the credit card is valid and has the necessary funds or credit available to cover your purchase. You agree that Substrate may seek pre-authorization of the credit card account Customer provide to Substrate for payment prior to any purchase to verify that the credit card is valid and has the necessary funds or credit available to cover such purchase. If your payment method is no longer valid at the time a renewal Fee is due, then Substrate reserves the right to delete your Account and any information or Customer Data associated with your Account without any liability to you.\n\n4.4. Pricing. Substrate reserves the right to determine pricing for the Service. We will use reasonable efforts to keep pricing information with respect to the Service that is published on Substrate's pricing page available [https://substrate.run/pricing (opens in a new tab)](https://substrate.run/pricing)\n up to date, and Substrate encourages Customers to check it regularly for current pricing information. Unless Substrate and Customer otherwise agree in an Order executed by the parties, Substrate may change the Fees for the Service (including any feature or functionality of the Service) and Substrate will notify Customer of any such changes before they apply. Substrate may make promotional offers with different features and different pricing to any of Substrate's other customers. These promotional offers, unless made to Customer, will not apply to your Order or this Agreement.\n\n4.5. Renewal Fees. Unless otherwise agreed to by the parties, Fees for renewal Subscription Terms are at Substrate's then-current Fees at the time of such renewal regardless of any discounted pricing in a prior Order or promotional offers previously extended to Customer.\n\n4.6. Delinquent Accounts. Substrate may suspend or terminate access to the Service for any Account for which any amount is due but unpaid. In addition to the amounts due for the Service, a delinquent Account will be charged with fees or charges that are incidental to any chargeback or collection of any the unpaid amount, including collection fees. If your payment method is no longer valid at the time payment is due, then Substrate reserves the right to delete your Account and any information associated with your Account without any liability to you.\n\n5.  Limited Warranty; Disclaimer.\n\n5.1. Limited Warranty. Substrate warrants to Customer that the Service will perform materially as described in the Documentation during a Subscription Term (\"Limited Warranty\").\n\n5.2. Disclaimer. EXCEPT FOR THE LIMITED WARRANTY IN SECTION 5.1, THE SERVICE IS PROVIDED \"AS IS\". SUBSTRATE, ON OUR OWN BEHALF AND ON BEHALF OF OUR SUPPLIERS AND LICENSORS, MAKES NO OTHER WARRANTIES, WHETHER EXPRESS, IMPLIED, STATUTORY, OR OTHERWISE, INCLUDING WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE, OR NONINFRINGEMENT. WE DO NOT WARRANT THAT CUSTOMER'S USE OF THE SERVICE WILL BE UNINTERRUPTED OR ERROR-FREE, THAT SUBSTRATE WILL REVIEW CUSTOMER DATA FOR ACCURACY, OR THAT IT WILL MAINTAIN CUSTOMER DATA WITHOUT LOSS. SUBSTRATE IS NOT LIABLE FOR DELAYS, FAILURES, OR PROBLEMS INHERENT IN USE OF THE INTERNET AND ELECTRONIC COMMUNICATIONS OR OTHER SYSTEMS OUTSIDE SUBSTRATE'S CONTROL. CUSTOMER MAY HAVE OTHER STATUTORY RIGHTS, BUT ANY STATUTORILY REQUIRED WARRANTIES WILL BE LIMITED TO THE SHORTEST LEGALLY PERMITTED PERIOD.\n\n5.3. Warranty Remedy. If Substrate breaches a Limited Warranty during the Subscription Term and Customer makes a reasonably detailed warranty claim in the manner required by Substrate within 30 days of discovering a breach of the Limited Warranty for the Service, then Substrate will use reasonable efforts to correct the non-conformity. If Substrate cannot do so within 30 days of receipt of Customer's warranty claim, either party may terminate the affected Order as it relates to the Service. Substrate will then refund to Customer any pre-paid, unused Fees for the terminated portion of the applicable Subscription Term. This Section 5.3 sets forth Customer's exclusive remedy and Substrate's entire liability for breach of the Limited Warranty. This warranty does not apply to: (a) issues caused by Customer's or Users' misuse of or unauthorized modifications to the applicable Service; (b) issues in or caused by Third-Party Platforms or other third-party systems; (c) use of the applicable Service other than according to the Documentation; or (d) Trials and Betas (defined below) or other free or evaluation use. 6. Term and Termination.\n\n6.1. Term. This Agreement starts on the Effective Date and continues until terminated in accordance with the terms of this Agreement.\n\n6.2. Termination. Either party may terminate this Agreement (including any or all Orders) if the other party: (a) fails to cure a material breach of this Agreement (including a failure to pay Fees) within 30 days after notice; (b) ceases operation without a successor; or (c) seeks protection under a bankruptcy, receivership, trust deed, creditors' arrangement, composition, or comparable proceeding, or if such a proceeding is instituted against that party and not dismissed within 60 days. Either party may terminate this Agreement upon 15 days' prior written notice to the other if there are no Orders then-in-effect. If Customer violates any provision of this Agreement, then your authorization to access the Service and this Agreement automatically terminate. In addition, Substrate may, in our sole discretion, terminate this Agreement or Customer's Account on the Service, or suspend or terminate Customer's access to the Service, at any time for any reason or no reason, with or without notice, and without any liability to Customer arising from such termination. Customer may terminate your Account and this Agreement at any time by contacting [support@substrate.run](mailto:support@substrate.run)\n\n6.3. Effect of Termination. Upon expiration or termination of an Order, Customer's access to and Substrate's obligations to provide the Service will cease, including any licenses and other rights granted to any of Substrate's APIs. If applicable, Customer must uninstall the APIs. Substrate will be under no obligation to store or retain any Customer Data and may delete any Customer Data at any time in our sole discretion. Customer Data and other Confidential Information, as defined in Section 10, may be retained in Recipient's (defined below) standard backups notwithstanding any obligation to delete the applicable Confidential Information but will remain subject to this Agreement's confidentiality restrictions.\n\n6.4. Survival. These Sections survive expiration or termination of this Agreement: 3.4 (Restrictions), 3.9 (Usage Data; Aggregated Data), 3.10 (Customer Obligations), 3.14 (AI Features), 4.2 (Fees), 4.3 (Authorization), 5.2 (Disclaimer), 6.3 (Effect of Termination), 6.4 (Survival), 7 (Ownership), 8 (Limitations of Liability), 9 (Indemnification), 10 (Confidentiality), 13 (Miscellaneous), and 14 (Definitions). Except where an exclusive remedy is provided in this Agreement, exercising a remedy under this Agreement, including termination, does not limit other remedies a party may have.\n\n7.  Ownership. Neither party grants the other any rights or licenses not expressly set out in this Agreement. Except as expressly provided in this Agreement, as between the parties, Customer retains all intellectual property rights and other rights in Customer Data. Except for Customer's use rights in this Agreement, Substrate and our licensors retain all intellectual property rights and other rights in the Service (including all APIs), Software, Documentation, Aggregated Data, Usage Data, and Substrate's technology, templates, formats, and dashboards, including any modifications or improvements to these items made by us. If Customer provides Substrate with feedback or suggestions regarding the Service or our other offerings (collectively, \"Feedback\"), Substrate may use the Feedback or suggestions without restriction or obligation.\n    \n8.  Limitations of Liability. Except for Customer's breaches of Sections 3.1 (Permitted Use), 3.4 (Restrictions), 3.10 (Customer Obligations), either party's breach of Section 10 (Confidentiality) (but excluding claims relating to Customer Data), and amounts payable to third parties under the indemnifying party's obligations in Section 9 (Indemnification) (collectively, \"Excluded Claims\"), neither Substrate's, Customer's or their respective suppliers or licensors will have liability arising out of or related to this Agreement for any loss of use, lost data, lost profits, failure of security mechanisms, interruption of business, or any indirect, special, incidental, reliance, or consequential damages of any kind, even if informed of their possibility in advance. Except for Excluded Claims, neither Substrate's, Customer's, or their respective suppliers' or licensors' liability arising out of or related to this Agreement will exceed in aggregate the amounts paid or payable by Customer to Substrate pursuant to this Agreement during the 12 months prior to the date on which the applicable claim giving rise to the liability arose under this Agreement. The waivers and limitations in this Section 8 apply regardless of the form of action, whether in contract, tort (including negligence), strict liability or otherwise and will survive and apply even if any limited remedy in this Agreement fails of its essential purpose.\n    \n9.  Indemnification. Customer will defend Substrate, our affiliates, and their respective directors, officers, employers, agents, successors and assigns (\"Substrate Indemnities\") from and against any third-party claim to the extent resulting from: (a) Customer Data; (b) Customer's breach or alleged breach of Section 3.10 (Customer Obligations); (c) Customer's or its Users' violations of Law, fraud, gross negligence, or willful misconduct; or (d) Customer's or its Users' breach or non-fulfillment of any representation, warranty, or covenant in this Agreement, and Customer will indemnify and hold the Substrate Indemnities harmless against any damages and costs awarded against the Substrate Indemnities (including reasonable attorneys' fees) or agreed in a settlement by Customer resulting from the claim.\n    \n10.  Confidentiality.\n    \n\n10.1. Definition. \"Confidential Information\" means information disclosed to the receiving party (\"Recipient\") under this Agreement that is marked by the disclosing party (\"Discloser\") as proprietary or confidential or, if disclosed orally, is designated as proprietary or confidential at the time of disclosure. Our Confidential Information includes the terms and conditions of this Agreement and any technical or performance information about the Service.\n\n10.2. Obligations. As Recipient, each party will: (a) hold Confidential Information in confidence and not disclose it to third parties except as permitted in this Agreement, including Section 3.7 (Use of Customer Data); and (b) only use Confidential Information to fulfill its obligations and exercise its rights in this Agreement. At Discloser's request, Recipient will delete all Confidential Information, except, in the case where Substrate is the Recipient, Substrate may retain the Customer's Confidential Information to the extent required to continue to provide the Service. Recipient may disclose Confidential Information to its employees, agents, contractors, and other representatives having a legitimate need to know, provided Recipient remains responsible for their compliance with this Section 10 and they are bound to confidentiality obligations no less protective than this Section 10.\n\n10.3. Exclusions. These confidentiality obligations do not apply to information that Recipient can document: (a) is or becomes public knowledge through no fault of the receiving party; (b) it rightfully knew or possessed prior to receipt under this Agreement; (c) it rightfully received from a third party without breach of confidentiality obligations; or (d) it independently developed without using Confidential Information.\n\n10.4. Remedies. Unauthorized use or disclosure of Confidential Information may cause substantial harm for which damages alone are an insufficient remedy. Each party may seek appropriate equitable relief, in addition to other available remedies, for breach or threatened breach of this Section 10.\n\n10.5. Required Disclosures. Nothing in this Agreement prohibits either party from making disclosures, including of Customer Data and other Confidential Information, if required by Law, subpoena, or court order, provided (if permitted by Law) it notifies the other party in advance and cooperates in any effort to obtain confidential treatment.\n\n11.  Trials and Betas. If Customer or its Users receive access to or use of Service or features thereof on a free or trial basis or as an alpha, beta, or early access offering (\"Trials and Betas\"), such access to or use is permitted only for Customer's internal evaluation and testing purposes during the period designated by Substrate (not to exceed thirty 30 days unless otherwise agreed upon by the parties in writing). These Trials and Betas will be considered part of the Service and, subject to the remainder of this Section 11, all provisions of this Agreement relating to the Service will apply to these Trials and Betas. Trials and Betas are optional and either party may terminate Trials and Betas at any time for any reason. Trials and Betas may be inoperable, incomplete, or include features that Substrate may never release, and their features and performance information are deemed to be Substrate's Confidential Information. Substrate may suspend Customer's and its Users' access to the Trials and Betas at any time. Customer's and its Users' use of Trials and Betas is at their own risk. NOTWITHSTANDING ANYTHING TO THE CONTRARY IN THIS AGREEMENT, SUBSTRATE PROVIDES NO WARRANTY, INDEMNITY, OR SUPPORT FOR TRIALS AND BETAS, AND OUR LIABILITY FOR TRIALS AND BETAS WILL NOT EXCEED US $50.00.\n    \n12.  Modifications. Substrate may modify this Agreement from time to time with notice to Customer. Modifications take effect at Customer's next Subscription Term or Order unless Substrate indicates an earlier effective date. If Substrate requires modifications with an earlier effective date and Customer objects, Customer's exclusive remedy is to terminate this Agreement with notice to Substrate, in which case Substrate will provide Customer a refund of any pre-paid Fees for the terminated portion of the current Subscription Term. To exercise this termination right, Customer must notify Substrate of its objections within 30 days after Substrate's notice of the modified Agreement. Once the modified Agreement takes effect Customer's continued use of the Service constitutes its acceptance of the modifications. Substrate may require Customer to click to accept the modified Agreement.\n    \n13.  Miscellaneous.\n    \n\n13.1. General Provisions. This Agreement, including the Privacy Policy and any other agreements expressly incorporated by reference into this Agreement, are the entire and exclusive understanding and agreement between Customer and Substrate regarding your use of the Service. Customer may not assign or transfer this Agreement or your rights under this Agreement, in whole or in part, by operation of law or otherwise, without Substrate's prior written consent. Substrate may assign this Agreement and all rights granted under this Agreement, including with respect to your Customer Data, at any time without notice or consent. The failure to require performance of any provision will not affect Substrate's right to require performance at any other time after that, nor will a waiver by Substrate of any breach or default of this Agreement, or any provision of this Agreement, be a waiver of any subsequent breach or default or a waiver of the provision itself. Use of Section headers in this Agreement is for convenience only and will not have any impact on the interpretation of any provision. Neither party is liable for any delay or failure to perform any obligation under this Agreement (except for a failure to pay Fees) due to events beyond its reasonable control, such as a strike, pandemic, epidemic, health emergency, blockade, war, pandemic, act of terrorism, riot, Internet or utility failures, refusal of government license, or natural disaster. The parties are independent contractors, not agents, partners, or joint ventures. Throughout this Agreement the use of the word \"including\" means \"including but not limited to.\" If any part of this Agreement is held to be invalid or unenforceable, then the unenforceable part will be given effect to the greatest extent possible, and the remaining parts will remain in full force and effect.\n\n13.2. Governing Law. This Agreement is governed by the laws of the State of California and the United States without regard to conflicts of laws provisions that would result in the application of the laws of another jurisdiction and without regard to the United Nations Convention on the International Sale of Goods. The jurisdiction and venue for actions related to this Agreement will be the state and United States federal courts located in San Mateo County, California and both parties submit to the personal jurisdiction of those courts.\n\n13.3. Additional Terms. Customer's use of the Service is subject to all additional terms, policies, rules, or guidelines applicable to the Service or certain features of the Service that Substrate may post on or link to from the Service (\"Additional Terms\"). All Additional Terms are incorporated by this reference into, and made a part of, this Agreement.\n\n13.4. Consent to Electronic Communications. By using the Service, Customer consents to receiving certain electronic communications from Substrate as further described in Substrate's Privacy Policy. Please read Substrate's Privacy Policy to learn more about Substrate electronic communications practices. Customer agree that any notices, agreements, disclosures, or other communications that Substrate sends to Customer electronically will satisfy any legal communication requirements, including that those communications be in writing.\n\n13.5. Publicity. Neither party may publicly announce that the parties have entered into this Agreement, except with the other party's prior consent or as required by Laws. However, Substrate may include Customer and its trademarks in Substrate's customer lists and promotional materials but will cease further use at Customer's written request.\n\n13.6. Export. Customer will comply with all relevant U.S. and foreign export and import Laws in using any Service. Customer: (a) represents and warrants that it is not listed on any U.S. government list of prohibited or restricted parties or located in (or a national of) a country that is subject to a U.S. government embargo or that has been designated by the U.S. government as a \"terrorist supporting\" country; (b) agrees not to access or use Service in violation of any U.S. export embargo, prohibition, or restriction; and (c) will not submit to the Service any information controlled under the U.S. International Traffic in Arms Regulations.\n\n13.7. Government End-Users. Elements of the Service are commercial computer software. If the user or licensee of the Service is an agency, department, or other entity of the United States Government, the use, duplication, reproduction, release, modification, disclosure, or transfer of the Service or any related documentation of any kind, including technical data and manuals, is restricted by the terms of this Agreement in accordance with Federal Acquisition Regulation 12.212 for civilian purposes and Defense Federal Acquisition Regulation Supplement 227.7202 for military purposes. The Service was developed fully at private expense. All other use is prohibited.\n\n13.8. Contact Information. The Service is offered by Substrate Labs, Inc., located at 199 Cook St. #102, Brooklyn, NY 11206. Customer may contact Substrate by sending correspondence to that address or by emailing Substrate at [support@substrate.run](mailto:support@substrate.run)\n.\n\n13.9. Notice to California Residents. If Customer are a California resident, then under California Civil Code Section 1789.3, Customer may contact the Complaint Assistance Unit of the Division of Consumer Service of the California Department of Consumer Affairs in writing at 1625 N. Market Blvd., Suite N 112, Sacramento, California 95834, or by telephone at +1-800-952-5210 in order to resolve a complaint regarding the Service or to receive further information regarding use of the Service.\n\n13.10. Conflicts in Interpretation. If there are inconsistencies or conflicts between the terms of the body of this Agreement and the terms of any schedules, exhibits, attachments, addenda, Orders, and other documents attached to or incorporated by reference in this Agreement now or as later mutually agreed to by the parties, the order of precedence is as follows: (a) the terms of the Order (but only with respect to the Service purchased thereunder); (b) the terms contained in the body of this Agreement; (c) the terms of the applicable schedules, exhibits, attachments, addenda, and policies to this Agreement; and (d) the Documentation.\n\n14.  Definitions.\n\n\"Acceptable Use Policy\" means the then-current version of Substrate's Acceptable Use Policy, which is available [https://docs.substrate.run/reference/legal/usage-policy (opens in a new tab)](https://docs.substrate.run/reference/legal/usage-policy)\n or such other URL or location as may be specified by Substrate from time to time.\n\n\"Aggregated Data\" means Customer Data that has been deidentified or aggregated with other data such that the resulting data no longer reasonably identifies Customer or a specific individual.\n\n\"AI Features\" has the meaning given to it in Section 3.14.a).\n\n\"AI Output\" has the meaning given to it in Section 3.14.a).\n\n\"Customer Data\" means any data or information that: (a) Customer (including its Users) submits to the Service, including from Third-Party Platforms; and (b) is collected, accessed, used, disclosed, transferred, transmitted, stored, hosted, or otherwise processed by Substrate to provide the Service to Customer.\n\n\"Customer Systems\" means Customer's hardware, software, other technology, and infrastructure that Customer is required to provide and maintain in order for Customer to access and use the Service.\n\n\"Data Protection Laws\" means: (a) the California Consumer Privacy Act of 2018 (California Civil Code §§ 1798.100 to 1798.199) and its implementing regulations, as amended or superseded from time to time; (b) the General Data Protection Regulation (EU) 2016/679 (\"GDPR\"), and the e-Privacy Directive 2002/58/EC (as amended by Directive 2009/136/EC), their national implementations in the European Economic Area (\"EEA\"), and all other data protection laws of the EEA including laws of the European Union (\"EU\"), the data protection laws of the United Kingdom (\"UK\") and Switzerland, each as applicable, and as may be amended or replaced from time to time; and (c) any similar Laws\n\n\"Documentation\" means the then-current version of Substrate's written usage guidelines and standard technical documentation for the Service, including without limitation the Acceptable Use Policy, that Substrate makes generally available or that are provided to Customer.\n\n\"High Risk Activities\" means activities where use or failure of the Service could lead to death, personal injury, or environmental damage, including life support systems, emergency services, nuclear facilities, autonomous vehicles, or air traffic control.\n\n\"Laws\" means all applicable relevant local, state, federal and international laws, regulations and conventions, including those related to data privacy and data transfer, international communications, and export of data, including Customer Personal Data as defined in Substrate's Privacy Policy, or personal information, or any similar concepts under applicable Laws.\n\n\"Optional AI Features\" has the meaning given to it in Section 3.14.c).\n\n\"Order\" means an order that is executed by the parties or a process Customer complete through the online order flow Substrate provide each of which references this Agreement.\n\n\"Privacy Policy\" means the Privacy Policy [https://docs.substrate.run/reference/legal/privacy-policy (opens in a new tab)](https://docs.substrate.run/reference/legal/privacy-policy)\n\n\"Process\" means to collect, access, use, disclose, transfer, transmit, store, host, or otherwise process.\n\n\"Prohibited Data\" means any: (a) special categories of data enumerated in European Union Regulation 2016/679, Article 9(1) or any successor legislation; (b) patient, medical, or other protected health information regulated by the Health Insurance Portability and Accountability Act (as amended and supplemented) (\"HIPAA\"); (c) credit, debit, or other payment card data subject to the Payment Card Industry Data Security Standards; (d) other information subject to regulation or protection under specific Laws such as the Children's Online Privacy Protection Act or Gramm-Leach-Bliley Act (or related rules or regulations); (e) social security numbers, driver's license numbers, or other government ID numbers; or (f) any data similar to any of the foregoing.\n\n\"Software\" means any Substrate customer software, scripts, sample code, or other code provided by Substrate or use with the Service.\n\n\"Subscription Term\" means the period during which Customer's subscription to access and use the Service is in effect, as identified in the applicable Order.\n\n\"Third-Party Platform\" means any third-party platform, add-on, service, or product not provided by Substrate that Customer elects to integrate or enable for use with the Service.\n\n\"Usage Data\" means information generated from the use of the Service, which data does not identify Users, any other natural human persons, or Customer, such as technical logs, data, and learnings about Customer's use of the Service, but excluding any identifiable Customer Data.\n\n\"User\" means any employee or contractor of Customer that Customer allows to use the Service on Customer's behalf.\n\n[Versioning](/reference/versioning \"Versioning\")\n[Privacy Policy](/reference/legal/privacy-policy \"Privacy Policy\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "markdown": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nReference\n\nLegal\n\nTerms of Service\n\nTerms of Service\n================\n\nLast Updated: April 2, 2024\n\nThis Terms of Service (\"Agreement\") is a legally binding contract between you and Substrate Labs Inc. (\"Substrate,\" \"us,\" \"we,\" or \"our\") regarding your use of the Service (as defined in Section 1). References to \"Customer\", \"you\", and \"your\" refer to the individual, company, or other entity that accepts the Agreement, by executing an ordering document provided to you by us, placing an Order using online functionality Substrate makes available like clicking a box, creating an Account (as defined in Section 3.2), or otherwise affirmatively accepting the Agreement through another means Substrate offers you. If the Service is being used on behalf of a company or other entity by an individual authorized to accept this Agreement on its behalf, then all references to \"Customer,\" \"you,\" or \"your\" refer to the company or other entity. If you are a company or other entity, the individual accepting this Agreement on your behalf represents and warrants that they have authority to bind you to this Agreement. If you are accepting this Agreement on behalf of a company or other entity and an authorized representative of the entity has already accepted this Agreement on behalf of the entity or entered into a separate agreement regarding the use of the Service (\"Separate Agreement\") prior to the date upon which you accept this Agreement (\"Effective Date\"), this Agreement will not apply to you, and your and the entity's rights and obligations with respect to the Service will at all times be governed by, and subject to, the Separate Agreement. If you are not eligible, or do not agree to the terms and conditions of this Agreement, then you do not have our permission to use the Service. Your use of and our provision of the Service to you, constitutes an Agreement by Substrate and by you to be bound by this Agreement.\n\n1.  Defined Terms. Certain capitalized terms used in this Agreement are defined in Section 14 (Definitions) and others are defined contextually in this Agreement.\n    \n2.  Overview. The Service provides features and functionalities in connection with Substrate's unified application programming interface (\"API\") for open-source machine learning models (\"Service\"). During the Subscription Term (defined below) and subject to the Customer's compliance with this Agreement, Substrate will make the API available to the Customer under the terms and conditions set forth in this Agreement.\n    \n3.  The Service.\n    \n\n3.1. Permitted Use. Subject to the terms and conditions of this Agreement and each Order, Substrate will make the Service available to Customer and, if Customer is a company or entity, to Customer's Users during the Subscription Term. Customer may only use the Service internally.\n\n3.2. Access. To access the Service, Customer and its Users must register for an account (\"Account\") and, in doing so, may be required to provide Substrate with information (such name, email address, or other contact information). Customer agrees that the information it provides to Substrate is accurate, complete, and not misleading and that it will keep it accurate and up to date at all times. Only Users, using the mechanisms designated by Substrate (including, if applicable, API access keys) (\"Log-in Credentials\"), may access and use the Service. Each User must keep their Log-in Credentials confidential and not share them with anyone else. Customer is responsible for its Users' compliance with this Agreement and all actions taken through their Log-in Credentials (excluding misuse of the Log-in Credentials caused by Substrate's breach of this Agreement). Customer will promptly notify Substrate if Customer becomes aware of any compromise of any Log-in Credentials. Substrate may Process Log-in Credentials in connection with Substrate's provision of the Service or for Substrate's internal business purposes. Customer represents and warrants to Substrate that: (a) it has not previously been suspended or removed from the Service; and (b) its registration and use of the Service is in compliance with all Laws.\n\n3.3. License. Subject to the terms and conditions of this Agreement, Substrate hereby grants to Customer a non-exclusive, royalty-free, fully paid-up, non-sublicensable, non-transferable (except pursuant to Section 13.1) license, during the Subscription Term, to: (a) download, reproduce, and use Substrate's Documentation, technical literature, sample code, and other materials related to the APIs, and reproduce and modify any source code made available as part of such materials; and (b) make calls to Substrate's APIs; in each case of (a) and (b), solely as specified in the Documentation and in accordance with this Agreement. Substrate reserves the right to monitor Customer's use of the APIs and may restrict Customer's access to the API or limit the volume of API calls in that Customer may make, including if Customer's use exceeds Substrate's API call limits or has a negative impact on performance of the Service. Substrate may, but has no obligation to, update, upgrade, or otherwise modify its APIs and features or functionality thereof. For avoidance of doubt, Customer's right to use the APIs is subject to Section 3.4 (Restrictions).\n\n3.4. Restrictions. Customer will not (and will not permit its Users or anyone else to) do any of the following: (a) provide access to, distribute, sell, or sublicense the Service to a third party (other than Users); (b) use the Service on behalf of, or to provide any product or service to, third parties; (c) use the Service to develop a similar or competing product or service; (d) reverse engineer, decompile, disassemble, or seek to access the source code or non-public APIs to the Service (other than as contemplated by the Documentation with respect to the source code), except to the extent expressly permitted by Law (and then only with prior notice to Substrate); (e) modify or create derivative works of the Service or copy any element of the Service; (f) remove or obscure any proprietary notices in the Service; (g) publish benchmarks or performance information about the Service; (h) interfere with the operation of the Service, circumvent or violate any access, usage, rate, concurrency, or frequency restrictions, or conduct any security or vulnerability test of the Service; (i) transmit any viruses or other harmful materials to the Service or perform denial-of-service attacks or other similar attacks; (j) take any action that risks harm to others or to the security, availability, or integrity of the Service; (k) access or use the Service in a manner that violates any Law; (l) use the Service with Prohibited Data or for High Risk Activities; (m) use the Service in any way other than as expressly authorized in the Agreement; or (n) authorize or knowingly assist any third party to do any of the foregoing. Customer acknowledges that the Service is not intended to meet any legal obligations for these uses, including HIPAA requirements, and that Substrate is not a Business Associate as defined under HIPAA. Notwithstanding anything else in this Agreement, Substrate has no liability for Prohibited Data or use of the Service for High Risk Activities.\n\n3.5. Data Protection Laws. Customer will not use the Service with any Customer Data that is subject to Data Protection Laws without first entering into a data processing addendum with Substrate concerning the Processing of such Customer Data in accordance with such Data Protection Laws.\n\n3.6. Support. During the applicable Subscription Term, Substrate will provide Customer with support for the Service during Substrate's normal business hours and in accordance with Substrate's standard support practices (\"Support\").\n\n3.7. Use of Customer Data. Customer grants Substrate the non-exclusive, worldwide, sublicensable right to use, copy, store (temporarily), disclose, transmit, transfer, publicly display, modify, and create derivative works from Customer Data solely to the extent necessary to: (a) provide the Service (including the generation of AI Output and the provision of other AI Features); (b) create, derive, or generate Usage Data; (c) create and compile Aggregated Data; and (d) as otherwise required by Laws or as agreed to in writing between the parties.\n\n3.8. Privacy Policy. To the extent Personal Data as defined in Substrate's Privacy Policy at [https://docs.substrate.run/reference/legal/privacy-policy (opens in a new tab)](https://docs.substrate.run/reference/legal/privacy-policy)\n is uploaded, transmitted, submitted, provided, or processed in connection with Customer's use of the Service, Substrate will comply with the Privacy Policy.\n\n3.9. Usage Data; Aggregated Data. Substrate may Process Usage Data and Aggregated Data for internal business purposes to: (a) track use of Service for billing purposes; (b) provide support for Service; (c) monitor the performance and stability of the Service; (d) prevent or address technical issues with the Service; (e) improve Service, our other products and services, and to develop new products and services (including without limitation, to train artificial intelligence or machine learning models); and (f) for all other lawful business practices, such as analytics, benchmarking, and reports. Customer will not interfere with the collection of Usage Data.\n\n3.10. Customer Obligations. Customer is responsible for its Customer Data, including its content and accuracy, and will comply with Laws and the Documentation when using the Service. Customer represents and warrants that it has made all disclosures, provided all notices, and has obtained all rights, consents, and permissions necessary for Substrate to collect, access, use, disclose, transfer, transmit, store, host, or otherwise process the Customer Data as set forth in this Agreement without violating or infringing Laws, third-party rights, or terms or policies that apply to the Customer Data.\n\n3.11. Suspension. Substrate may immediately suspend Customer's and its Users' access to the Service if: (a) Customer breaches Section 3.4 (Restrictions) or Section 3.10 (Customer Obligations); (b) Customer's Account is 30 days or more overdue; (c) changes to Laws or new Laws require that Substrate suspend the Service or otherwise may impose additional liability on us; or (d) Customer's or its Users' actions risk harm to any of Substrate's other customers or the security, availability, or integrity of the Service. Where practicable, Substrate will use reasonable efforts to provide Customer with prior notice of the suspension. If the issue that led to the suspension is resolved, Substrate will use reasonable efforts to restore your access to the Service.\n\n3.12. Modifications to the Service. Substrate may modify or discontinue all or any part of the Service at any time (including by limiting or discontinuing certain features or functionality of the Service), temporarily or permanently, without notifying Customer (except that Substrate will use commercially reasonable efforts provide Customer with 30 days' prior notice in the event of any deprecation of any material feature or functionality of the Service). Substrate will have no liability for any change or modification to the Service or any suspension or termination of access to or use of the Service as a result thereof. Notwithstanding the foregoing, any such change or modification will only apply on a going-forward basis.\n\n3.13. Customer Systems. Customer will provide and maintain any hardware, software, other technology, and infrastructure that Customer requires to access and use the Service. Customer will be solely liable for implementation, securing, and maintaining the foregoing, and Substrate will not be liable to Customer for any failure or non-fulfillment of Customer to do so.\n\n3.14. AI Features. a) Generally. Certain portions of the Service may include or be powered by generative artificial intelligence (\"AI Features\"), which may generate and return an output to Customer (\"AI Output\"). The AI Output will be deemed Customer Data hereunder. Customer acknowledges that AI Outputs provided to Customer may be similar or identical to AI Outputs independently provided by Substrate to others. b) Infringement by Outputs. Due to the nature of the AI Features, Substrate does not represent or warrant that (a) any AI Output does not incorporate or reflect third-party content or materials or (b) any AI Output will not infringe third-party intellectual property rights. c) Optional AI Features. Certain optional AI Features (the \"Optional AI Features\") may require Substrate to retain certain Customer Data (e.g., embeddings, AI Output, etc.) for extended periods to enable higher performance or additional features of the Service. Customer grants Substrate the non-exclusive, worldwide, revocable (provided such revocation may prevent Substrate from providing Optional AI Features), sublicensable right to store and publicly display Customer Data solely to the extent necessary to provide Optional AI Features. Optional AI Features may be enabled or disabled upon reasonable written notice to Substrate, or as otherwise provided by Substrate through the Service. d) Additional Use Restrictions. Some of the Third-Party Platforms that Substrate employs to provide the AI Features have restrictions on the types of data that can be submitted to their services. Before using any AI Features, Customer should review and ensure it complies with the acceptable use policies of the Third-Party Platforms, including those available at [https://stability.ai/use-policy (opens in a new tab)](https://stability.ai/use-policy)\n and [https://openai.com/policies/usage-policies (opens in a new tab)](https://openai.com/policies/usage-policies)\n. Customer is responsible for its compliance with such policies, and Substrate has no responsibility for Service interruptions caused by Customer's violation of such policies. Substrate may suspend or terminate Customer's use of all or part of the Service if Substrate becomes aware that Customer is violating such policies. e) **Disclaimer. AI Outputs are generated through machine learning processes and are not tested, verified, endorsed, or guaranteed to be accurate, complete, or current by Substrate. Customer should independently review and verify all AI Outputs as to appropriateness for any or all Customer use cases or applications.**\n\n3.15. Third-Party Platforms. Use of Third-Party Platforms are subject to Customer's agreements with the relevant provider and not this Agreement. Substrate does not control and have no liability for Third-Party Platforms, including their security, functionality, operation, availability, or interoperability with the Service or how the Third-Party Platforms or their providers use Customer Data. By enabling a Third-Party Platform to interact with the Service, Customer authorizes Substrate to access and exchange Customer Data with such Third-Party Platform on Customer's behalf. 3.16. Open Source. The Service may be distributed or used with certain third-party open source software (\"OSS\"), as listed in the Documentation or as specified by Substrate upon prior written request by Customer. Any use of OSS on a stand-alone basis will be subject to the terms of the applicable OSS license and not this Agreement.\n\n4.  Commercial Terms.\n\n4.1. Subscription Term Renewal. Each Subscription Term will automatically renew for successive terms equal in length to the Subscription Term. Customer may cancel the Service by in the Substrate Dashboard or by emailing [support@substrate.run](mailto:support@substrate.run)\n. YOUR CANCELLATION MUST BE RECEIVED AT LEAST THIRTY (30) DAYS BEFORE THE EXPIRATION OF THE THEN-CURRENT SUBSCRIPTION TERM IN ORDER TO AVOID BEING CHARGED FOR THE NEXT SUBSCRIPTION PERIOD.\n\n4.2. Fees. Fees for the Service are described in the Order. All fees for the Service (\"Fees\") will be paid in US dollars unless otherwise provided in an Order. Fees are invoiced or charged as described in the Order. Unless the Order provides otherwise, all Fees are due within 30 days of the invoice date. Your Account will be charged a service charge of 1.5% per month or the maximum amount allowed by Law, whichever is less and Customer will also be responsible for Fees or charges that are incidental to any chargeback or collection of any the unpaid amount including any collection Fees. All Fees and other expenses are non-refundable. Customer is responsible for any sales, use, GST, value-added, withholding, or similar taxes or levies that apply to Orders, whether domestic or foreign, other than Substrate's income tax (\"Taxes\"). Fees are exclusive of all Taxes.\n\n4.3. Authorization. You authorize Substrate or its third-party payment processors to charge all sums for the Orders that you place and any level of Service you select as described in this Agreement or published by Substrate, including all applicable Taxes, to the payment method specified in your Account. If you pay any Fees with a credit card, then Substrate may seek pre-authorization of your credit card account prior to your purchase to verify that the credit card is valid and has the necessary funds or credit available to cover your purchase. You agree that Substrate may seek pre-authorization of the credit card account Customer provide to Substrate for payment prior to any purchase to verify that the credit card is valid and has the necessary funds or credit available to cover such purchase. If your payment method is no longer valid at the time a renewal Fee is due, then Substrate reserves the right to delete your Account and any information or Customer Data associated with your Account without any liability to you.\n\n4.4. Pricing. Substrate reserves the right to determine pricing for the Service. We will use reasonable efforts to keep pricing information with respect to the Service that is published on Substrate's pricing page available [https://substrate.run/pricing (opens in a new tab)](https://substrate.run/pricing)\n up to date, and Substrate encourages Customers to check it regularly for current pricing information. Unless Substrate and Customer otherwise agree in an Order executed by the parties, Substrate may change the Fees for the Service (including any feature or functionality of the Service) and Substrate will notify Customer of any such changes before they apply. Substrate may make promotional offers with different features and different pricing to any of Substrate's other customers. These promotional offers, unless made to Customer, will not apply to your Order or this Agreement.\n\n4.5. Renewal Fees. Unless otherwise agreed to by the parties, Fees for renewal Subscription Terms are at Substrate's then-current Fees at the time of such renewal regardless of any discounted pricing in a prior Order or promotional offers previously extended to Customer.\n\n4.6. Delinquent Accounts. Substrate may suspend or terminate access to the Service for any Account for which any amount is due but unpaid. In addition to the amounts due for the Service, a delinquent Account will be charged with fees or charges that are incidental to any chargeback or collection of any the unpaid amount, including collection fees. If your payment method is no longer valid at the time payment is due, then Substrate reserves the right to delete your Account and any information associated with your Account without any liability to you.\n\n5.  Limited Warranty; Disclaimer.\n\n5.1. Limited Warranty. Substrate warrants to Customer that the Service will perform materially as described in the Documentation during a Subscription Term (\"Limited Warranty\").\n\n5.2. Disclaimer. EXCEPT FOR THE LIMITED WARRANTY IN SECTION 5.1, THE SERVICE IS PROVIDED \"AS IS\". SUBSTRATE, ON OUR OWN BEHALF AND ON BEHALF OF OUR SUPPLIERS AND LICENSORS, MAKES NO OTHER WARRANTIES, WHETHER EXPRESS, IMPLIED, STATUTORY, OR OTHERWISE, INCLUDING WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE, OR NONINFRINGEMENT. WE DO NOT WARRANT THAT CUSTOMER'S USE OF THE SERVICE WILL BE UNINTERRUPTED OR ERROR-FREE, THAT SUBSTRATE WILL REVIEW CUSTOMER DATA FOR ACCURACY, OR THAT IT WILL MAINTAIN CUSTOMER DATA WITHOUT LOSS. SUBSTRATE IS NOT LIABLE FOR DELAYS, FAILURES, OR PROBLEMS INHERENT IN USE OF THE INTERNET AND ELECTRONIC COMMUNICATIONS OR OTHER SYSTEMS OUTSIDE SUBSTRATE'S CONTROL. CUSTOMER MAY HAVE OTHER STATUTORY RIGHTS, BUT ANY STATUTORILY REQUIRED WARRANTIES WILL BE LIMITED TO THE SHORTEST LEGALLY PERMITTED PERIOD.\n\n5.3. Warranty Remedy. If Substrate breaches a Limited Warranty during the Subscription Term and Customer makes a reasonably detailed warranty claim in the manner required by Substrate within 30 days of discovering a breach of the Limited Warranty for the Service, then Substrate will use reasonable efforts to correct the non-conformity. If Substrate cannot do so within 30 days of receipt of Customer's warranty claim, either party may terminate the affected Order as it relates to the Service. Substrate will then refund to Customer any pre-paid, unused Fees for the terminated portion of the applicable Subscription Term. This Section 5.3 sets forth Customer's exclusive remedy and Substrate's entire liability for breach of the Limited Warranty. This warranty does not apply to: (a) issues caused by Customer's or Users' misuse of or unauthorized modifications to the applicable Service; (b) issues in or caused by Third-Party Platforms or other third-party systems; (c) use of the applicable Service other than according to the Documentation; or (d) Trials and Betas (defined below) or other free or evaluation use. 6. Term and Termination.\n\n6.1. Term. This Agreement starts on the Effective Date and continues until terminated in accordance with the terms of this Agreement.\n\n6.2. Termination. Either party may terminate this Agreement (including any or all Orders) if the other party: (a) fails to cure a material breach of this Agreement (including a failure to pay Fees) within 30 days after notice; (b) ceases operation without a successor; or (c) seeks protection under a bankruptcy, receivership, trust deed, creditors' arrangement, composition, or comparable proceeding, or if such a proceeding is instituted against that party and not dismissed within 60 days. Either party may terminate this Agreement upon 15 days' prior written notice to the other if there are no Orders then-in-effect. If Customer violates any provision of this Agreement, then your authorization to access the Service and this Agreement automatically terminate. In addition, Substrate may, in our sole discretion, terminate this Agreement or Customer's Account on the Service, or suspend or terminate Customer's access to the Service, at any time for any reason or no reason, with or without notice, and without any liability to Customer arising from such termination. Customer may terminate your Account and this Agreement at any time by contacting [support@substrate.run](mailto:support@substrate.run)\n\n6.3. Effect of Termination. Upon expiration or termination of an Order, Customer's access to and Substrate's obligations to provide the Service will cease, including any licenses and other rights granted to any of Substrate's APIs. If applicable, Customer must uninstall the APIs. Substrate will be under no obligation to store or retain any Customer Data and may delete any Customer Data at any time in our sole discretion. Customer Data and other Confidential Information, as defined in Section 10, may be retained in Recipient's (defined below) standard backups notwithstanding any obligation to delete the applicable Confidential Information but will remain subject to this Agreement's confidentiality restrictions.\n\n6.4. Survival. These Sections survive expiration or termination of this Agreement: 3.4 (Restrictions), 3.9 (Usage Data; Aggregated Data), 3.10 (Customer Obligations), 3.14 (AI Features), 4.2 (Fees), 4.3 (Authorization), 5.2 (Disclaimer), 6.3 (Effect of Termination), 6.4 (Survival), 7 (Ownership), 8 (Limitations of Liability), 9 (Indemnification), 10 (Confidentiality), 13 (Miscellaneous), and 14 (Definitions). Except where an exclusive remedy is provided in this Agreement, exercising a remedy under this Agreement, including termination, does not limit other remedies a party may have.\n\n7.  Ownership. Neither party grants the other any rights or licenses not expressly set out in this Agreement. Except as expressly provided in this Agreement, as between the parties, Customer retains all intellectual property rights and other rights in Customer Data. Except for Customer's use rights in this Agreement, Substrate and our licensors retain all intellectual property rights and other rights in the Service (including all APIs), Software, Documentation, Aggregated Data, Usage Data, and Substrate's technology, templates, formats, and dashboards, including any modifications or improvements to these items made by us. If Customer provides Substrate with feedback or suggestions regarding the Service or our other offerings (collectively, \"Feedback\"), Substrate may use the Feedback or suggestions without restriction or obligation.\n    \n8.  Limitations of Liability. Except for Customer's breaches of Sections 3.1 (Permitted Use), 3.4 (Restrictions), 3.10 (Customer Obligations), either party's breach of Section 10 (Confidentiality) (but excluding claims relating to Customer Data), and amounts payable to third parties under the indemnifying party's obligations in Section 9 (Indemnification) (collectively, \"Excluded Claims\"), neither Substrate's, Customer's or their respective suppliers or licensors will have liability arising out of or related to this Agreement for any loss of use, lost data, lost profits, failure of security mechanisms, interruption of business, or any indirect, special, incidental, reliance, or consequential damages of any kind, even if informed of their possibility in advance. Except for Excluded Claims, neither Substrate's, Customer's, or their respective suppliers' or licensors' liability arising out of or related to this Agreement will exceed in aggregate the amounts paid or payable by Customer to Substrate pursuant to this Agreement during the 12 months prior to the date on which the applicable claim giving rise to the liability arose under this Agreement. The waivers and limitations in this Section 8 apply regardless of the form of action, whether in contract, tort (including negligence), strict liability or otherwise and will survive and apply even if any limited remedy in this Agreement fails of its essential purpose.\n    \n9.  Indemnification. Customer will defend Substrate, our affiliates, and their respective directors, officers, employers, agents, successors and assigns (\"Substrate Indemnities\") from and against any third-party claim to the extent resulting from: (a) Customer Data; (b) Customer's breach or alleged breach of Section 3.10 (Customer Obligations); (c) Customer's or its Users' violations of Law, fraud, gross negligence, or willful misconduct; or (d) Customer's or its Users' breach or non-fulfillment of any representation, warranty, or covenant in this Agreement, and Customer will indemnify and hold the Substrate Indemnities harmless against any damages and costs awarded against the Substrate Indemnities (including reasonable attorneys' fees) or agreed in a settlement by Customer resulting from the claim.\n    \n10.  Confidentiality.\n    \n\n10.1. Definition. \"Confidential Information\" means information disclosed to the receiving party (\"Recipient\") under this Agreement that is marked by the disclosing party (\"Discloser\") as proprietary or confidential or, if disclosed orally, is designated as proprietary or confidential at the time of disclosure. Our Confidential Information includes the terms and conditions of this Agreement and any technical or performance information about the Service.\n\n10.2. Obligations. As Recipient, each party will: (a) hold Confidential Information in confidence and not disclose it to third parties except as permitted in this Agreement, including Section 3.7 (Use of Customer Data); and (b) only use Confidential Information to fulfill its obligations and exercise its rights in this Agreement. At Discloser's request, Recipient will delete all Confidential Information, except, in the case where Substrate is the Recipient, Substrate may retain the Customer's Confidential Information to the extent required to continue to provide the Service. Recipient may disclose Confidential Information to its employees, agents, contractors, and other representatives having a legitimate need to know, provided Recipient remains responsible for their compliance with this Section 10 and they are bound to confidentiality obligations no less protective than this Section 10.\n\n10.3. Exclusions. These confidentiality obligations do not apply to information that Recipient can document: (a) is or becomes public knowledge through no fault of the receiving party; (b) it rightfully knew or possessed prior to receipt under this Agreement; (c) it rightfully received from a third party without breach of confidentiality obligations; or (d) it independently developed without using Confidential Information.\n\n10.4. Remedies. Unauthorized use or disclosure of Confidential Information may cause substantial harm for which damages alone are an insufficient remedy. Each party may seek appropriate equitable relief, in addition to other available remedies, for breach or threatened breach of this Section 10.\n\n10.5. Required Disclosures. Nothing in this Agreement prohibits either party from making disclosures, including of Customer Data and other Confidential Information, if required by Law, subpoena, or court order, provided (if permitted by Law) it notifies the other party in advance and cooperates in any effort to obtain confidential treatment.\n\n11.  Trials and Betas. If Customer or its Users receive access to or use of Service or features thereof on a free or trial basis or as an alpha, beta, or early access offering (\"Trials and Betas\"), such access to or use is permitted only for Customer's internal evaluation and testing purposes during the period designated by Substrate (not to exceed thirty 30 days unless otherwise agreed upon by the parties in writing). These Trials and Betas will be considered part of the Service and, subject to the remainder of this Section 11, all provisions of this Agreement relating to the Service will apply to these Trials and Betas. Trials and Betas are optional and either party may terminate Trials and Betas at any time for any reason. Trials and Betas may be inoperable, incomplete, or include features that Substrate may never release, and their features and performance information are deemed to be Substrate's Confidential Information. Substrate may suspend Customer's and its Users' access to the Trials and Betas at any time. Customer's and its Users' use of Trials and Betas is at their own risk. NOTWITHSTANDING ANYTHING TO THE CONTRARY IN THIS AGREEMENT, SUBSTRATE PROVIDES NO WARRANTY, INDEMNITY, OR SUPPORT FOR TRIALS AND BETAS, AND OUR LIABILITY FOR TRIALS AND BETAS WILL NOT EXCEED US $50.00.\n    \n12.  Modifications. Substrate may modify this Agreement from time to time with notice to Customer. Modifications take effect at Customer's next Subscription Term or Order unless Substrate indicates an earlier effective date. If Substrate requires modifications with an earlier effective date and Customer objects, Customer's exclusive remedy is to terminate this Agreement with notice to Substrate, in which case Substrate will provide Customer a refund of any pre-paid Fees for the terminated portion of the current Subscription Term. To exercise this termination right, Customer must notify Substrate of its objections within 30 days after Substrate's notice of the modified Agreement. Once the modified Agreement takes effect Customer's continued use of the Service constitutes its acceptance of the modifications. Substrate may require Customer to click to accept the modified Agreement.\n    \n13.  Miscellaneous.\n    \n\n13.1. General Provisions. This Agreement, including the Privacy Policy and any other agreements expressly incorporated by reference into this Agreement, are the entire and exclusive understanding and agreement between Customer and Substrate regarding your use of the Service. Customer may not assign or transfer this Agreement or your rights under this Agreement, in whole or in part, by operation of law or otherwise, without Substrate's prior written consent. Substrate may assign this Agreement and all rights granted under this Agreement, including with respect to your Customer Data, at any time without notice or consent. The failure to require performance of any provision will not affect Substrate's right to require performance at any other time after that, nor will a waiver by Substrate of any breach or default of this Agreement, or any provision of this Agreement, be a waiver of any subsequent breach or default or a waiver of the provision itself. Use of Section headers in this Agreement is for convenience only and will not have any impact on the interpretation of any provision. Neither party is liable for any delay or failure to perform any obligation under this Agreement (except for a failure to pay Fees) due to events beyond its reasonable control, such as a strike, pandemic, epidemic, health emergency, blockade, war, pandemic, act of terrorism, riot, Internet or utility failures, refusal of government license, or natural disaster. The parties are independent contractors, not agents, partners, or joint ventures. Throughout this Agreement the use of the word \"including\" means \"including but not limited to.\" If any part of this Agreement is held to be invalid or unenforceable, then the unenforceable part will be given effect to the greatest extent possible, and the remaining parts will remain in full force and effect.\n\n13.2. Governing Law. This Agreement is governed by the laws of the State of California and the United States without regard to conflicts of laws provisions that would result in the application of the laws of another jurisdiction and without regard to the United Nations Convention on the International Sale of Goods. The jurisdiction and venue for actions related to this Agreement will be the state and United States federal courts located in San Mateo County, California and both parties submit to the personal jurisdiction of those courts.\n\n13.3. Additional Terms. Customer's use of the Service is subject to all additional terms, policies, rules, or guidelines applicable to the Service or certain features of the Service that Substrate may post on or link to from the Service (\"Additional Terms\"). All Additional Terms are incorporated by this reference into, and made a part of, this Agreement.\n\n13.4. Consent to Electronic Communications. By using the Service, Customer consents to receiving certain electronic communications from Substrate as further described in Substrate's Privacy Policy. Please read Substrate's Privacy Policy to learn more about Substrate electronic communications practices. Customer agree that any notices, agreements, disclosures, or other communications that Substrate sends to Customer electronically will satisfy any legal communication requirements, including that those communications be in writing.\n\n13.5. Publicity. Neither party may publicly announce that the parties have entered into this Agreement, except with the other party's prior consent or as required by Laws. However, Substrate may include Customer and its trademarks in Substrate's customer lists and promotional materials but will cease further use at Customer's written request.\n\n13.6. Export. Customer will comply with all relevant U.S. and foreign export and import Laws in using any Service. Customer: (a) represents and warrants that it is not listed on any U.S. government list of prohibited or restricted parties or located in (or a national of) a country that is subject to a U.S. government embargo or that has been designated by the U.S. government as a \"terrorist supporting\" country; (b) agrees not to access or use Service in violation of any U.S. export embargo, prohibition, or restriction; and (c) will not submit to the Service any information controlled under the U.S. International Traffic in Arms Regulations.\n\n13.7. Government End-Users. Elements of the Service are commercial computer software. If the user or licensee of the Service is an agency, department, or other entity of the United States Government, the use, duplication, reproduction, release, modification, disclosure, or transfer of the Service or any related documentation of any kind, including technical data and manuals, is restricted by the terms of this Agreement in accordance with Federal Acquisition Regulation 12.212 for civilian purposes and Defense Federal Acquisition Regulation Supplement 227.7202 for military purposes. The Service was developed fully at private expense. All other use is prohibited.\n\n13.8. Contact Information. The Service is offered by Substrate Labs, Inc., located at 199 Cook St. #102, Brooklyn, NY 11206. Customer may contact Substrate by sending correspondence to that address or by emailing Substrate at [support@substrate.run](mailto:support@substrate.run)\n.\n\n13.9. Notice to California Residents. If Customer are a California resident, then under California Civil Code Section 1789.3, Customer may contact the Complaint Assistance Unit of the Division of Consumer Service of the California Department of Consumer Affairs in writing at 1625 N. Market Blvd., Suite N 112, Sacramento, California 95834, or by telephone at +1-800-952-5210 in order to resolve a complaint regarding the Service or to receive further information regarding use of the Service.\n\n13.10. Conflicts in Interpretation. If there are inconsistencies or conflicts between the terms of the body of this Agreement and the terms of any schedules, exhibits, attachments, addenda, Orders, and other documents attached to or incorporated by reference in this Agreement now or as later mutually agreed to by the parties, the order of precedence is as follows: (a) the terms of the Order (but only with respect to the Service purchased thereunder); (b) the terms contained in the body of this Agreement; (c) the terms of the applicable schedules, exhibits, attachments, addenda, and policies to this Agreement; and (d) the Documentation.\n\n14.  Definitions.\n\n\"Acceptable Use Policy\" means the then-current version of Substrate's Acceptable Use Policy, which is available [https://docs.substrate.run/reference/legal/usage-policy (opens in a new tab)](https://docs.substrate.run/reference/legal/usage-policy)\n or such other URL or location as may be specified by Substrate from time to time.\n\n\"Aggregated Data\" means Customer Data that has been deidentified or aggregated with other data such that the resulting data no longer reasonably identifies Customer or a specific individual.\n\n\"AI Features\" has the meaning given to it in Section 3.14.a).\n\n\"AI Output\" has the meaning given to it in Section 3.14.a).\n\n\"Customer Data\" means any data or information that: (a) Customer (including its Users) submits to the Service, including from Third-Party Platforms; and (b) is collected, accessed, used, disclosed, transferred, transmitted, stored, hosted, or otherwise processed by Substrate to provide the Service to Customer.\n\n\"Customer Systems\" means Customer's hardware, software, other technology, and infrastructure that Customer is required to provide and maintain in order for Customer to access and use the Service.\n\n\"Data Protection Laws\" means: (a) the California Consumer Privacy Act of 2018 (California Civil Code §§ 1798.100 to 1798.199) and its implementing regulations, as amended or superseded from time to time; (b) the General Data Protection Regulation (EU) 2016/679 (\"GDPR\"), and the e-Privacy Directive 2002/58/EC (as amended by Directive 2009/136/EC), their national implementations in the European Economic Area (\"EEA\"), and all other data protection laws of the EEA including laws of the European Union (\"EU\"), the data protection laws of the United Kingdom (\"UK\") and Switzerland, each as applicable, and as may be amended or replaced from time to time; and (c) any similar Laws\n\n\"Documentation\" means the then-current version of Substrate's written usage guidelines and standard technical documentation for the Service, including without limitation the Acceptable Use Policy, that Substrate makes generally available or that are provided to Customer.\n\n\"High Risk Activities\" means activities where use or failure of the Service could lead to death, personal injury, or environmental damage, including life support systems, emergency services, nuclear facilities, autonomous vehicles, or air traffic control.\n\n\"Laws\" means all applicable relevant local, state, federal and international laws, regulations and conventions, including those related to data privacy and data transfer, international communications, and export of data, including Customer Personal Data as defined in Substrate's Privacy Policy, or personal information, or any similar concepts under applicable Laws.\n\n\"Optional AI Features\" has the meaning given to it in Section 3.14.c).\n\n\"Order\" means an order that is executed by the parties or a process Customer complete through the online order flow Substrate provide each of which references this Agreement.\n\n\"Privacy Policy\" means the Privacy Policy [https://docs.substrate.run/reference/legal/privacy-policy (opens in a new tab)](https://docs.substrate.run/reference/legal/privacy-policy)\n\n\"Process\" means to collect, access, use, disclose, transfer, transmit, store, host, or otherwise process.\n\n\"Prohibited Data\" means any: (a) special categories of data enumerated in European Union Regulation 2016/679, Article 9(1) or any successor legislation; (b) patient, medical, or other protected health information regulated by the Health Insurance Portability and Accountability Act (as amended and supplemented) (\"HIPAA\"); (c) credit, debit, or other payment card data subject to the Payment Card Industry Data Security Standards; (d) other information subject to regulation or protection under specific Laws such as the Children's Online Privacy Protection Act or Gramm-Leach-Bliley Act (or related rules or regulations); (e) social security numbers, driver's license numbers, or other government ID numbers; or (f) any data similar to any of the foregoing.\n\n\"Software\" means any Substrate customer software, scripts, sample code, or other code provided by Substrate or use with the Service.\n\n\"Subscription Term\" means the period during which Customer's subscription to access and use the Service is in effect, as identified in the applicable Order.\n\n\"Third-Party Platform\" means any third-party platform, add-on, service, or product not provided by Substrate that Customer elects to integrate or enable for use with the Service.\n\n\"Usage Data\" means information generated from the use of the Service, which data does not identify Users, any other natural human persons, or Customer, such as technical logs, data, and learnings about Customer's use of the Service, but excluding any identifiable Customer Data.\n\n\"User\" means any employee or contractor of Customer that Customer allows to use the Service on Customer's behalf.\n\n[Versioning](/reference/versioning \"Versioning\")\n[Privacy Policy](/reference/legal/privacy-policy \"Privacy Policy\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "metadata": {
      "ogUrl": "https://docs.substrate.run",
      "title": "Terms of Service | Substrate",
      "robots": "index,follow",
      "ogImage": "/og-image-v3.png",
      "ogTitle": "Terms of Service | Substrate",
      "sourceURL": "https://docs.substrate.run/reference/legal/terms-of-service",
      "description": "Substrate",
      "ogDescription": "The platform for compound AI. Powerful SDKs, with batteries included: optimized AI models, vector storage, code interpreter, and agentic control flow. Stop using LangChain.",
      "pageStatusCode": 200,
      "ogLocaleAlternate": []
    },
    "linksOnPage": [
      "https://substrate.run",
      "https://docs.substrate.run/",
      "https://substrate.run/nodes",
      "https://substrate.run/pricing",
      "https://substrate.run/company",
      "https://blog.substrate.run",
      "https://docs.substrate.run/overview/setup",
      "https://docs.substrate.run/overview/connecting",
      "https://docs.substrate.run/overview/storing",
      "https://docs.substrate.run/why",
      "https://docs.substrate.run/changelog",
      "https://docs.substrate.run/guides/extract-and-summarize",
      "https://docs.substrate.run/guides/reimagine-a-room",
      "https://docs.substrate.run/guides/transcription",
      "https://docs.substrate.run/guides/vector-stores",
      "https://docs.substrate.run/guides/remove-background",
      "https://docs.substrate.run/guides/masked-image-generation",
      "https://docs.substrate.run/guides/mixture-of-agents",
      "https://docs.substrate.run/reference/api",
      "https://docs.substrate.run/reference/quick",
      "https://docs.substrate.run/reference/box",
      "https://docs.substrate.run/reference/if",
      "https://docs.substrate.run/reference/run-python",
      "https://docs.substrate.run/reference/streaming",
      "https://docs.substrate.run/reference/external-files",
      "https://docs.substrate.run/reference/external-files/s3",
      "https://docs.substrate.run/reference/versioning",
      "https://docs.substrate.run/reference/legal/terms-of-service",
      "https://docs.substrate.run/reference/legal/privacy-policy",
      "https://docs.substrate.run/reference/legal/usage-policy",
      "https://stability.ai/use-policy",
      "https://openai.com/policies/usage-policies",
      "mailto:support@substrate.run",
      "https://x.com/substratelabs",
      "https://www.linkedin.com/company/substratelabs",
      "https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA"
    ]
  },
  {
    "content": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nReference\n\nLegal\n\nPrivacy Policy\n\n[Terms of Service](/reference/legal/terms-of-service \"Terms of Service\")\n[Usage Policy](/reference/legal/usage-policy \"Usage Policy\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "markdown": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nReference\n\nLegal\n\nPrivacy Policy\n\n[Terms of Service](/reference/legal/terms-of-service \"Terms of Service\")\n[Usage Policy](/reference/legal/usage-policy \"Usage Policy\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "metadata": {
      "ogUrl": "https://docs.substrate.run",
      "title": "Privacy Policy | Substrate",
      "robots": "index,follow",
      "ogImage": "/og-image-v3.png",
      "ogTitle": "Privacy Policy | Substrate",
      "sourceURL": "https://docs.substrate.run/reference/legal/privacy-policy",
      "description": "Substrate",
      "ogDescription": "The platform for compound AI. Powerful SDKs, with batteries included: optimized AI models, vector storage, code interpreter, and agentic control flow. Stop using LangChain.",
      "pageStatusCode": 200,
      "ogLocaleAlternate": []
    },
    "linksOnPage": [
      "https://substrate.run",
      "https://docs.substrate.run/",
      "https://substrate.run/nodes",
      "https://substrate.run/pricing",
      "https://substrate.run/company",
      "https://blog.substrate.run",
      "https://docs.substrate.run/overview/setup",
      "https://docs.substrate.run/overview/connecting",
      "https://docs.substrate.run/overview/storing",
      "https://docs.substrate.run/why",
      "https://docs.substrate.run/changelog",
      "https://docs.substrate.run/guides/extract-and-summarize",
      "https://docs.substrate.run/guides/reimagine-a-room",
      "https://docs.substrate.run/guides/transcription",
      "https://docs.substrate.run/guides/vector-stores",
      "https://docs.substrate.run/guides/remove-background",
      "https://docs.substrate.run/guides/masked-image-generation",
      "https://docs.substrate.run/guides/mixture-of-agents",
      "https://docs.substrate.run/reference/api",
      "https://docs.substrate.run/reference/quick",
      "https://docs.substrate.run/reference/box",
      "https://docs.substrate.run/reference/if",
      "https://docs.substrate.run/reference/run-python",
      "https://docs.substrate.run/reference/streaming",
      "https://docs.substrate.run/reference/external-files",
      "https://docs.substrate.run/reference/external-files/s3",
      "https://docs.substrate.run/reference/versioning",
      "https://docs.substrate.run/reference/legal/terms-of-service",
      "https://docs.substrate.run/reference/legal/privacy-policy",
      "https://docs.substrate.run/reference/legal/usage-policy",
      "https://x.com/substratelabs",
      "https://www.linkedin.com/company/substratelabs",
      "https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA"
    ]
  },
  {
    "content": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nReference\n\nLegal\n\nUsage Policy\n\n[Privacy Policy](/reference/legal/privacy-policy \"Privacy Policy\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "markdown": "[](https://substrate.run)\n\n[Docs](/)\n\n[Nodes](https://substrate.run/nodes)\n\n[Pricing](https://substrate.run/pricing)\n\n[Company](https://substrate.run/company)\n\n[Blog](https://blog.substrate.run)\n\n...\n\n*   [Introduction](/)\n    \n*   Overview\n    \n    *   [Get started](/overview/setup)\n        \n    *   [Connect nodes](/overview/connecting)\n        \n    *   [Store outputs](/overview/storing)\n        \n    \n*   [Why Substrate?](/why)\n    \n*   [Changelog](/changelog)\n    \n*   Guides\n    \n    *   [Extract and summarize Hacker News comments](/guides/extract-and-summarize)\n        \n    *   [Reimagine a room](/guides/reimagine-a-room)\n        \n    *   [Transcribe audio & video](/guides/transcription)\n        \n    *   [Store & query vectors](/guides/vector-stores)\n        \n    *   [Separate foreground & background](/guides/remove-background)\n        \n    *   [Masked image generation](/guides/masked-image-generation)\n        \n    *   [Mixture of Agents](/guides/mixture-of-agents)\n        \n    \n*   Reference\n    \n    *   [API design](/reference/api)\n        \n    *   [Quick reference](/reference/quick)\n        \n    *   [Box](/reference/box)\n        \n    *   [If](/reference/if)\n        \n    *   [RunPython](/reference/run-python)\n        \n    *   [Streaming](/reference/streaming)\n        \n    *   [External files](/reference/external-files)\n        \n        *   [Amazon S3](/reference/external-files/s3)\n            \n        \n    *   [Versioning](/reference/versioning)\n        \n    *   Legal\n        \n        *   [Terms of Service](/reference/legal/terms-of-service)\n            \n        *   [Privacy Policy](/reference/legal/privacy-policy)\n            \n        *   [Usage Policy](/reference/legal/usage-policy)\n            \n        \n    \n\nReference\n\nLegal\n\nUsage Policy\n\n[Privacy Policy](/reference/legal/privacy-policy \"Privacy Policy\")\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "metadata": {
      "ogUrl": "https://docs.substrate.run",
      "title": "Usage Policy | Substrate",
      "robots": "index,follow",
      "ogImage": "/og-image-v3.png",
      "ogTitle": "Usage Policy | Substrate",
      "sourceURL": "https://docs.substrate.run/reference/legal/usage-policy",
      "description": "Substrate",
      "ogDescription": "The platform for compound AI. Powerful SDKs, with batteries included: optimized AI models, vector storage, code interpreter, and agentic control flow. Stop using LangChain.",
      "pageStatusCode": 200,
      "ogLocaleAlternate": []
    },
    "linksOnPage": [
      "https://substrate.run",
      "https://docs.substrate.run/",
      "https://substrate.run/nodes",
      "https://substrate.run/pricing",
      "https://substrate.run/company",
      "https://blog.substrate.run",
      "https://docs.substrate.run/overview/setup",
      "https://docs.substrate.run/overview/connecting",
      "https://docs.substrate.run/overview/storing",
      "https://docs.substrate.run/why",
      "https://docs.substrate.run/changelog",
      "https://docs.substrate.run/guides/extract-and-summarize",
      "https://docs.substrate.run/guides/reimagine-a-room",
      "https://docs.substrate.run/guides/transcription",
      "https://docs.substrate.run/guides/vector-stores",
      "https://docs.substrate.run/guides/remove-background",
      "https://docs.substrate.run/guides/masked-image-generation",
      "https://docs.substrate.run/guides/mixture-of-agents",
      "https://docs.substrate.run/reference/api",
      "https://docs.substrate.run/reference/quick",
      "https://docs.substrate.run/reference/box",
      "https://docs.substrate.run/reference/if",
      "https://docs.substrate.run/reference/run-python",
      "https://docs.substrate.run/reference/streaming",
      "https://docs.substrate.run/reference/external-files",
      "https://docs.substrate.run/reference/external-files/s3",
      "https://docs.substrate.run/reference/versioning",
      "https://docs.substrate.run/reference/legal/terms-of-service",
      "https://docs.substrate.run/reference/legal/privacy-policy",
      "https://docs.substrate.run/reference/legal/usage-policy",
      "https://x.com/substratelabs",
      "https://www.linkedin.com/company/substratelabs",
      "https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA"
    ]
  },
  {
    "content": "404\n===\n\nThis page could not be found.\n-----------------------------\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "markdown": "404\n===\n\nThis page could not be found.\n-----------------------------\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "metadata": {
      "ogUrl": "https://docs.substrate.run",
      "title": "404: This page could not be found",
      "ogImage": "/og-image-v3.png",
      "ogTitle": "Substrate Documentation",
      "pageError": "UNAUTHORIZED",
      "sourceURL": "https://docs.substrate.run/dashboard/keys",
      "ogDescription": "The platform for compound AI. Powerful SDKs, with batteries included: optimized AI models, vector storage, code interpreter, and agentic control flow. Stop using LangChain.",
      "pageStatusCode": 404,
      "ogLocaleAlternate": []
    },
    "linksOnPage": [
      "https://substrate.run",
      "https://x.com/substratelabs",
      "https://www.linkedin.com/company/substratelabs",
      "https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA"
    ]
  },
  {
    "content": "404\n===\n\nThis page could not be found.\n-----------------------------\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "markdown": "404\n===\n\nThis page could not be found.\n-----------------------------\n\n[© 2023-2024 Substrate Labs Inc.](https://substrate.run)\n\n[Twitter](https://x.com/substratelabs)\n\n[LinkedIn](https://www.linkedin.com/company/substratelabs)\n\n[Slack Community](https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA)",
    "metadata": {
      "ogUrl": "https://docs.substrate.run",
      "title": "404: This page could not be found",
      "ogImage": "/og-image-v3.png",
      "ogTitle": "Substrate Documentation",
      "pageError": "UNAUTHORIZED",
      "sourceURL": "https://docs.substrate.run/external-files/s3",
      "ogDescription": "The platform for compound AI. Powerful SDKs, with batteries included: optimized AI models, vector storage, code interpreter, and agentic control flow. Stop using LangChain.",
      "pageStatusCode": 404,
      "ogLocaleAlternate": []
    },
    "linksOnPage": [
      "https://substrate.run",
      "https://x.com/substratelabs",
      "https://www.linkedin.com/company/substratelabs",
      "https://join.slack.com/t/substratecommunity/shared_invite/zt-2jd8w6b7n-b0qE5QWV7rsClGglHeu_rA"
    ]
  }
]